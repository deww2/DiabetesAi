2025-06-05 17:28:22,882 - UserService - DEBUG - Initializing UserService
2025-06-05 17:28:22,882 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 17:28:22,882 - HealthService - DEBUG - Initializing HealthService
2025-06-05 17:28:22,882 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 17:28:22,888 - AIService - DEBUG - Initializing AIService
2025-06-05 17:28:22,952 - AIService - DEBUG - GenAI client initialized
2025-06-05 17:28:22,952 - AIService - DEBUG - Initializing AIService
2025-06-05 17:28:22,952 - AIService - DEBUG - Initializing AIService
2025-06-05 17:28:22,961 - AIService - DEBUG - GenAI client initialized
2025-06-05 17:28:22,961 - AIService - DEBUG - GenAI client initialized
2025-06-05 17:28:25,611 - UserService - DEBUG - Initializing UserService
2025-06-05 17:28:25,611 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 17:28:25,614 - HealthService - DEBUG - Initializing HealthService
2025-06-05 17:28:25,614 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 17:28:25,614 - AIService - DEBUG - Initializing AIService
2025-06-05 17:28:25,656 - AIService - DEBUG - GenAI client initialized
2025-06-05 17:28:25,656 - AIService - DEBUG - Initializing AIService
2025-06-05 17:28:25,656 - AIService - DEBUG - Initializing AIService
2025-06-05 17:28:25,668 - AIService - DEBUG - GenAI client initialized
2025-06-05 17:28:25,668 - AIService - DEBUG - GenAI client initialized
2025-06-05 17:29:27,267 - UserService - DEBUG - Processing login for email: test@example.com
2025-06-05 17:29:28,000 - UserService - DEBUG - User found: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
2025-06-05 17:29:28,002 - UserService - DEBUG - Custom token created for login
2025-06-05 17:29:29,228 - UserService - DEBUG - Last login timestamp updated
2025-06-05 17:31:58,138 - UserService - DEBUG - Initializing UserService
2025-06-05 17:31:58,140 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 17:31:58,140 - HealthService - DEBUG - Initializing HealthService
2025-06-05 17:31:58,140 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 17:31:58,140 - AIService - DEBUG - Initializing AIService
2025-06-05 17:31:58,286 - AIService - DEBUG - GenAI client initialized
2025-06-05 17:31:58,291 - AIService - DEBUG - Initializing AIService
2025-06-05 17:31:58,291 - AIService - DEBUG - Initializing AIService
2025-06-05 17:31:58,310 - AIService - DEBUG - GenAI client initialized
2025-06-05 17:31:58,310 - AIService - DEBUG - GenAI client initialized
2025-06-05 17:32:26,062 - UserService - DEBUG - Creating new user with email: test2@example.com
2025-06-05 17:32:26,067 - UserService - DEBUG - Additional data: {}
2025-06-05 17:32:27,407 - UserService - DEBUG - User created in Firebase Auth: XARZ0UQd81ZlhUV8kv8HqbcGjG42
2025-06-05 17:32:28,636 - UserService - DEBUG - User data saved to Firestore: {'email': 'test2@example.com', 'display_name': 'John Doe', 'created_at': Sentinel: Value used to set a document field to the server timestamp., 'last_login': Sentinel: Value used to set a document field to the server timestamp.}
2025-06-05 17:32:28,653 - UserService - DEBUG - Custom token created for new user
2025-06-05 18:40:00,462 - UserService - DEBUG - Processing login for email: test@example.com
2025-06-05 18:40:01,240 - UserService - DEBUG - User found: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
2025-06-05 18:40:01,240 - UserService - DEBUG - Custom token created for login
2025-06-05 18:40:02,375 - UserService - DEBUG - Last login timestamp updated
2025-06-05 18:43:31,424 - UserService - DEBUG - Initializing UserService
2025-06-05 18:43:31,424 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 18:43:31,429 - HealthService - DEBUG - Initializing HealthService
2025-06-05 18:43:31,430 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 18:43:31,430 - UserService - DEBUG - Initializing UserService
2025-06-05 18:43:31,430 - UserService - DEBUG - Initializing UserService
2025-06-05 18:43:31,430 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 18:43:31,430 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 18:43:31,434 - AIService - DEBUG - Initializing AIService
2025-06-05 18:43:31,573 - AIService - DEBUG - GenAI client initialized
2025-06-05 18:43:31,573 - AIService - DEBUG - Initializing AIService
2025-06-05 18:43:31,573 - AIService - DEBUG - Initializing AIService
2025-06-05 18:43:31,580 - AIService - DEBUG - GenAI client initialized
2025-06-05 18:43:31,580 - AIService - DEBUG - GenAI client initialized
2025-06-05 18:43:42,291 - UserService - DEBUG - Initializing UserService
2025-06-05 18:43:42,292 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 18:43:42,293 - HealthService - DEBUG - Initializing HealthService
2025-06-05 18:43:42,293 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 18:43:42,294 - UserService - DEBUG - Initializing UserService
2025-06-05 18:43:42,294 - UserService - DEBUG - Initializing UserService
2025-06-05 18:43:42,294 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 18:43:42,294 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 18:43:42,294 - AIService - DEBUG - Initializing AIService
2025-06-05 18:43:42,348 - AIService - DEBUG - GenAI client initialized
2025-06-05 18:43:42,356 - AIService - DEBUG - Initializing AIService
2025-06-05 18:43:42,356 - AIService - DEBUG - Initializing AIService
2025-06-05 18:43:42,364 - AIService - DEBUG - GenAI client initialized
2025-06-05 18:43:42,364 - AIService - DEBUG - GenAI client initialized
2025-06-05 18:44:01,081 - UserService - DEBUG - Getting user data for user_id: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
2025-06-05 18:44:01,081 - UserService - DEBUG - Getting user data for user_id: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
2025-06-05 18:44:02,410 - UserService - DEBUG - User data retrieved successfully: {'age': 30, 'hba1c': 5.7, 'smoking_history': 'never', 'heart_disease': 'No', 'ethnicity': 'Asian', 'sex': 'Male', 'race': 'Asian', 'blood_glucose': 95, 'goal': 'Lose Weight', 'hypertension': 'No', 'height': 175, 'activity_level': 'Moderately Active', 'last_login': DatetimeWithNanoseconds(2025, 6, 5, 15, 40, 1, 559000, tzinfo=datetime.timezone.utc), 'last_metrics': {'bmi_class': 'normal weight', 'bmr': 1762.652, 'macros': {'protein': 204.90829499999998, 'carbs': 307.3624425, 'fat': 75.89196111111112}, 'bmi': 24.489795918367346, 'tdee': 2732.1106, 'calculated_at': DatetimeWithNanoseconds(2025, 6, 4, 18, 0, 54, 885000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'location': 'California', 'weight': 75}
2025-06-05 18:44:02,410 - UserService - DEBUG - User data retrieved successfully: {'age': 30, 'hba1c': 5.7, 'smoking_history': 'never', 'heart_disease': 'No', 'ethnicity': 'Asian', 'sex': 'Male', 'race': 'Asian', 'blood_glucose': 95, 'goal': 'Lose Weight', 'hypertension': 'No', 'height': 175, 'activity_level': 'Moderately Active', 'last_login': DatetimeWithNanoseconds(2025, 6, 5, 15, 40, 1, 559000, tzinfo=datetime.timezone.utc), 'last_metrics': {'bmi_class': 'normal weight', 'bmr': 1762.652, 'macros': {'protein': 204.90829499999998, 'carbs': 307.3624425, 'fat': 75.89196111111112}, 'bmi': 24.489795918367346, 'tdee': 2732.1106, 'calculated_at': DatetimeWithNanoseconds(2025, 6, 4, 18, 0, 54, 885000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'location': 'California', 'weight': 75}
2025-06-05 18:44:02,410 - HealthService - DEBUG - Calculating BMI for person info: {'age': 30, 'hba1c': 5.7, 'smoking_history': 'never', 'heart_disease': 'No', 'ethnicity': 'Asian', 'sex': 'Male', 'race': 'Asian', 'blood_glucose': 95, 'goal': 'Lose Weight', 'hypertension': 'No', 'height': 175, 'activity_level': 'Moderately Active', 'last_login': DatetimeWithNanoseconds(2025, 6, 5, 15, 40, 1, 559000, tzinfo=datetime.timezone.utc), 'last_metrics': {'bmi_class': 'normal weight', 'bmr': 1762.652, 'macros': {'protein': 204.90829499999998, 'carbs': 307.3624425, 'fat': 75.89196111111112}, 'bmi': 24.489795918367346, 'tdee': 2732.1106, 'calculated_at': DatetimeWithNanoseconds(2025, 6, 4, 18, 0, 54, 885000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'location': 'California', 'weight': 75}
2025-06-05 18:44:02,410 - HealthService - DEBUG - BMI calculated: 24.489795918367346, Classification: normal weight
2025-06-05 18:44:02,410 - HealthService - DEBUG - Calculating energy metrics for person info: {'age': 30, 'hba1c': 5.7, 'smoking_history': 'never', 'heart_disease': 'No', 'ethnicity': 'Asian', 'sex': 'Male', 'race': 'Asian', 'blood_glucose': 95, 'goal': 'Lose Weight', 'hypertension': 'No', 'height': 175, 'activity_level': 'Moderately Active', 'last_login': DatetimeWithNanoseconds(2025, 6, 5, 15, 40, 1, 559000, tzinfo=datetime.timezone.utc), 'last_metrics': {'bmi_class': 'normal weight', 'bmr': 1762.652, 'macros': {'protein': 204.90829499999998, 'carbs': 307.3624425, 'fat': 75.89196111111112}, 'bmi': 24.489795918367346, 'tdee': 2732.1106, 'calculated_at': DatetimeWithNanoseconds(2025, 6, 4, 18, 0, 54, 885000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'location': 'California', 'weight': 75}
2025-06-05 18:44:02,410 - HealthService - DEBUG - Energy metrics calculated - BMR: 1762.65, TDEE: 2732.11
2025-06-05 18:44:02,410 - AIService - DEBUG - Generating diet plan for user data: {'age': 30, 'hba1c': 5.7, 'smoking_history': 'never', 'heart_disease': 'No', 'ethnicity': 'Asian', 'sex': 'Male', 'race': 'Asian', 'blood_glucose': 95, 'goal': 'Lose Weight', 'hypertension': 'No', 'height': 175, 'activity_level': 'Moderately Active', 'last_login': DatetimeWithNanoseconds(2025, 6, 5, 15, 40, 1, 559000, tzinfo=datetime.timezone.utc), 'last_metrics': {'bmi_class': 'normal weight', 'bmr': 1762.652, 'macros': {'protein': 204.90829499999998, 'carbs': 307.3624425, 'fat': 75.89196111111112}, 'bmi': 24.489795918367346, 'tdee': 2732.1106, 'calculated_at': DatetimeWithNanoseconds(2025, 6, 4, 18, 0, 54, 885000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'location': 'California', 'weight': 75, 'bmi': 24.489795918367346, 'bmr': 1762.652, 'tdee': 2732.1106}
2025-06-05 18:44:02,410 - AIService - DEBUG - Generating diet plan for user data: {'age': 30, 'hba1c': 5.7, 'smoking_history': 'never', 'heart_disease': 'No', 'ethnicity': 'Asian', 'sex': 'Male', 'race': 'Asian', 'blood_glucose': 95, 'goal': 'Lose Weight', 'hypertension': 'No', 'height': 175, 'activity_level': 'Moderately Active', 'last_login': DatetimeWithNanoseconds(2025, 6, 5, 15, 40, 1, 559000, tzinfo=datetime.timezone.utc), 'last_metrics': {'bmi_class': 'normal weight', 'bmr': 1762.652, 'macros': {'protein': 204.90829499999998, 'carbs': 307.3624425, 'fat': 75.89196111111112}, 'bmi': 24.489795918367346, 'tdee': 2732.1106, 'calculated_at': DatetimeWithNanoseconds(2025, 6, 4, 18, 0, 54, 885000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'location': 'California', 'weight': 75, 'bmi': 24.489795918367346, 'bmr': 1762.652, 'tdee': 2732.1106}
2025-06-05 18:44:02,410 - AIService - DEBUG - Preferences: high protein, low carb
2025-06-05 18:44:02,410 - AIService - DEBUG - Preferences: high protein, low carb
2025-06-05 18:44:02,418 - AIService - DEBUG - Getting response for prompt: Create a diet plan with the preferences: high protein, low carb and vegan: False 
        for a 30yo...
2025-06-05 18:44:02,418 - AIService - DEBUG - Getting response for prompt: Create a diet plan with the preferences: high protein, low carb and vegan: False 
        for a 30yo...
2025-06-05 18:44:02,418 - AIService - DEBUG - Output class: DietPlan
2025-06-05 18:44:02,418 - AIService - DEBUG - Output class: DietPlan
2025-06-05 18:44:05,481 - AIService - DEBUG - Response received: [
  {
    "mealtime": "Breakfast",
    "foodItem": "Omelette with Spinach and Mushrooms",
    "calor...
2025-06-05 18:44:05,481 - AIService - DEBUG - Response received: [
  {
    "mealtime": "Breakfast",
    "foodItem": "Omelette with Spinach and Mushrooms",
    "calor...
2025-06-05 18:44:05,481 - AIService - DEBUG - Diet plan generated successfully
2025-06-05 18:44:05,481 - AIService - DEBUG - Diet plan generated successfully
2025-06-05 18:44:27,319 - UserService - DEBUG - Initializing UserService
2025-06-05 18:44:27,319 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 18:44:27,321 - HealthService - DEBUG - Initializing HealthService
2025-06-05 18:44:27,321 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 18:44:27,322 - UserService - DEBUG - Initializing UserService
2025-06-05 18:44:27,322 - UserService - DEBUG - Initializing UserService
2025-06-05 18:44:27,322 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 18:44:27,322 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 18:44:27,323 - AIService - DEBUG - Initializing AIService
2025-06-05 18:44:27,361 - AIService - DEBUG - GenAI client initialized
2025-06-05 18:44:27,361 - AIService - DEBUG - Initializing AIService
2025-06-05 18:44:27,361 - AIService - DEBUG - Initializing AIService
2025-06-05 18:44:27,371 - AIService - DEBUG - GenAI client initialized
2025-06-05 18:44:27,371 - AIService - DEBUG - GenAI client initialized
2025-06-05 18:50:58,303 - UserService - DEBUG - Creating new user with email: nada.mamdouh@gmail.com
2025-06-05 18:50:58,303 - UserService - DEBUG - Creating new user with email: nada.mamdouh@gmail.com
2025-06-05 18:50:58,303 - UserService - DEBUG - Additional data: {}
2025-06-05 18:50:58,303 - UserService - DEBUG - Additional data: {}
2025-06-05 18:51:00,641 - UserService - DEBUG - User created in Firebase Auth: vW6TM6MKTzVMsm2LbakyjY7YHLk1
2025-06-05 18:51:00,641 - UserService - DEBUG - User created in Firebase Auth: vW6TM6MKTzVMsm2LbakyjY7YHLk1
2025-06-05 18:51:01,693 - UserService - DEBUG - User data saved to Firestore: {'email': 'nada.mamdouh@gmail.com', 'display_name': 'Dew', 'created_at': Sentinel: Value used to set a document field to the server timestamp., 'last_login': Sentinel: Value used to set a document field to the server timestamp.}
2025-06-05 18:51:01,693 - UserService - DEBUG - User data saved to Firestore: {'email': 'nada.mamdouh@gmail.com', 'display_name': 'Dew', 'created_at': Sentinel: Value used to set a document field to the server timestamp., 'last_login': Sentinel: Value used to set a document field to the server timestamp.}
2025-06-05 18:51:01,700 - UserService - DEBUG - Custom token created for new user
2025-06-05 18:51:01,700 - UserService - DEBUG - Custom token created for new user
2025-06-05 18:53:37,549 - UserService - DEBUG - Updating user data for user_id: vW6TM6MKTzVMsm2LbakyjY7YHLk1
2025-06-05 18:53:37,549 - UserService - DEBUG - Updating user data for user_id: vW6TM6MKTzVMsm2LbakyjY7YHLk1
2025-06-05 18:53:37,551 - UserService - DEBUG - Update data: {'activity_level': 'Sedentary', 'age': 20, 'ethnicity': 'Other', 'goal': 'Lose Weight', 'height': 164, 'sex': 'Female', 'vegan': False, 'weight': 75, 'location': 'California', 'race': 'Other', 'hypertension': 'No', 'heart_disease': 'No', 'smoking_history': 'never', 'hba1c': 3, 'blood_glucose': 120}
2025-06-05 18:53:37,551 - UserService - DEBUG - Update data: {'activity_level': 'Sedentary', 'age': 20, 'ethnicity': 'Other', 'goal': 'Lose Weight', 'height': 164, 'sex': 'Female', 'vegan': False, 'weight': 75, 'location': 'California', 'race': 'Other', 'hypertension': 'No', 'heart_disease': 'No', 'smoking_history': 'never', 'hba1c': 3, 'blood_glucose': 120}
2025-06-05 18:53:38,874 - UserService - DEBUG - User data updated successfully. Updated fields: ['activity_level', 'age', 'ethnicity', 'goal', 'height', 'sex', 'vegan', 'weight', 'location', 'race', 'hypertension', 'heart_disease', 'smoking_history', 'hba1c', 'blood_glucose']
2025-06-05 18:53:38,874 - UserService - DEBUG - User data updated successfully. Updated fields: ['activity_level', 'age', 'ethnicity', 'goal', 'height', 'sex', 'vegan', 'weight', 'location', 'race', 'hypertension', 'heart_disease', 'smoking_history', 'hba1c', 'blood_glucose']
2025-06-05 18:57:24,067 - UserService - DEBUG - Initializing UserService
2025-06-05 18:57:24,068 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 18:57:24,070 - HealthService - DEBUG - Initializing HealthService
2025-06-05 18:57:24,070 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 18:57:24,071 - UserService - DEBUG - Initializing UserService
2025-06-05 18:57:24,071 - UserService - DEBUG - Initializing UserService
2025-06-05 18:57:24,071 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 18:57:24,071 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 18:57:24,074 - AIService - DEBUG - Initializing AIService
2025-06-05 18:57:24,134 - AIService - DEBUG - GenAI client initialized
2025-06-05 18:57:24,134 - AIService - DEBUG - Initializing AIService
2025-06-05 18:57:24,134 - AIService - DEBUG - Initializing AIService
2025-06-05 18:57:24,149 - AIService - DEBUG - GenAI client initialized
2025-06-05 18:57:24,149 - AIService - DEBUG - GenAI client initialized
2025-06-05 18:57:27,110 - UserService - DEBUG - Initializing UserService
2025-06-05 18:57:27,110 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 18:57:27,110 - HealthService - DEBUG - Initializing HealthService
2025-06-05 18:57:27,110 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 18:57:27,116 - UserService - DEBUG - Initializing UserService
2025-06-05 18:57:27,116 - UserService - DEBUG - Initializing UserService
2025-06-05 18:57:27,116 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 18:57:27,116 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 18:57:27,116 - AIService - DEBUG - Initializing AIService
2025-06-05 18:57:27,151 - AIService - DEBUG - GenAI client initialized
2025-06-05 18:57:27,151 - AIService - DEBUG - Initializing AIService
2025-06-05 18:57:27,151 - AIService - DEBUG - Initializing AIService
2025-06-05 18:57:27,162 - AIService - DEBUG - GenAI client initialized
2025-06-05 18:57:27,162 - AIService - DEBUG - GenAI client initialized
2025-06-05 18:57:39,428 - UserService - DEBUG - Getting user data for user_id: vW6TM6MKTzVMsm2LbakyjY7YHLk1
2025-06-05 18:57:39,428 - UserService - DEBUG - Getting user data for user_id: vW6TM6MKTzVMsm2LbakyjY7YHLk1
2025-06-05 18:57:40,252 - UserService - DEBUG - User data retrieved successfully: {'created_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'hba1c': 3, 'age': 20, 'smoking_history': 'never', 'heart_disease': 'No', 'ethnicity': 'Other', 'sex': 'Female', 'race': 'Other', 'blood_glucose': 120, 'goal': 'Lose Weight', 'hypertension': 'No', 'activity_level': 'Sedentary', 'height': 164, 'display_name': 'Dew', 'last_login': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'email': 'nada.mamdouh@gmail.com', 'vegan': False, 'location': 'California', 'weight': 75}
2025-06-05 18:57:40,252 - UserService - DEBUG - User data retrieved successfully: {'created_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'hba1c': 3, 'age': 20, 'smoking_history': 'never', 'heart_disease': 'No', 'ethnicity': 'Other', 'sex': 'Female', 'race': 'Other', 'blood_glucose': 120, 'goal': 'Lose Weight', 'hypertension': 'No', 'activity_level': 'Sedentary', 'height': 164, 'display_name': 'Dew', 'last_login': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'email': 'nada.mamdouh@gmail.com', 'vegan': False, 'location': 'California', 'weight': 75}
2025-06-05 18:57:40,252 - HealthService - DEBUG - Calculating BMI for person info: {'created_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'hba1c': 3, 'age': 20, 'smoking_history': 'never', 'heart_disease': 'No', 'ethnicity': 'Other', 'sex': 'Female', 'race': 'Other', 'blood_glucose': 120, 'goal': 'Lose Weight', 'hypertension': 'No', 'activity_level': 'Sedentary', 'height': 164, 'display_name': 'Dew', 'last_login': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'email': 'nada.mamdouh@gmail.com', 'vegan': False, 'location': 'California', 'weight': 75}
2025-06-05 18:57:40,254 - HealthService - DEBUG - BMI calculated: 27.885187388459254, Classification: overweight
2025-06-05 18:57:40,254 - HealthService - DEBUG - Calculating energy metrics for person info: {'created_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'hba1c': 3, 'age': 20, 'smoking_history': 'never', 'heart_disease': 'No', 'ethnicity': 'Other', 'sex': 'Female', 'race': 'Other', 'blood_glucose': 120, 'goal': 'Lose Weight', 'hypertension': 'No', 'activity_level': 'Sedentary', 'height': 164, 'display_name': 'Dew', 'last_login': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'email': 'nada.mamdouh@gmail.com', 'vegan': False, 'location': 'California', 'weight': 75}
2025-06-05 18:57:40,254 - HealthService - DEBUG - Energy metrics calculated - BMR: 1562.92, TDEE: 1875.50
2025-06-05 18:57:40,254 - HealthService - DEBUG - Calculating macros for person info: {'created_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'hba1c': 3, 'age': 20, 'smoking_history': 'never', 'heart_disease': 'No', 'ethnicity': 'Other', 'sex': 'Female', 'race': 'Other', 'blood_glucose': 120, 'goal': 'Lose Weight', 'hypertension': 'No', 'activity_level': 'Sedentary', 'height': 164, 'display_name': 'Dew', 'last_login': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'email': 'nada.mamdouh@gmail.com', 'vegan': False, 'location': 'California', 'weight': 75}, calories: 1875.5016
2025-06-05 18:57:40,254 - HealthService - DEBUG - Macros calculated: {'protein': 140.66262, 'fat': 52.09726666666667, 'carbs': 210.99393}
2025-06-05 18:58:41,976 - UserService - DEBUG - Getting user data for user_id: vW6TM6MKTzVMsm2LbakyjY7YHLk1
2025-06-05 18:58:41,976 - UserService - DEBUG - Getting user data for user_id: vW6TM6MKTzVMsm2LbakyjY7YHLk1
2025-06-05 18:58:43,493 - UserService - DEBUG - User data retrieved successfully: {'created_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'hba1c': 3, 'age': 20, 'smoking_history': 'never', 'heart_disease': 'No', 'ethnicity': 'Other', 'sex': 'Female', 'race': 'Other', 'blood_glucose': 120, 'goal': 'Lose Weight', 'hypertension': 'No', 'activity_level': 'Sedentary', 'height': 164, 'display_name': 'Dew', 'last_metrics': {'bmi_class': 'overweight', 'bmr': 1562.9180000000001, 'macros': {'protein': 140.66262, 'carbs': 210.99393, 'fat': 52.09726666666667}, 'bmi': 27.885187388459254, 'tdee': 1875.5016, 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 57, 40, 6000, tzinfo=datetime.timezone.utc)}, 'last_login': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'email': 'nada.mamdouh@gmail.com', 'vegan': False, 'location': 'California', 'weight': 75}
2025-06-05 18:58:43,493 - UserService - DEBUG - User data retrieved successfully: {'created_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'hba1c': 3, 'age': 20, 'smoking_history': 'never', 'heart_disease': 'No', 'ethnicity': 'Other', 'sex': 'Female', 'race': 'Other', 'blood_glucose': 120, 'goal': 'Lose Weight', 'hypertension': 'No', 'activity_level': 'Sedentary', 'height': 164, 'display_name': 'Dew', 'last_metrics': {'bmi_class': 'overweight', 'bmr': 1562.9180000000001, 'macros': {'protein': 140.66262, 'carbs': 210.99393, 'fat': 52.09726666666667}, 'bmi': 27.885187388459254, 'tdee': 1875.5016, 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 57, 40, 6000, tzinfo=datetime.timezone.utc)}, 'last_login': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'email': 'nada.mamdouh@gmail.com', 'vegan': False, 'location': 'California', 'weight': 75}
2025-06-05 18:58:43,495 - HealthService - DEBUG - Checking diabetes risk for user data: {'created_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'hba1c': 3, 'age': 20, 'smoking_history': 'never', 'heart_disease': 'No', 'ethnicity': 'Other', 'sex': 'Female', 'race': 'Other', 'blood_glucose': 120, 'goal': 'Lose Weight', 'hypertension': 'No', 'activity_level': 'Sedentary', 'height': 164, 'display_name': 'Dew', 'last_metrics': {'bmi_class': 'overweight', 'bmr': 1562.9180000000001, 'macros': {'protein': 140.66262, 'carbs': 210.99393, 'fat': 52.09726666666667}, 'bmi': 27.885187388459254, 'tdee': 1875.5016, 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 57, 40, 6000, tzinfo=datetime.timezone.utc)}, 'last_login': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'email': 'nada.mamdouh@gmail.com', 'vegan': False, 'location': 'California', 'weight': 75}
2025-06-05 18:58:43,496 - HealthService - DEBUG - Prepared input data for diabetes prediction: {'year': [2022], 'gender': [0], 'age': [20], 'location': [4], 'africanamerican': [0], 'asian': [0], 'caucasian': [0], 'hispanic': [0], 'other': [1], 'hypertension': [0], 'heart_disease': [0], 'smoking_history': [4], 'bmi': [27.885187388459254], 'hbA1c_level': [3], 'blood_glucose_level': [120]}
2025-06-05 18:58:43,594 - HealthService - DEBUG - Diabetes risk prediction: {'prediction': 'no', 'prediction_code': 0}
2025-06-05 18:59:40,263 - UserService - DEBUG - Getting user data for user_id: vW6TM6MKTzVMsm2LbakyjY7YHLk1
2025-06-05 18:59:40,263 - UserService - DEBUG - Getting user data for user_id: vW6TM6MKTzVMsm2LbakyjY7YHLk1
2025-06-05 18:59:40,524 - UserService - DEBUG - User data retrieved successfully: {'created_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'hba1c': 3, 'age': 20, 'smoking_history': 'never', 'heart_disease': 'No', 'ethnicity': 'Other', 'sex': 'Female', 'race': 'Other', 'blood_glucose': 120, 'goal': 'Lose Weight', 'hypertension': 'No', 'activity_level': 'Sedentary', 'height': 164, 'display_name': 'Dew', 'last_metrics': {'bmi_class': 'overweight', 'bmr': 1562.9180000000001, 'macros': {'protein': 140.66262, 'carbs': 210.99393, 'fat': 52.09726666666667}, 'bmi': 27.885187388459254, 'tdee': 1875.5016, 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 57, 40, 6000, tzinfo=datetime.timezone.utc)}, 'last_login': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'email': 'nada.mamdouh@gmail.com', 'vegan': False, 'location': 'California', 'weight': 75}
2025-06-05 18:59:40,524 - UserService - DEBUG - User data retrieved successfully: {'created_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'hba1c': 3, 'age': 20, 'smoking_history': 'never', 'heart_disease': 'No', 'ethnicity': 'Other', 'sex': 'Female', 'race': 'Other', 'blood_glucose': 120, 'goal': 'Lose Weight', 'hypertension': 'No', 'activity_level': 'Sedentary', 'height': 164, 'display_name': 'Dew', 'last_metrics': {'bmi_class': 'overweight', 'bmr': 1562.9180000000001, 'macros': {'protein': 140.66262, 'carbs': 210.99393, 'fat': 52.09726666666667}, 'bmi': 27.885187388459254, 'tdee': 1875.5016, 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 57, 40, 6000, tzinfo=datetime.timezone.utc)}, 'last_login': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'email': 'nada.mamdouh@gmail.com', 'vegan': False, 'location': 'California', 'weight': 75}
2025-06-05 18:59:40,532 - HealthService - DEBUG - Calculating BMI for person info: {'created_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'hba1c': 3, 'age': 20, 'smoking_history': 'never', 'heart_disease': 'No', 'ethnicity': 'Other', 'sex': 'Female', 'race': 'Other', 'blood_glucose': 120, 'goal': 'Lose Weight', 'hypertension': 'No', 'activity_level': 'Sedentary', 'height': 164, 'display_name': 'Dew', 'last_metrics': {'bmi_class': 'overweight', 'bmr': 1562.9180000000001, 'macros': {'protein': 140.66262, 'carbs': 210.99393, 'fat': 52.09726666666667}, 'bmi': 27.885187388459254, 'tdee': 1875.5016, 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 57, 40, 6000, tzinfo=datetime.timezone.utc)}, 'last_login': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'email': 'nada.mamdouh@gmail.com', 'vegan': False, 'location': 'California', 'weight': 75}
2025-06-05 18:59:40,533 - HealthService - DEBUG - BMI calculated: 27.885187388459254, Classification: overweight
2025-06-05 18:59:40,533 - HealthService - DEBUG - Calculating energy metrics for person info: {'created_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'hba1c': 3, 'age': 20, 'smoking_history': 'never', 'heart_disease': 'No', 'ethnicity': 'Other', 'sex': 'Female', 'race': 'Other', 'blood_glucose': 120, 'goal': 'Lose Weight', 'hypertension': 'No', 'activity_level': 'Sedentary', 'height': 164, 'display_name': 'Dew', 'last_metrics': {'bmi_class': 'overweight', 'bmr': 1562.9180000000001, 'macros': {'protein': 140.66262, 'carbs': 210.99393, 'fat': 52.09726666666667}, 'bmi': 27.885187388459254, 'tdee': 1875.5016, 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 57, 40, 6000, tzinfo=datetime.timezone.utc)}, 'last_login': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'email': 'nada.mamdouh@gmail.com', 'vegan': False, 'location': 'California', 'weight': 75}
2025-06-05 18:59:40,533 - HealthService - DEBUG - Energy metrics calculated - BMR: 1562.92, TDEE: 1875.50
2025-06-05 18:59:40,533 - AIService - DEBUG - Generating diet plan for user data: {'created_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'hba1c': 3, 'age': 20, 'smoking_history': 'never', 'heart_disease': 'No', 'ethnicity': 'Other', 'sex': 'Female', 'race': 'Other', 'blood_glucose': 120, 'goal': 'Lose Weight', 'hypertension': 'No', 'activity_level': 'Sedentary', 'height': 164, 'display_name': 'Dew', 'last_metrics': {'bmi_class': 'overweight', 'bmr': 1562.9180000000001, 'macros': {'protein': 140.66262, 'carbs': 210.99393, 'fat': 52.09726666666667}, 'bmi': 27.885187388459254, 'tdee': 1875.5016, 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 57, 40, 6000, tzinfo=datetime.timezone.utc)}, 'last_login': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'email': 'nada.mamdouh@gmail.com', 'vegan': False, 'location': 'California', 'weight': 75, 'bmi': 27.885187388459254, 'bmr': 1562.9180000000001, 'tdee': 1875.5016}
2025-06-05 18:59:40,533 - AIService - DEBUG - Generating diet plan for user data: {'created_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'hba1c': 3, 'age': 20, 'smoking_history': 'never', 'heart_disease': 'No', 'ethnicity': 'Other', 'sex': 'Female', 'race': 'Other', 'blood_glucose': 120, 'goal': 'Lose Weight', 'hypertension': 'No', 'activity_level': 'Sedentary', 'height': 164, 'display_name': 'Dew', 'last_metrics': {'bmi_class': 'overweight', 'bmr': 1562.9180000000001, 'macros': {'protein': 140.66262, 'carbs': 210.99393, 'fat': 52.09726666666667}, 'bmi': 27.885187388459254, 'tdee': 1875.5016, 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 57, 40, 6000, tzinfo=datetime.timezone.utc)}, 'last_login': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'email': 'nada.mamdouh@gmail.com', 'vegan': False, 'location': 'California', 'weight': 75, 'bmi': 27.885187388459254, 'bmr': 1562.9180000000001, 'tdee': 1875.5016}
2025-06-05 18:59:40,533 - AIService - DEBUG - Preferences: high protein, low carb
2025-06-05 18:59:40,533 - AIService - DEBUG - Preferences: high protein, low carb
2025-06-05 18:59:40,533 - AIService - DEBUG - Getting response for prompt: Create a diet plan with the preferences: high protein, low carb and vegan: False 
        for a 20yo...
2025-06-05 18:59:40,533 - AIService - DEBUG - Getting response for prompt: Create a diet plan with the preferences: high protein, low carb and vegan: False 
        for a 20yo...
2025-06-05 18:59:40,533 - AIService - DEBUG - Output class: DietPlan
2025-06-05 18:59:40,533 - AIService - DEBUG - Output class: DietPlan
2025-06-05 18:59:43,958 - AIService - DEBUG - Response received: [
  {
    "mealtime": "Breakfast",
    "foodItem": "Omelette with spinach and feta cheese",
    "cal...
2025-06-05 18:59:43,958 - AIService - DEBUG - Response received: [
  {
    "mealtime": "Breakfast",
    "foodItem": "Omelette with spinach and feta cheese",
    "cal...
2025-06-05 18:59:43,958 - AIService - DEBUG - Diet plan generated successfully
2025-06-05 18:59:43,958 - AIService - DEBUG - Diet plan generated successfully
2025-06-05 19:00:38,160 - FoodRoutes - DEBUG - Saved uploaded file to temp_OIP.jpg
2025-06-05 19:00:38,160 - FoodRoutes - DEBUG - Initializing Clarifai model
2025-06-05 19:00:38,165 - FoodRoutes - DEBUG - Running food recognition
2025-06-05 19:00:39,268 - FoodRoutes - DEBUG - Food recognized: strawberry (confidence: 0.9959460496902466)
2025-06-05 19:00:39,269 - FoodRoutes - DEBUG - Generating recipe
2025-06-05 19:00:39,269 - AIService - DEBUG - Generating recipe for food: strawberry
2025-06-05 19:00:39,269 - AIService - DEBUG - Generating recipe for food: strawberry
2025-06-05 19:00:39,269 - AIService - DEBUG - Getting response for prompt: Generate a recipe with strawberry.
        Return a Recipe object with recipeName, calories, protein...
2025-06-05 19:00:39,269 - AIService - DEBUG - Getting response for prompt: Generate a recipe with strawberry.
        Return a Recipe object with recipeName, calories, protein...
2025-06-05 19:00:39,274 - AIService - DEBUG - Output class: Recipe
2025-06-05 19:00:39,274 - AIService - DEBUG - Output class: Recipe
2025-06-05 19:00:40,421 - AIService - DEBUG - Response received: [
  {
    "recipeName": "Strawberry Smoothie",
    "calories": 150,
    "protein": 4,
    "fats": 2,...
2025-06-05 19:00:40,421 - AIService - DEBUG - Response received: [
  {
    "recipeName": "Strawberry Smoothie",
    "calories": 150,
    "protein": 4,
    "fats": 2,...
2025-06-05 19:00:40,423 - AIService - DEBUG - Recipe generated successfully
2025-06-05 19:00:40,423 - AIService - DEBUG - Recipe generated successfully
2025-06-05 19:00:40,423 - FoodRoutes - DEBUG - Saving recipe query to Firestore
2025-06-05 19:00:40,673 - FoodRoutes - DEBUG - Removed temporary file: temp_OIP.jpg
2025-06-05 19:02:12,062 - UserService - DEBUG - Getting user data for user_id: vW6TM6MKTzVMsm2LbakyjY7YHLk1
2025-06-05 19:02:12,062 - UserService - DEBUG - Getting user data for user_id: vW6TM6MKTzVMsm2LbakyjY7YHLk1
2025-06-05 19:02:13,312 - UserService - DEBUG - User data retrieved successfully: {'created_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'hba1c': 3, 'age': 20, 'smoking_history': 'never', 'heart_disease': 'No', 'ethnicity': 'Other', 'sex': 'Female', 'race': 'Other', 'blood_glucose': 120, 'goal': 'Lose Weight', 'hypertension': 'No', 'activity_level': 'Sedentary', 'height': 164, 'display_name': 'Dew', 'last_metrics': {'bmi_class': 'overweight', 'bmr': 1562.9180000000001, 'macros': {'protein': 140.66262, 'carbs': 210.99393, 'fat': 52.09726666666667}, 'bmi': 27.885187388459254, 'tdee': 1875.5016, 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 57, 40, 6000, tzinfo=datetime.timezone.utc)}, 'last_login': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'email': 'nada.mamdouh@gmail.com', 'vegan': False, 'location': 'California', 'weight': 75}
2025-06-05 19:02:13,312 - UserService - DEBUG - User data retrieved successfully: {'created_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'hba1c': 3, 'age': 20, 'smoking_history': 'never', 'heart_disease': 'No', 'ethnicity': 'Other', 'sex': 'Female', 'race': 'Other', 'blood_glucose': 120, 'goal': 'Lose Weight', 'hypertension': 'No', 'activity_level': 'Sedentary', 'height': 164, 'display_name': 'Dew', 'last_metrics': {'bmi_class': 'overweight', 'bmr': 1562.9180000000001, 'macros': {'protein': 140.66262, 'carbs': 210.99393, 'fat': 52.09726666666667}, 'bmi': 27.885187388459254, 'tdee': 1875.5016, 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 57, 40, 6000, tzinfo=datetime.timezone.utc)}, 'last_login': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'email': 'nada.mamdouh@gmail.com', 'vegan': False, 'location': 'California', 'weight': 75}
2025-06-05 19:02:13,312 - HealthService - DEBUG - Calculating BMI for person info: {'created_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'hba1c': 3, 'age': 20, 'smoking_history': 'never', 'heart_disease': 'No', 'ethnicity': 'Other', 'sex': 'Female', 'race': 'Other', 'blood_glucose': 120, 'goal': 'Lose Weight', 'hypertension': 'No', 'activity_level': 'Sedentary', 'height': 164, 'display_name': 'Dew', 'last_metrics': {'bmi_class': 'overweight', 'bmr': 1562.9180000000001, 'macros': {'protein': 140.66262, 'carbs': 210.99393, 'fat': 52.09726666666667}, 'bmi': 27.885187388459254, 'tdee': 1875.5016, 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 57, 40, 6000, tzinfo=datetime.timezone.utc)}, 'last_login': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'email': 'nada.mamdouh@gmail.com', 'vegan': False, 'location': 'California', 'weight': 75}
2025-06-05 19:02:13,312 - HealthService - DEBUG - BMI calculated: 27.885187388459254, Classification: overweight
2025-06-05 19:02:13,312 - HealthService - DEBUG - Calculating energy metrics for person info: {'created_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'hba1c': 3, 'age': 20, 'smoking_history': 'never', 'heart_disease': 'No', 'ethnicity': 'Other', 'sex': 'Female', 'race': 'Other', 'blood_glucose': 120, 'goal': 'Lose Weight', 'hypertension': 'No', 'activity_level': 'Sedentary', 'height': 164, 'display_name': 'Dew', 'last_metrics': {'bmi_class': 'overweight', 'bmr': 1562.9180000000001, 'macros': {'protein': 140.66262, 'carbs': 210.99393, 'fat': 52.09726666666667}, 'bmi': 27.885187388459254, 'tdee': 1875.5016, 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 57, 40, 6000, tzinfo=datetime.timezone.utc)}, 'last_login': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'email': 'nada.mamdouh@gmail.com', 'vegan': False, 'location': 'California', 'weight': 75}
2025-06-05 19:02:13,322 - HealthService - DEBUG - Energy metrics calculated - BMR: 1562.92, TDEE: 1875.50
2025-06-05 19:02:13,322 - AIService - DEBUG - Generating health advice for user data: {'created_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'hba1c': 3, 'age': 20, 'smoking_history': 'never', 'heart_disease': 'No', 'ethnicity': 'Other', 'sex': 'Female', 'race': 'Other', 'blood_glucose': 120, 'goal': 'Lose Weight', 'hypertension': 'No', 'activity_level': 'Sedentary', 'height': 164, 'display_name': 'Dew', 'last_metrics': {'bmi_class': 'overweight', 'bmr': 1562.9180000000001, 'macros': {'protein': 140.66262, 'carbs': 210.99393, 'fat': 52.09726666666667}, 'bmi': 27.885187388459254, 'tdee': 1875.5016, 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 57, 40, 6000, tzinfo=datetime.timezone.utc)}, 'last_login': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'email': 'nada.mamdouh@gmail.com', 'vegan': False, 'location': 'California', 'weight': 75}
2025-06-05 19:02:13,322 - AIService - DEBUG - Generating health advice for user data: {'created_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'hba1c': 3, 'age': 20, 'smoking_history': 'never', 'heart_disease': 'No', 'ethnicity': 'Other', 'sex': 'Female', 'race': 'Other', 'blood_glucose': 120, 'goal': 'Lose Weight', 'hypertension': 'No', 'activity_level': 'Sedentary', 'height': 164, 'display_name': 'Dew', 'last_metrics': {'bmi_class': 'overweight', 'bmr': 1562.9180000000001, 'macros': {'protein': 140.66262, 'carbs': 210.99393, 'fat': 52.09726666666667}, 'bmi': 27.885187388459254, 'tdee': 1875.5016, 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 15, 57, 40, 6000, tzinfo=datetime.timezone.utc)}, 'last_login': DatetimeWithNanoseconds(2025, 6, 5, 15, 51, 0, 995000, tzinfo=datetime.timezone.utc), 'email': 'nada.mamdouh@gmail.com', 'vegan': False, 'location': 'California', 'weight': 75}
2025-06-05 19:02:13,322 - AIService - DEBUG - Metrics: {'bmi': 27.885187388459254, 'bmi_class': 'overweight', 'bmr': 1562.9180000000001, 'tdee': 1875.5016}
2025-06-05 19:02:13,322 - AIService - DEBUG - Metrics: {'bmi': 27.885187388459254, 'bmi_class': 'overweight', 'bmr': 1562.9180000000001, 'tdee': 1875.5016}
2025-06-05 19:02:13,322 - AIService - DEBUG - Getting response for prompt: 
        Provide comprehensive health advice for:
        - 20 year old Female
        - Height: 164...
2025-06-05 19:02:13,322 - AIService - DEBUG - Getting response for prompt: 
        Provide comprehensive health advice for:
        - 20 year old Female
        - Height: 164...
2025-06-05 19:02:13,322 - AIService - DEBUG - Output class: HealthAdvice
2025-06-05 19:02:13,322 - AIService - DEBUG - Output class: HealthAdvice
2025-06-05 19:02:18,706 - AIService - DEBUG - Response received: [
  {
    "general_recommendations": "Given your BMI of 27.89, you are classified as overweight. It'...
2025-06-05 19:02:18,706 - AIService - DEBUG - Response received: [
  {
    "general_recommendations": "Given your BMI of 27.89, you are classified as overweight. It'...
2025-06-05 19:02:18,709 - AIService - DEBUG - Health advice generated successfully
2025-06-05 19:02:18,709 - AIService - DEBUG - Health advice generated successfully
2025-06-05 19:04:13,093 - FoodRoutes - DEBUG - Getting macro breakdown for food item: peanuts
2025-06-05 19:04:13,093 - AIService - DEBUG - Getting macro breakdown for food: peanuts
2025-06-05 19:04:13,093 - AIService - DEBUG - Getting macro breakdown for food: peanuts
2025-06-05 19:04:13,093 - AIService - DEBUG - Getting response for prompt: Return the macro breakdown of peanuts.
        Return a list of MacroBreakdown objects with nutrient...
2025-06-05 19:04:13,093 - AIService - DEBUG - Getting response for prompt: Return the macro breakdown of peanuts.
        Return a list of MacroBreakdown objects with nutrient...
2025-06-05 19:04:13,093 - AIService - DEBUG - Output class: MacroBreakdown
2025-06-05 19:04:13,093 - AIService - DEBUG - Output class: MacroBreakdown
2025-06-05 19:04:14,352 - AIService - DEBUG - Response received: [
  {
    "nutrient": "Protein",
    "amount": "26 g"
  },
  {
    "nutrient": "Fat",
    "amount": ...
2025-06-05 19:04:14,352 - AIService - DEBUG - Response received: [
  {
    "nutrient": "Protein",
    "amount": "26 g"
  },
  {
    "nutrient": "Fat",
    "amount": ...
2025-06-05 19:04:14,357 - AIService - DEBUG - Macro breakdown generated successfully
2025-06-05 19:04:14,357 - AIService - DEBUG - Macro breakdown generated successfully
2025-06-05 19:04:14,357 - FoodRoutes - DEBUG - Saving diet query to Firestore
2025-06-05 19:06:31,727 - UserService - DEBUG - Initializing UserService
2025-06-05 19:06:31,727 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:06:31,728 - HealthService - DEBUG - Initializing HealthService
2025-06-05 19:06:31,728 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 19:06:31,728 - UserService - DEBUG - Initializing UserService
2025-06-05 19:06:31,728 - UserService - DEBUG - Initializing UserService
2025-06-05 19:06:31,728 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:06:31,728 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:06:31,728 - AIService - DEBUG - Initializing AIService
2025-06-05 19:06:31,751 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:06:31,761 - AIService - DEBUG - Initializing AIService
2025-06-05 19:06:31,761 - AIService - DEBUG - Initializing AIService
2025-06-05 19:06:31,768 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:06:31,768 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:07:41,492 - UserService - DEBUG - Initializing UserService
2025-06-05 19:07:41,492 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:07:41,492 - HealthService - DEBUG - Initializing HealthService
2025-06-05 19:07:41,492 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 19:07:41,492 - UserService - DEBUG - Initializing UserService
2025-06-05 19:07:41,492 - UserService - DEBUG - Initializing UserService
2025-06-05 19:07:41,492 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:07:41,492 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:07:41,500 - AIService - DEBUG - Initializing AIService
2025-06-05 19:07:41,535 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:07:41,535 - AIService - DEBUG - Initializing AIService
2025-06-05 19:07:41,535 - AIService - DEBUG - Initializing AIService
2025-06-05 19:07:41,548 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:07:41,548 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:09:43,285 - UserService - DEBUG - Initializing UserService
2025-06-05 19:09:43,289 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:09:43,295 - AIService - DEBUG - Initializing AIService
2025-06-05 19:09:43,856 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:09:43,892 - HealthService - DEBUG - Initializing HealthService
2025-06-05 19:09:43,894 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 19:09:43,899 - UserService - DEBUG - Initializing UserService
2025-06-05 19:09:43,899 - UserService - DEBUG - Initializing UserService
2025-06-05 19:09:43,908 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:09:43,908 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:09:43,919 - AIService - DEBUG - Initializing AIService
2025-06-05 19:09:43,919 - AIService - DEBUG - Initializing AIService
2025-06-05 19:09:44,043 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:09:44,043 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:09:44,049 - AIService - DEBUG - Initializing AIService
2025-06-05 19:09:44,049 - AIService - DEBUG - Initializing AIService
2025-06-05 19:09:44,049 - AIService - DEBUG - Initializing AIService
2025-06-05 19:09:44,144 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:09:44,144 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:09:44,144 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:12:41,612 - UserService - DEBUG - Initializing UserService
2025-06-05 19:12:41,613 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:12:41,614 - AIService - DEBUG - Initializing AIService
2025-06-05 19:12:41,654 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:12:41,654 - HealthService - DEBUG - Initializing HealthService
2025-06-05 19:12:41,654 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 19:12:41,654 - UserService - DEBUG - Initializing UserService
2025-06-05 19:12:41,654 - UserService - DEBUG - Initializing UserService
2025-06-05 19:12:41,654 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:12:41,654 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:12:41,654 - AIService - DEBUG - Initializing AIService
2025-06-05 19:12:41,654 - AIService - DEBUG - Initializing AIService
2025-06-05 19:12:41,671 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:12:41,671 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:12:41,671 - AIService - DEBUG - Initializing AIService
2025-06-05 19:12:41,671 - AIService - DEBUG - Initializing AIService
2025-06-05 19:12:41,671 - AIService - DEBUG - Initializing AIService
2025-06-05 19:12:41,683 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:12:41,683 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:12:41,683 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:14:09,941 - UserService - DEBUG - Initializing UserService
2025-06-05 19:14:09,941 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:14:09,943 - AIService - DEBUG - Initializing AIService
2025-06-05 19:14:09,997 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:14:09,997 - HealthService - DEBUG - Initializing HealthService
2025-06-05 19:14:09,997 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 19:14:09,997 - UserService - DEBUG - Initializing UserService
2025-06-05 19:14:09,997 - UserService - DEBUG - Initializing UserService
2025-06-05 19:14:09,997 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:14:09,997 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:14:09,997 - AIService - DEBUG - Initializing AIService
2025-06-05 19:14:09,997 - AIService - DEBUG - Initializing AIService
2025-06-05 19:14:10,013 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:14:10,013 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:14:10,013 - AIService - DEBUG - Initializing AIService
2025-06-05 19:14:10,013 - AIService - DEBUG - Initializing AIService
2025-06-05 19:14:10,013 - AIService - DEBUG - Initializing AIService
2025-06-05 19:14:10,030 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:14:10,030 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:14:10,030 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:14:48,085 - UserService - DEBUG - Initializing UserService
2025-06-05 19:14:48,085 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:14:48,093 - AIService - DEBUG - Initializing AIService
2025-06-05 19:14:48,132 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:14:48,132 - HealthService - DEBUG - Initializing HealthService
2025-06-05 19:14:48,132 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 19:14:48,132 - UserService - DEBUG - Initializing UserService
2025-06-05 19:14:48,132 - UserService - DEBUG - Initializing UserService
2025-06-05 19:14:48,132 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:14:48,132 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:14:48,132 - AIService - DEBUG - Initializing AIService
2025-06-05 19:14:48,132 - AIService - DEBUG - Initializing AIService
2025-06-05 19:14:48,145 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:14:48,145 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:14:48,145 - AIService - DEBUG - Initializing AIService
2025-06-05 19:14:48,145 - AIService - DEBUG - Initializing AIService
2025-06-05 19:14:48,145 - AIService - DEBUG - Initializing AIService
2025-06-05 19:14:48,158 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:14:48,158 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:14:48,158 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:15:09,902 - UserService - DEBUG - Initializing UserService
2025-06-05 19:15:09,902 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:15:09,907 - AIService - DEBUG - Initializing AIService
2025-06-05 19:15:09,966 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:15:09,967 - HealthService - DEBUG - Initializing HealthService
2025-06-05 19:15:09,967 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 19:15:09,967 - UserService - DEBUG - Initializing UserService
2025-06-05 19:15:09,967 - UserService - DEBUG - Initializing UserService
2025-06-05 19:15:09,967 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:15:09,967 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:15:09,967 - AIService - DEBUG - Initializing AIService
2025-06-05 19:15:09,967 - AIService - DEBUG - Initializing AIService
2025-06-05 19:15:09,984 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:15:09,984 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:15:09,989 - AIService - DEBUG - Initializing AIService
2025-06-05 19:15:09,989 - AIService - DEBUG - Initializing AIService
2025-06-05 19:15:09,989 - AIService - DEBUG - Initializing AIService
2025-06-05 19:15:09,998 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:15:09,998 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:15:09,998 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:17:20,488 - AIService - DEBUG - Starting chat with 3 messages
2025-06-05 19:17:20,488 - AIService - DEBUG - Starting chat with 3 messages
2025-06-05 19:17:20,488 - AIService - DEBUG - Starting chat with 3 messages
2025-06-05 19:17:20,492 - AIService - DEBUG - Temperature: 0.7, Max tokens: None
2025-06-05 19:17:20,492 - AIService - DEBUG - Temperature: 0.7, Max tokens: None
2025-06-05 19:17:20,492 - AIService - DEBUG - Temperature: 0.7, Max tokens: None
2025-06-05 19:17:20,498 - AIService - ERROR - Error in chat: 47 validation errors for _GenerateContentParameters
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.str
  Input should be a valid string [type=string_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.Content
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.list[union[File,Part,is-instance[Image],str]].0.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].0.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[File,Part,is-instance[Image],str]].1.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].1.str
  Input should be a valid string [type=string_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[File,Part,is-instance[Image],str]].2.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].2.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.File
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.Part
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.str
  Input should be a valid string [type=string_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-06-05 19:17:20,498 - AIService - ERROR - Error in chat: 47 validation errors for _GenerateContentParameters
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.str
  Input should be a valid string [type=string_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.Content
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.list[union[File,Part,is-instance[Image],str]].0.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].0.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[File,Part,is-instance[Image],str]].1.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].1.str
  Input should be a valid string [type=string_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[File,Part,is-instance[Image],str]].2.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].2.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.File
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.Part
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.str
  Input should be a valid string [type=string_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-06-05 19:17:20,498 - AIService - ERROR - Error in chat: 47 validation errors for _GenerateContentParameters
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.str
  Input should be a valid string [type=string_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.Content
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.list[union[File,Part,is-instance[Image],str]].0.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].0.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[File,Part,is-instance[Image],str]].1.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].1.str
  Input should be a valid string [type=string_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[File,Part,is-instance[Image],str]].2.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].2.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.File
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.Part
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.str
  Input should be a valid string [type=string_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-06-05 19:17:20,504 - UserRoutes - ERROR - Error in chat: 47 validation errors for _GenerateContentParameters
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.str
  Input should be a valid string [type=string_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.Content
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.list[union[File,Part,is-instance[Image],str]].0.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].0.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[File,Part,is-instance[Image],str]].1.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].1.str
  Input should be a valid string [type=string_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[File,Part,is-instance[Image],str]].2.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].2.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.File
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.Part
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.str
  Input should be a valid string [type=string_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-06-05 19:18:10,653 - UserService - DEBUG - Initializing UserService
2025-06-05 19:18:10,655 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:18:10,656 - AIService - DEBUG - Initializing AIService
2025-06-05 19:18:10,725 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:18:10,725 - HealthService - DEBUG - Initializing HealthService
2025-06-05 19:18:10,725 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 19:18:10,725 - UserService - DEBUG - Initializing UserService
2025-06-05 19:18:10,725 - UserService - DEBUG - Initializing UserService
2025-06-05 19:18:10,725 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:18:10,725 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:18:10,725 - AIService - DEBUG - Initializing AIService
2025-06-05 19:18:10,725 - AIService - DEBUG - Initializing AIService
2025-06-05 19:18:10,751 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:18:10,751 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:18:10,754 - AIService - DEBUG - Initializing AIService
2025-06-05 19:18:10,754 - AIService - DEBUG - Initializing AIService
2025-06-05 19:18:10,754 - AIService - DEBUG - Initializing AIService
2025-06-05 19:18:10,779 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:18:10,779 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:18:10,779 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:21:18,604 - UserService - DEBUG - Initializing UserService
2025-06-05 19:21:18,604 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:21:18,604 - AIService - DEBUG - Initializing AIService
2025-06-05 19:21:18,671 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:21:18,671 - HealthService - DEBUG - Initializing HealthService
2025-06-05 19:21:18,671 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 19:21:18,671 - UserService - DEBUG - Initializing UserService
2025-06-05 19:21:18,671 - UserService - DEBUG - Initializing UserService
2025-06-05 19:21:18,675 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:21:18,675 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:21:18,677 - AIService - DEBUG - Initializing AIService
2025-06-05 19:21:18,677 - AIService - DEBUG - Initializing AIService
2025-06-05 19:21:18,694 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:21:18,694 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:21:18,696 - AIService - DEBUG - Initializing AIService
2025-06-05 19:21:18,696 - AIService - DEBUG - Initializing AIService
2025-06-05 19:21:18,696 - AIService - DEBUG - Initializing AIService
2025-06-05 19:21:18,713 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:21:18,713 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:21:18,713 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:23:12,858 - UserService - DEBUG - Initializing UserService
2025-06-05 19:23:12,858 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:23:12,858 - AIService - DEBUG - Initializing AIService
2025-06-05 19:23:12,919 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:23:12,925 - HealthService - DEBUG - Initializing HealthService
2025-06-05 19:23:12,925 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 19:23:12,925 - UserService - DEBUG - Initializing UserService
2025-06-05 19:23:12,925 - UserService - DEBUG - Initializing UserService
2025-06-05 19:23:12,927 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:23:12,927 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:23:12,927 - AIService - DEBUG - Initializing AIService
2025-06-05 19:23:12,927 - AIService - DEBUG - Initializing AIService
2025-06-05 19:23:12,944 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:23:12,944 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:23:12,949 - AIService - DEBUG - Initializing AIService
2025-06-05 19:23:12,949 - AIService - DEBUG - Initializing AIService
2025-06-05 19:23:12,949 - AIService - DEBUG - Initializing AIService
2025-06-05 19:23:12,964 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:23:12,964 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:23:12,964 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:23:29,486 - UserService - DEBUG - Initializing UserService
2025-06-05 19:23:29,486 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:23:29,489 - AIService - DEBUG - Initializing AIService
2025-06-05 19:23:29,528 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:23:29,528 - HealthService - DEBUG - Initializing HealthService
2025-06-05 19:23:29,528 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 19:23:29,536 - UserService - DEBUG - Initializing UserService
2025-06-05 19:23:29,536 - UserService - DEBUG - Initializing UserService
2025-06-05 19:23:29,536 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:23:29,536 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:23:29,539 - AIService - DEBUG - Initializing AIService
2025-06-05 19:23:29,539 - AIService - DEBUG - Initializing AIService
2025-06-05 19:23:29,545 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:23:29,545 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:23:29,552 - AIService - DEBUG - Initializing AIService
2025-06-05 19:23:29,552 - AIService - DEBUG - Initializing AIService
2025-06-05 19:23:29,552 - AIService - DEBUG - Initializing AIService
2025-06-05 19:23:29,560 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:23:29,560 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:23:29,560 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:23:32,453 - UserService - DEBUG - Initializing UserService
2025-06-05 19:23:32,454 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:23:32,455 - AIService - DEBUG - Initializing AIService
2025-06-05 19:23:32,519 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:23:32,519 - HealthService - DEBUG - Initializing HealthService
2025-06-05 19:23:32,519 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 19:23:32,519 - UserService - DEBUG - Initializing UserService
2025-06-05 19:23:32,519 - UserService - DEBUG - Initializing UserService
2025-06-05 19:23:32,526 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:23:32,526 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:23:32,526 - AIService - DEBUG - Initializing AIService
2025-06-05 19:23:32,526 - AIService - DEBUG - Initializing AIService
2025-06-05 19:23:32,542 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:23:32,542 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:23:32,543 - AIService - DEBUG - Initializing AIService
2025-06-05 19:23:32,543 - AIService - DEBUG - Initializing AIService
2025-06-05 19:23:32,543 - AIService - DEBUG - Initializing AIService
2025-06-05 19:23:32,559 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:23:32,559 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:23:32,559 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:23:39,692 - AIService - DEBUG - Starting chat with 3 messages
2025-06-05 19:23:39,692 - AIService - DEBUG - Starting chat with 3 messages
2025-06-05 19:23:39,692 - AIService - DEBUG - Starting chat with 3 messages
2025-06-05 19:23:39,694 - AIService - ERROR - Error in chat: 47 validation errors for _GenerateContentParameters
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.str
  Input should be a valid string [type=string_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.Content
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.list[union[File,Part,is-instance[Image],str]].0.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].0.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[File,Part,is-instance[Image],str]].1.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].1.str
  Input should be a valid string [type=string_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[File,Part,is-instance[Image],str]].2.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].2.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.File
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.Part
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.str
  Input should be a valid string [type=string_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-06-05 19:23:39,694 - AIService - ERROR - Error in chat: 47 validation errors for _GenerateContentParameters
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.str
  Input should be a valid string [type=string_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.Content
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.list[union[File,Part,is-instance[Image],str]].0.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].0.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[File,Part,is-instance[Image],str]].1.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].1.str
  Input should be a valid string [type=string_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[File,Part,is-instance[Image],str]].2.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].2.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.File
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.Part
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.str
  Input should be a valid string [type=string_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-06-05 19:23:39,694 - AIService - ERROR - Error in chat: 47 validation errors for _GenerateContentParameters
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.str
  Input should be a valid string [type=string_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.Content
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.list[union[File,Part,is-instance[Image],str]].0.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].0.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[File,Part,is-instance[Image],str]].1.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].1.str
  Input should be a valid string [type=string_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[File,Part,is-instance[Image],str]].2.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].2.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.File
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.Part
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.str
  Input should be a valid string [type=string_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-06-05 19:23:39,700 - UserRoutes - ERROR - Error in chat: 47 validation errors for _GenerateContentParameters
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.str
  Input should be a valid string [type=string_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.Content
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.list[union[File,Part,is-instance[Image],str]].0.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].0.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[File,Part,is-instance[Image],str]].1.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].1.str
  Input should be a valid string [type=string_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[File,Part,is-instance[Image],str]].2.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].2.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.File
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.Part
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.str
  Input should be a valid string [type=string_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-06-05 19:26:32,085 - UserService - DEBUG - Initializing UserService
2025-06-05 19:26:32,085 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:26:32,088 - AIService - DEBUG - Initializing AIService
2025-06-05 19:26:32,130 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:26:32,136 - HealthService - DEBUG - Initializing HealthService
2025-06-05 19:26:32,136 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 19:26:32,138 - UserService - DEBUG - Initializing UserService
2025-06-05 19:26:32,138 - UserService - DEBUG - Initializing UserService
2025-06-05 19:26:32,138 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:26:32,138 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:26:32,138 - AIService - DEBUG - Initializing AIService
2025-06-05 19:26:32,138 - AIService - DEBUG - Initializing AIService
2025-06-05 19:26:32,145 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:26:32,145 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:26:32,149 - AIService - DEBUG - Initializing AIService
2025-06-05 19:26:32,149 - AIService - DEBUG - Initializing AIService
2025-06-05 19:26:32,149 - AIService - DEBUG - Initializing AIService
2025-06-05 19:26:32,161 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:26:32,161 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:26:32,161 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:26:40,675 - AIService - DEBUG - Starting chat with 3 messages
2025-06-05 19:26:40,675 - AIService - DEBUG - Starting chat with 3 messages
2025-06-05 19:26:40,675 - AIService - DEBUG - Starting chat with 3 messages
2025-06-05 19:26:40,675 - UserRoutes - ERROR - Error in chat: 'dict' object has no attribute 'dict'
2025-06-05 19:28:36,732 - UserService - DEBUG - Initializing UserService
2025-06-05 19:28:36,732 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:28:36,732 - AIService - DEBUG - Initializing AIService
2025-06-05 19:28:36,764 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:28:36,764 - HealthService - DEBUG - Initializing HealthService
2025-06-05 19:28:36,768 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 19:28:36,768 - UserService - DEBUG - Initializing UserService
2025-06-05 19:28:36,768 - UserService - DEBUG - Initializing UserService
2025-06-05 19:28:36,768 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:28:36,768 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:28:36,768 - AIService - DEBUG - Initializing AIService
2025-06-05 19:28:36,768 - AIService - DEBUG - Initializing AIService
2025-06-05 19:28:36,773 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:28:36,773 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:28:36,781 - AIService - DEBUG - Initializing AIService
2025-06-05 19:28:36,781 - AIService - DEBUG - Initializing AIService
2025-06-05 19:28:36,781 - AIService - DEBUG - Initializing AIService
2025-06-05 19:28:36,790 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:28:36,790 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:28:36,790 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:28:42,043 - AIService - DEBUG - Starting chat with 3 messages
2025-06-05 19:28:42,043 - AIService - DEBUG - Starting chat with 3 messages
2025-06-05 19:28:42,043 - AIService - DEBUG - Starting chat with 3 messages
2025-06-05 19:28:42,049 - AIService - ERROR - Error in chat: 47 validation errors for _GenerateContentParameters
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.str
  Input should be a valid string [type=string_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.Content
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.list[union[File,Part,is-instance[Image],str]].0.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].0.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[File,Part,is-instance[Image],str]].1.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].1.str
  Input should be a valid string [type=string_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[File,Part,is-instance[Image],str]].2.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].2.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.File
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.Part
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.str
  Input should be a valid string [type=string_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-06-05 19:28:42,049 - AIService - ERROR - Error in chat: 47 validation errors for _GenerateContentParameters
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.str
  Input should be a valid string [type=string_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.Content
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.list[union[File,Part,is-instance[Image],str]].0.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].0.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[File,Part,is-instance[Image],str]].1.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].1.str
  Input should be a valid string [type=string_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[File,Part,is-instance[Image],str]].2.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].2.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.File
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.Part
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.str
  Input should be a valid string [type=string_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-06-05 19:28:42,049 - AIService - ERROR - Error in chat: 47 validation errors for _GenerateContentParameters
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.str
  Input should be a valid string [type=string_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.Content
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.list[union[File,Part,is-instance[Image],str]].0.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].0.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[File,Part,is-instance[Image],str]].1.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].1.str
  Input should be a valid string [type=string_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[File,Part,is-instance[Image],str]].2.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].2.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.File
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.Part
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.str
  Input should be a valid string [type=string_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-06-05 19:28:42,054 - UserRoutes - ERROR - Error in chat: 47 validation errors for _GenerateContentParameters
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].0.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].1.str
  Input should be a valid string [type=string_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Content.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.list[union[File,Part,is-instance[Image],str]]
  Input should be a valid list [type=list_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[Content,list[union[File,Part,is-instance[Image],str]],File,Part,is-instance[Image],str]].2.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.Content
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.list[union[File,Part,is-instance[Image],str]].0.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hello', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].0.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].0.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'Hello'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[File,Part,is-instance[Image],str]].1.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='assistant', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='Hi there!', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].1.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].1.str
  Input should be a valid string [type=string_type, input_value={'role': 'assistant', 'content': 'Hi there!'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.list[union[File,Part,is-instance[Image],str]].2.File.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.File.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.Part.role
  Extra inputs are not permitted [type=extra_forbidden, input_value='user', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.Part.content
  Extra inputs are not permitted [type=extra_forbidden, input_value='How are you?', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
contents.list[union[File,Part,is-instance[Image],str]].2.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.list[union[File,Part,is-instance[Image],str]].2.str
  Input should be a valid string [type=string_type, input_value={'role': 'user', 'content': 'How are you?'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
contents.File
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.Part
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_attributes_type
contents.is-instance[Image]
  Input should be an instance of Image [type=is_instance_of, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
contents.str
  Input should be a valid string [type=string_type, input_value=[{'role': 'user', 'conten...ntent': 'How are you?'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-06-05 19:33:49,316 - UserService - DEBUG - Initializing UserService
2025-06-05 19:33:49,316 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:33:49,326 - AIService - DEBUG - Initializing AIService
2025-06-05 19:33:49,354 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:33:49,354 - HealthService - DEBUG - Initializing HealthService
2025-06-05 19:33:49,354 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 19:33:49,359 - UserService - DEBUG - Initializing UserService
2025-06-05 19:33:49,359 - UserService - DEBUG - Initializing UserService
2025-06-05 19:33:49,359 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:33:49,359 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:33:49,361 - AIService - DEBUG - Initializing AIService
2025-06-05 19:33:49,361 - AIService - DEBUG - Initializing AIService
2025-06-05 19:33:49,372 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:33:49,372 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:33:49,373 - AIService - DEBUG - Initializing AIService
2025-06-05 19:33:49,373 - AIService - DEBUG - Initializing AIService
2025-06-05 19:33:49,373 - AIService - DEBUG - Initializing AIService
2025-06-05 19:33:49,384 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:33:49,384 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:33:49,384 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:38:51,726 - UserService - DEBUG - Initializing UserService
2025-06-05 19:38:51,727 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:38:51,728 - AIService - DEBUG - Initializing AIService
2025-06-05 19:38:51,759 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:38:51,767 - HealthService - DEBUG - Initializing HealthService
2025-06-05 19:38:51,767 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 19:38:51,768 - UserService - DEBUG - Initializing UserService
2025-06-05 19:38:51,768 - UserService - DEBUG - Initializing UserService
2025-06-05 19:38:51,768 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:38:51,768 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:38:51,768 - AIService - DEBUG - Initializing AIService
2025-06-05 19:38:51,768 - AIService - DEBUG - Initializing AIService
2025-06-05 19:38:51,776 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:38:51,776 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:38:51,776 - AIService - DEBUG - Initializing AIService
2025-06-05 19:38:51,776 - AIService - DEBUG - Initializing AIService
2025-06-05 19:38:51,776 - AIService - DEBUG - Initializing AIService
2025-06-05 19:38:51,792 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:38:51,792 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:38:51,792 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:39:05,548 - UserService - DEBUG - Initializing UserService
2025-06-05 19:39:05,548 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:39:05,548 - AIService - DEBUG - Initializing AIService
2025-06-05 19:39:05,613 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:39:05,613 - HealthService - DEBUG - Initializing HealthService
2025-06-05 19:39:05,613 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 19:39:05,613 - UserService - DEBUG - Initializing UserService
2025-06-05 19:39:05,613 - UserService - DEBUG - Initializing UserService
2025-06-05 19:39:05,622 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:39:05,622 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:39:05,622 - AIService - DEBUG - Initializing AIService
2025-06-05 19:39:05,622 - AIService - DEBUG - Initializing AIService
2025-06-05 19:39:05,630 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:39:05,630 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:39:05,630 - AIService - DEBUG - Initializing AIService
2025-06-05 19:39:05,630 - AIService - DEBUG - Initializing AIService
2025-06-05 19:39:05,630 - AIService - DEBUG - Initializing AIService
2025-06-05 19:39:05,646 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:39:05,646 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:39:05,646 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:41:25,389 - UserService - DEBUG - Initializing UserService
2025-06-05 19:41:25,389 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:41:25,389 - AIService - DEBUG - Initializing AIService
2025-06-05 19:41:25,472 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:41:25,472 - HealthService - DEBUG - Initializing HealthService
2025-06-05 19:41:25,483 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 19:41:25,483 - UserService - DEBUG - Initializing UserService
2025-06-05 19:41:25,483 - UserService - DEBUG - Initializing UserService
2025-06-05 19:41:25,483 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:41:25,483 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:41:25,483 - AIService - DEBUG - Initializing AIService
2025-06-05 19:41:25,483 - AIService - DEBUG - Initializing AIService
2025-06-05 19:41:25,504 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:41:25,504 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:41:25,506 - AIService - DEBUG - Initializing AIService
2025-06-05 19:41:25,506 - AIService - DEBUG - Initializing AIService
2025-06-05 19:41:25,506 - AIService - DEBUG - Initializing AIService
2025-06-05 19:41:25,521 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:41:25,521 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:41:25,521 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:42:33,024 - UserService - DEBUG - Initializing UserService
2025-06-05 19:42:33,032 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:42:33,032 - AIService - DEBUG - Initializing AIService
2025-06-05 19:42:33,076 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:42:33,083 - HealthService - DEBUG - Initializing HealthService
2025-06-05 19:42:33,083 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 19:42:33,084 - UserService - DEBUG - Initializing UserService
2025-06-05 19:42:33,084 - UserService - DEBUG - Initializing UserService
2025-06-05 19:42:33,085 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:42:33,085 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:42:33,085 - AIService - DEBUG - Initializing AIService
2025-06-05 19:42:33,085 - AIService - DEBUG - Initializing AIService
2025-06-05 19:42:33,092 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:42:33,092 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:42:33,100 - AIService - DEBUG - Initializing AIService
2025-06-05 19:42:33,100 - AIService - DEBUG - Initializing AIService
2025-06-05 19:42:33,100 - AIService - DEBUG - Initializing AIService
2025-06-05 19:42:33,111 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:42:33,111 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:42:33,111 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:43:19,727 - UserService - DEBUG - Initializing UserService
2025-06-05 19:43:19,727 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:43:19,729 - AIService - DEBUG - Initializing AIService
2025-06-05 19:43:19,769 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:43:19,780 - HealthService - DEBUG - Initializing HealthService
2025-06-05 19:43:19,780 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 19:43:19,780 - UserService - DEBUG - Initializing UserService
2025-06-05 19:43:19,780 - UserService - DEBUG - Initializing UserService
2025-06-05 19:43:19,782 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:43:19,782 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:43:19,782 - AIService - DEBUG - Initializing AIService
2025-06-05 19:43:19,782 - AIService - DEBUG - Initializing AIService
2025-06-05 19:43:19,795 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:43:19,795 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:43:19,795 - AIService - DEBUG - Initializing AIService
2025-06-05 19:43:19,795 - AIService - DEBUG - Initializing AIService
2025-06-05 19:43:19,795 - AIService - DEBUG - Initializing AIService
2025-06-05 19:43:19,811 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:43:19,811 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:43:19,811 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:43:55,101 - UserService - DEBUG - Initializing UserService
2025-06-05 19:43:55,101 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:43:55,101 - AIService - DEBUG - Initializing AIService
2025-06-05 19:43:55,186 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:43:55,186 - HealthService - DEBUG - Initializing HealthService
2025-06-05 19:43:55,186 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 19:43:55,186 - UserService - DEBUG - Initializing UserService
2025-06-05 19:43:55,186 - UserService - DEBUG - Initializing UserService
2025-06-05 19:43:55,186 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:43:55,186 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:43:55,195 - AIService - DEBUG - Initializing AIService
2025-06-05 19:43:55,195 - AIService - DEBUG - Initializing AIService
2025-06-05 19:43:55,212 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:43:55,212 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:43:55,212 - AIService - DEBUG - Initializing AIService
2025-06-05 19:43:55,212 - AIService - DEBUG - Initializing AIService
2025-06-05 19:43:55,212 - AIService - DEBUG - Initializing AIService
2025-06-05 19:43:55,241 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:43:55,241 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:43:55,241 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:44:02,134 - UserService - DEBUG - Initializing UserService
2025-06-05 19:44:02,134 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:44:02,150 - AIService - DEBUG - Initializing AIService
2025-06-05 19:44:02,218 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:44:02,218 - HealthService - DEBUG - Initializing HealthService
2025-06-05 19:44:02,218 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 19:44:02,222 - UserService - DEBUG - Initializing UserService
2025-06-05 19:44:02,222 - UserService - DEBUG - Initializing UserService
2025-06-05 19:44:02,222 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:44:02,222 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:44:02,222 - AIService - DEBUG - Initializing AIService
2025-06-05 19:44:02,222 - AIService - DEBUG - Initializing AIService
2025-06-05 19:44:02,241 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:44:02,241 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:44:02,243 - AIService - DEBUG - Initializing AIService
2025-06-05 19:44:02,243 - AIService - DEBUG - Initializing AIService
2025-06-05 19:44:02,243 - AIService - DEBUG - Initializing AIService
2025-06-05 19:44:02,262 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:44:02,262 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:44:02,262 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:47:02,606 - UserService - DEBUG - Initializing UserService
2025-06-05 19:47:02,608 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:47:02,614 - AIService - DEBUG - Initializing AIService
2025-06-05 19:47:02,747 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:47:02,749 - HealthService - DEBUG - Initializing HealthService
2025-06-05 19:47:02,749 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 19:47:02,749 - UserService - DEBUG - Initializing UserService
2025-06-05 19:47:02,749 - UserService - DEBUG - Initializing UserService
2025-06-05 19:47:02,752 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:47:02,752 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:47:02,754 - AIService - DEBUG - Initializing AIService
2025-06-05 19:47:02,754 - AIService - DEBUG - Initializing AIService
2025-06-05 19:47:02,770 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:47:02,770 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:47:02,772 - AIService - DEBUG - Initializing AIService
2025-06-05 19:47:02,772 - AIService - DEBUG - Initializing AIService
2025-06-05 19:47:02,772 - AIService - DEBUG - Initializing AIService
2025-06-05 19:47:02,791 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:47:02,791 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:47:02,791 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:48:04,689 - UserService - DEBUG - Initializing UserService
2025-06-05 19:48:04,689 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:48:04,691 - AIService - DEBUG - Initializing AIService
2025-06-05 19:48:04,720 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:48:04,720 - HealthService - DEBUG - Initializing HealthService
2025-06-05 19:48:04,720 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 19:48:04,720 - UserService - DEBUG - Initializing UserService
2025-06-05 19:48:04,720 - UserService - DEBUG - Initializing UserService
2025-06-05 19:48:04,720 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:48:04,720 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:48:04,720 - AIService - DEBUG - Initializing AIService
2025-06-05 19:48:04,720 - AIService - DEBUG - Initializing AIService
2025-06-05 19:48:04,733 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:48:04,733 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:48:04,734 - AIService - DEBUG - Initializing AIService
2025-06-05 19:48:04,734 - AIService - DEBUG - Initializing AIService
2025-06-05 19:48:04,734 - AIService - DEBUG - Initializing AIService
2025-06-05 19:48:04,747 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:48:04,747 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:48:04,747 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:48:12,217 - UserService - DEBUG - Initializing UserService
2025-06-05 19:48:12,219 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:48:12,220 - AIService - DEBUG - Initializing AIService
2025-06-05 19:48:12,269 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:48:12,270 - HealthService - DEBUG - Initializing HealthService
2025-06-05 19:48:12,271 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 19:48:12,271 - UserService - DEBUG - Initializing UserService
2025-06-05 19:48:12,271 - UserService - DEBUG - Initializing UserService
2025-06-05 19:48:12,272 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:48:12,272 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:48:12,274 - AIService - DEBUG - Initializing AIService
2025-06-05 19:48:12,274 - AIService - DEBUG - Initializing AIService
2025-06-05 19:48:12,286 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:48:12,286 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:48:12,287 - AIService - DEBUG - Initializing AIService
2025-06-05 19:48:12,287 - AIService - DEBUG - Initializing AIService
2025-06-05 19:48:12,287 - AIService - DEBUG - Initializing AIService
2025-06-05 19:48:12,289 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:48:12,289 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:48:12,289 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:49:41,920 - UserService - DEBUG - Initializing UserService
2025-06-05 19:49:41,921 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:49:41,922 - AIService - DEBUG - Initializing AIService
2025-06-05 19:49:41,960 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:49:41,961 - HealthService - DEBUG - Initializing HealthService
2025-06-05 19:49:41,962 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 19:49:41,962 - UserService - DEBUG - Initializing UserService
2025-06-05 19:49:41,962 - UserService - DEBUG - Initializing UserService
2025-06-05 19:49:41,962 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:49:41,962 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 19:49:41,963 - AIService - DEBUG - Initializing AIService
2025-06-05 19:49:41,963 - AIService - DEBUG - Initializing AIService
2025-06-05 19:49:41,973 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:49:41,973 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:49:41,975 - AIService - DEBUG - Initializing AIService
2025-06-05 19:49:41,975 - AIService - DEBUG - Initializing AIService
2025-06-05 19:49:41,975 - AIService - DEBUG - Initializing AIService
2025-06-05 19:49:41,987 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:49:41,987 - AIService - DEBUG - GenAI client initialized
2025-06-05 19:49:41,987 - AIService - DEBUG - GenAI client initialized
2025-06-05 22:10:55,595 - UserService - DEBUG - Processing login for email: test@example.com
2025-06-05 22:10:55,595 - UserService - DEBUG - Processing login for email: test@example.com
2025-06-05 22:10:56,367 - UserService - DEBUG - User found: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
2025-06-05 22:10:56,367 - UserService - DEBUG - User found: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
2025-06-05 22:10:56,375 - UserService - DEBUG - Custom token created for login
2025-06-05 22:10:56,375 - UserService - DEBUG - Custom token created for login
2025-06-05 22:10:57,601 - UserService - DEBUG - Last login timestamp updated
2025-06-05 22:10:57,601 - UserService - DEBUG - Last login timestamp updated
2025-06-05 22:11:18,015 - UserService - ERROR - Error getting chat history: 400 The query requires an index. You can create it here: https://console.firebase.google.com/v1/r/project/glucose-3f1ef/firestore/indexes?create_composite=ClJwcm9qZWN0cy9nbHVjb3NlLTNmMWVmL2RhdGFiYXNlcy8oZGVmYXVsdCkvY29sbGVjdGlvbkdyb3Vwcy9jaGF0X2hpc3RvcnkvaW5kZXhlcy9fEAEaCwoHdXNlcl9pZBABGg0KCXRpbWVzdGFtcBACGgwKCF9fbmFtZV9fEAI
2025-06-05 22:11:18,015 - UserService - ERROR - Error getting chat history: 400 The query requires an index. You can create it here: https://console.firebase.google.com/v1/r/project/glucose-3f1ef/firestore/indexes?create_composite=ClJwcm9qZWN0cy9nbHVjb3NlLTNmMWVmL2RhdGFiYXNlcy8oZGVmYXVsdCkvY29sbGVjdGlvbkdyb3Vwcy9jaGF0X2hpc3RvcnkvaW5kZXhlcy9fEAEaCwoHdXNlcl9pZBABGg0KCXRpbWVzdGFtcBACGgwKCF9fbmFtZV9fEAI
2025-06-05 22:11:18,015 - UserRoutes - ERROR - Error in chat: 400 The query requires an index. You can create it here: https://console.firebase.google.com/v1/r/project/glucose-3f1ef/firestore/indexes?create_composite=ClJwcm9qZWN0cy9nbHVjb3NlLTNmMWVmL2RhdGFiYXNlcy8oZGVmYXVsdCkvY29sbGVjdGlvbkdyb3Vwcy9jaGF0X2hpc3RvcnkvaW5kZXhlcy9fEAEaCwoHdXNlcl9pZBABGg0KCXRpbWVzdGFtcBACGgwKCF9fbmFtZV9fEAI
2025-06-05 22:13:50,746 - UserService - DEBUG - Initializing UserService
2025-06-05 22:13:50,749 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 22:13:50,750 - AIService - DEBUG - Initializing AIService
2025-06-05 22:13:50,834 - AIService - DEBUG - GenAI client initialized
2025-06-05 22:13:50,836 - HealthService - DEBUG - Initializing HealthService
2025-06-05 22:13:50,836 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 22:13:50,836 - UserService - DEBUG - Initializing UserService
2025-06-05 22:13:50,836 - UserService - DEBUG - Initializing UserService
2025-06-05 22:13:50,836 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 22:13:50,836 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 22:13:50,838 - AIService - DEBUG - Initializing AIService
2025-06-05 22:13:50,838 - AIService - DEBUG - Initializing AIService
2025-06-05 22:13:50,853 - AIService - DEBUG - GenAI client initialized
2025-06-05 22:13:50,853 - AIService - DEBUG - GenAI client initialized
2025-06-05 22:13:50,856 - AIService - DEBUG - Initializing AIService
2025-06-05 22:13:50,856 - AIService - DEBUG - Initializing AIService
2025-06-05 22:13:50,856 - AIService - DEBUG - Initializing AIService
2025-06-05 22:13:50,876 - AIService - DEBUG - GenAI client initialized
2025-06-05 22:13:50,876 - AIService - DEBUG - GenAI client initialized
2025-06-05 22:13:50,876 - AIService - DEBUG - GenAI client initialized
2025-06-05 22:14:02,689 - UserRoutes - ERROR - Error in chat: AIService.chat() missing 1 required positional argument: 'newMessage'
2025-06-05 22:15:59,696 - UserService - DEBUG - Initializing UserService
2025-06-05 22:15:59,696 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 22:15:59,698 - AIService - DEBUG - Initializing AIService
2025-06-05 22:15:59,752 - AIService - DEBUG - GenAI client initialized
2025-06-05 22:15:59,756 - HealthService - DEBUG - Initializing HealthService
2025-06-05 22:15:59,756 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 22:15:59,756 - UserService - DEBUG - Initializing UserService
2025-06-05 22:15:59,756 - UserService - DEBUG - Initializing UserService
2025-06-05 22:15:59,756 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 22:15:59,756 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 22:15:59,756 - AIService - DEBUG - Initializing AIService
2025-06-05 22:15:59,756 - AIService - DEBUG - Initializing AIService
2025-06-05 22:15:59,773 - AIService - DEBUG - GenAI client initialized
2025-06-05 22:15:59,773 - AIService - DEBUG - GenAI client initialized
2025-06-05 22:15:59,775 - AIService - DEBUG - Initializing AIService
2025-06-05 22:15:59,775 - AIService - DEBUG - Initializing AIService
2025-06-05 22:15:59,775 - AIService - DEBUG - Initializing AIService
2025-06-05 22:15:59,841 - AIService - DEBUG - GenAI client initialized
2025-06-05 22:15:59,841 - AIService - DEBUG - GenAI client initialized
2025-06-05 22:15:59,841 - AIService - DEBUG - GenAI client initialized
2025-06-05 22:16:03,201 - UserService - DEBUG - Initializing UserService
2025-06-05 22:16:03,201 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 22:16:03,210 - AIService - DEBUG - Initializing AIService
2025-06-05 22:16:03,255 - AIService - DEBUG - GenAI client initialized
2025-06-05 22:16:03,255 - HealthService - DEBUG - Initializing HealthService
2025-06-05 22:16:03,255 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 22:16:03,255 - UserService - DEBUG - Initializing UserService
2025-06-05 22:16:03,255 - UserService - DEBUG - Initializing UserService
2025-06-05 22:16:03,255 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 22:16:03,255 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 22:16:03,255 - AIService - DEBUG - Initializing AIService
2025-06-05 22:16:03,255 - AIService - DEBUG - Initializing AIService
2025-06-05 22:16:03,271 - AIService - DEBUG - GenAI client initialized
2025-06-05 22:16:03,271 - AIService - DEBUG - GenAI client initialized
2025-06-05 22:16:03,271 - AIService - DEBUG - Initializing AIService
2025-06-05 22:16:03,271 - AIService - DEBUG - Initializing AIService
2025-06-05 22:16:03,271 - AIService - DEBUG - Initializing AIService
2025-06-05 22:16:03,291 - AIService - DEBUG - GenAI client initialized
2025-06-05 22:16:03,291 - AIService - DEBUG - GenAI client initialized
2025-06-05 22:16:03,291 - AIService - DEBUG - GenAI client initialized
2025-06-05 22:16:12,570 - AIService - DEBUG - Starting chat with 0 messages
2025-06-05 22:16:12,570 - AIService - DEBUG - Starting chat with 0 messages
2025-06-05 22:16:12,570 - AIService - DEBUG - Starting chat with 0 messages
2025-06-05 22:16:12,579 - AIService - ERROR - Error in chat: 'Models' object has no attribute 'start_chat'
2025-06-05 22:16:12,579 - AIService - ERROR - Error in chat: 'Models' object has no attribute 'start_chat'
2025-06-05 22:16:12,579 - AIService - ERROR - Error in chat: 'Models' object has no attribute 'start_chat'
2025-06-05 22:16:12,579 - UserRoutes - ERROR - Error in chat: 'Models' object has no attribute 'start_chat'
2025-06-05 22:51:53,635 - UserService - DEBUG - Initializing UserService
2025-06-05 22:51:53,637 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 22:51:53,644 - HealthService - DEBUG - Initializing HealthService
2025-06-05 22:51:53,646 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 22:51:53,650 - UserService - DEBUG - Initializing UserService
2025-06-05 22:51:53,650 - UserService - DEBUG - Initializing UserService
2025-06-05 22:51:53,652 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 22:51:53,652 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 22:52:00,265 - UserService - DEBUG - Initializing UserService
2025-06-05 22:52:00,265 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 22:52:00,265 - HealthService - DEBUG - Initializing HealthService
2025-06-05 22:52:00,265 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 22:52:00,265 - UserService - DEBUG - Initializing UserService
2025-06-05 22:52:00,265 - UserService - DEBUG - Initializing UserService
2025-06-05 22:52:00,265 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 22:52:00,265 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 22:52:27,822 - UserService - DEBUG - Initializing UserService
2025-06-05 22:52:27,823 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 22:52:27,828 - HealthService - DEBUG - Initializing HealthService
2025-06-05 22:52:27,829 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 22:52:27,831 - UserService - DEBUG - Initializing UserService
2025-06-05 22:52:27,831 - UserService - DEBUG - Initializing UserService
2025-06-05 22:52:27,833 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 22:52:27,833 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 22:52:34,400 - UserService - DEBUG - Initializing UserService
2025-06-05 22:52:34,400 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 22:52:34,403 - HealthService - DEBUG - Initializing HealthService
2025-06-05 22:52:34,404 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 22:52:34,405 - UserService - DEBUG - Initializing UserService
2025-06-05 22:52:34,405 - UserService - DEBUG - Initializing UserService
2025-06-05 22:52:34,407 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 22:52:34,407 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 22:54:44,247 - AIService - ERROR - Error in chat: "Unable to determine the intended type of the `dict`. For `Content`, a 'parts' key is expected. For `Part`, either an 'inline_data' or a 'text' key is expected. For `Blob`, both 'mime_type' and 'data' keys are expected. However, the provided dictionary has the following keys: ['user_id', 'message', 'timestamp']"
2025-06-05 22:54:44,247 - AIService - ERROR - Error in chat: "Unable to determine the intended type of the `dict`. For `Content`, a 'parts' key is expected. For `Part`, either an 'inline_data' or a 'text' key is expected. For `Blob`, both 'mime_type' and 'data' keys are expected. However, the provided dictionary has the following keys: ['user_id', 'message', 'timestamp']"
2025-06-05 22:54:44,247 - AIService - ERROR - Error in chat: "Unable to determine the intended type of the `dict`. For `Content`, a 'parts' key is expected. For `Part`, either an 'inline_data' or a 'text' key is expected. For `Blob`, both 'mime_type' and 'data' keys are expected. However, the provided dictionary has the following keys: ['user_id', 'message', 'timestamp']"
2025-06-05 22:54:44,249 - UserRoutes - ERROR - Error in chat: "Unable to determine the intended type of the `dict`. For `Content`, a 'parts' key is expected. For `Part`, either an 'inline_data' or a 'text' key is expected. For `Blob`, both 'mime_type' and 'data' keys are expected. However, the provided dictionary has the following keys: ['user_id', 'message', 'timestamp']"
2025-06-05 23:02:13,070 - UserService - DEBUG - Initializing UserService
2025-06-05 23:02:13,070 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 23:02:13,071 - HealthService - DEBUG - Initializing HealthService
2025-06-05 23:02:13,072 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-05 23:02:13,073 - UserService - DEBUG - Initializing UserService
2025-06-05 23:02:13,073 - UserService - DEBUG - Initializing UserService
2025-06-05 23:02:13,073 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-05 23:02:13,073 - UserService - DEBUG - UserService initialized with Firestore database
