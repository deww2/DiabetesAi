2025-06-08 13:57:10,505 - UserService - DEBUG - Initializing UserService
2025-06-08 13:57:10,505 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 13:57:10,723 - HealthService - DEBUG - Initializing HealthService
2025-06-08 13:57:10,723 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-08 13:57:10,725 - UserService - DEBUG - Initializing UserService
2025-06-08 13:57:10,725 - UserService - DEBUG - Initializing UserService
2025-06-08 13:57:10,725 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 13:57:10,725 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 13:57:16,896 - UserService - DEBUG - Initializing UserService
2025-06-08 13:57:16,896 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 13:57:17,049 - HealthService - DEBUG - Initializing HealthService
2025-06-08 13:57:17,049 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-08 13:57:17,051 - UserService - DEBUG - Initializing UserService
2025-06-08 13:57:17,051 - UserService - DEBUG - Initializing UserService
2025-06-08 13:57:17,051 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 13:57:17,051 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 14:05:15,473 - UserService - DEBUG - Updating user data for user_id: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
2025-06-08 14:05:15,473 - UserService - DEBUG - Updating user data for user_id: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
2025-06-08 14:05:15,484 - UserService - DEBUG - Update data: {'age': '24', 'sex': 'Male', 'height': '185', 'weight': '120', 'activity_level': 'Moderately Active', 'goal': 'Lose Weight', 'ethnicity': 'Other', 'vegan': False, 'location': 'California', 'race': 'Other', 'hypertension': 'No', 'heart_disease': 'No', 'smoking_history': 'never', 'hba1c': '5', 'blood_glucose': '95'}
2025-06-08 14:05:15,484 - UserService - DEBUG - Update data: {'age': '24', 'sex': 'Male', 'height': '185', 'weight': '120', 'activity_level': 'Moderately Active', 'goal': 'Lose Weight', 'ethnicity': 'Other', 'vegan': False, 'location': 'California', 'race': 'Other', 'hypertension': 'No', 'heart_disease': 'No', 'smoking_history': 'never', 'hba1c': '5', 'blood_glucose': '95'}
2025-06-08 14:05:17,613 - UserService - DEBUG - Updating user data for user_id: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
2025-06-08 14:05:17,613 - UserService - DEBUG - Updating user data for user_id: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
2025-06-08 14:05:17,623 - UserService - DEBUG - Update data: {'age': '24', 'sex': 'Male', 'height': '185', 'weight': '120', 'activity_level': 'Moderately Active', 'goal': 'Lose Weight', 'ethnicity': 'Other', 'vegan': False, 'location': 'California', 'race': 'Other', 'hypertension': 'No', 'heart_disease': 'No', 'smoking_history': 'never', 'hba1c': '5', 'blood_glucose': '95'}
2025-06-08 14:05:17,623 - UserService - DEBUG - Update data: {'age': '24', 'sex': 'Male', 'height': '185', 'weight': '120', 'activity_level': 'Moderately Active', 'goal': 'Lose Weight', 'ethnicity': 'Other', 'vegan': False, 'location': 'California', 'race': 'Other', 'hypertension': 'No', 'heart_disease': 'No', 'smoking_history': 'never', 'hba1c': '5', 'blood_glucose': '95'}
2025-06-08 14:05:17,758 - UserService - DEBUG - User data updated successfully. Updated fields: ['age', 'sex', 'height', 'weight', 'activity_level', 'goal', 'ethnicity', 'vegan', 'location', 'race', 'hypertension', 'heart_disease', 'smoking_history', 'hba1c', 'blood_glucose']
2025-06-08 14:05:17,758 - UserService - DEBUG - User data updated successfully. Updated fields: ['age', 'sex', 'height', 'weight', 'activity_level', 'goal', 'ethnicity', 'vegan', 'location', 'race', 'hypertension', 'heart_disease', 'smoking_history', 'hba1c', 'blood_glucose']
2025-06-08 14:05:18,213 - UserService - DEBUG - Updating user data for user_id: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
2025-06-08 14:05:18,213 - UserService - DEBUG - Updating user data for user_id: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
2025-06-08 14:05:18,217 - UserService - DEBUG - Update data: {'age': '24', 'sex': 'Male', 'height': '185', 'weight': '120', 'activity_level': 'Moderately Active', 'goal': 'Lose Weight', 'ethnicity': 'Other', 'vegan': False, 'location': 'California', 'race': 'Other', 'hypertension': 'No', 'heart_disease': 'No', 'smoking_history': 'never', 'hba1c': '5', 'blood_glucose': '95'}
2025-06-08 14:05:18,217 - UserService - DEBUG - Update data: {'age': '24', 'sex': 'Male', 'height': '185', 'weight': '120', 'activity_level': 'Moderately Active', 'goal': 'Lose Weight', 'ethnicity': 'Other', 'vegan': False, 'location': 'California', 'race': 'Other', 'hypertension': 'No', 'heart_disease': 'No', 'smoking_history': 'never', 'hba1c': '5', 'blood_glucose': '95'}
2025-06-08 14:05:19,027 - UserService - DEBUG - User data updated successfully. Updated fields: ['age', 'sex', 'height', 'weight', 'activity_level', 'goal', 'ethnicity', 'vegan', 'location', 'race', 'hypertension', 'heart_disease', 'smoking_history', 'hba1c', 'blood_glucose']
2025-06-08 14:05:19,027 - UserService - DEBUG - User data updated successfully. Updated fields: ['age', 'sex', 'height', 'weight', 'activity_level', 'goal', 'ethnicity', 'vegan', 'location', 'race', 'hypertension', 'heart_disease', 'smoking_history', 'hba1c', 'blood_glucose']
2025-06-08 14:05:19,107 - UserService - DEBUG - User data updated successfully. Updated fields: ['age', 'sex', 'height', 'weight', 'activity_level', 'goal', 'ethnicity', 'vegan', 'location', 'race', 'hypertension', 'heart_disease', 'smoking_history', 'hba1c', 'blood_glucose']
2025-06-08 14:05:19,107 - UserService - DEBUG - User data updated successfully. Updated fields: ['age', 'sex', 'height', 'weight', 'activity_level', 'goal', 'ethnicity', 'vegan', 'location', 'race', 'hypertension', 'heart_disease', 'smoking_history', 'hba1c', 'blood_glucose']
2025-06-08 14:07:01,104 - UserService - DEBUG - Updating user data for user_id: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
2025-06-08 14:07:01,104 - UserService - DEBUG - Updating user data for user_id: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
2025-06-08 14:07:01,106 - UserService - DEBUG - Update data: {'age': '23', 'sex': 'Male', 'height': '187', 'weight': '114', 'activity_level': 'Moderately Active', 'goal': 'Lose Weight', 'ethnicity': 'Other', 'vegan': False, 'location': 'California', 'race': 'Other', 'hypertension': 'No', 'heart_disease': 'No', 'smoking_history': 'never', 'hba1c': '5', 'blood_glucose': '95'}
2025-06-08 14:07:01,106 - UserService - DEBUG - Update data: {'age': '23', 'sex': 'Male', 'height': '187', 'weight': '114', 'activity_level': 'Moderately Active', 'goal': 'Lose Weight', 'ethnicity': 'Other', 'vegan': False, 'location': 'California', 'race': 'Other', 'hypertension': 'No', 'heart_disease': 'No', 'smoking_history': 'never', 'hba1c': '5', 'blood_glucose': '95'}
2025-06-08 14:07:02,333 - UserService - DEBUG - User data updated successfully. Updated fields: ['age', 'sex', 'height', 'weight', 'activity_level', 'goal', 'ethnicity', 'vegan', 'location', 'race', 'hypertension', 'heart_disease', 'smoking_history', 'hba1c', 'blood_glucose']
2025-06-08 14:07:02,333 - UserService - DEBUG - User data updated successfully. Updated fields: ['age', 'sex', 'height', 'weight', 'activity_level', 'goal', 'ethnicity', 'vegan', 'location', 'race', 'hypertension', 'heart_disease', 'smoking_history', 'hba1c', 'blood_glucose']
2025-06-08 14:16:10,192 - UserService - DEBUG - Initializing UserService
2025-06-08 14:16:10,215 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 14:16:11,095 - HealthService - DEBUG - Initializing HealthService
2025-06-08 14:16:11,100 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-08 14:16:11,107 - UserService - DEBUG - Initializing UserService
2025-06-08 14:16:11,107 - UserService - DEBUG - Initializing UserService
2025-06-08 14:16:11,128 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 14:16:11,128 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 14:16:40,773 - UserService - DEBUG - Initializing UserService
2025-06-08 14:16:40,775 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 14:16:41,348 - HealthService - DEBUG - Initializing HealthService
2025-06-08 14:16:41,353 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-08 14:16:41,355 - UserService - DEBUG - Initializing UserService
2025-06-08 14:16:41,355 - UserService - DEBUG - Initializing UserService
2025-06-08 14:16:41,364 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 14:16:41,364 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 14:19:00,782 - UserService - DEBUG - Initializing UserService
2025-06-08 14:19:00,809 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 14:19:01,850 - HealthService - DEBUG - Initializing HealthService
2025-06-08 14:19:01,856 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-08 14:19:01,870 - UserService - DEBUG - Initializing UserService
2025-06-08 14:19:01,870 - UserService - DEBUG - Initializing UserService
2025-06-08 14:19:01,880 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 14:19:01,880 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 14:20:28,634 - UserService - DEBUG - Initializing UserService
2025-06-08 14:20:28,636 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 14:20:28,975 - HealthService - DEBUG - Initializing HealthService
2025-06-08 14:20:28,977 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-08 14:20:28,980 - UserService - DEBUG - Initializing UserService
2025-06-08 14:20:28,980 - UserService - DEBUG - Initializing UserService
2025-06-08 14:20:28,980 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 14:20:28,980 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 14:22:21,314 - UserService - DEBUG - Initializing UserService
2025-06-08 14:22:21,317 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 14:22:21,824 - HealthService - DEBUG - Initializing HealthService
2025-06-08 14:22:21,826 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-08 14:22:21,831 - UserService - DEBUG - Initializing UserService
2025-06-08 14:22:21,831 - UserService - DEBUG - Initializing UserService
2025-06-08 14:22:21,835 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 14:22:21,835 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 14:25:31,094 - UserService - DEBUG - Initializing UserService
2025-06-08 14:25:31,094 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 14:25:31,471 - HealthService - DEBUG - Initializing HealthService
2025-06-08 14:25:31,471 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-08 14:25:31,475 - UserService - DEBUG - Initializing UserService
2025-06-08 14:25:31,475 - UserService - DEBUG - Initializing UserService
2025-06-08 14:25:31,478 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 14:25:31,478 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 14:25:48,689 - UserService - DEBUG - Initializing UserService
2025-06-08 14:25:48,693 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 14:25:49,043 - HealthService - DEBUG - Initializing HealthService
2025-06-08 14:25:49,045 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-08 14:25:49,047 - UserService - DEBUG - Initializing UserService
2025-06-08 14:25:49,047 - UserService - DEBUG - Initializing UserService
2025-06-08 14:25:49,049 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 14:25:49,049 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 14:27:16,575 - UserService - DEBUG - Initializing UserService
2025-06-08 14:27:16,575 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 14:27:16,997 - HealthService - DEBUG - Initializing HealthService
2025-06-08 14:27:16,997 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-08 14:27:17,001 - UserService - DEBUG - Initializing UserService
2025-06-08 14:27:17,001 - UserService - DEBUG - Initializing UserService
2025-06-08 14:27:17,003 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 14:27:17,003 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 14:27:45,980 - UserService - DEBUG - Initializing UserService
2025-06-08 14:27:45,984 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 14:27:46,449 - HealthService - DEBUG - Initializing HealthService
2025-06-08 14:27:46,451 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
2025-06-08 14:27:46,455 - UserService - DEBUG - Initializing UserService
2025-06-08 14:27:46,455 - UserService - DEBUG - Initializing UserService
2025-06-08 14:27:46,476 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 14:27:46,476 - UserService - DEBUG - UserService initialized with Firestore database
2025-06-08 14:29:43,544 - UserService - DEBUG - Processing login for email: test@example.com
2025-06-08 14:29:43,544 - UserService - DEBUG - Processing login for email: test@example.com
2025-06-08 14:29:43,981 - UserService - DEBUG - User found: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
2025-06-08 14:29:43,981 - UserService - DEBUG - User found: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
2025-06-08 14:29:43,992 - UserService - DEBUG - Custom token created for login
2025-06-08 14:29:43,992 - UserService - DEBUG - Custom token created for login
2025-06-08 14:29:44,958 - UserService - DEBUG - Last login timestamp updated
2025-06-08 14:29:44,958 - UserService - DEBUG - Last login timestamp updated
2025-06-08 15:36:34,476 - UserService - DEBUG - Getting user data for user_id: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
2025-06-08 15:36:34,476 - UserService - DEBUG - Getting user data for user_id: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
2025-06-08 15:36:34,711 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '187', 'goal': 'Lose Weight', 'smoking_history': 'never', 'sex': 'Male', 'blood_glucose': '95', 'location': 'California', 'heart_disease': 'No', 'last_metrics': {'bmi': 24.489795918367346, 'macros': {'protein': 204.90829499999998, 'fat': 75.89196111111112, 'carbs': 307.3624425}, 'bmr': 1762.652, 'tdee': 2732.1106, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 23, 26, 10, 287000, tzinfo=datetime.timezone.utc)}, 'weight': '114', 'age': '23', 'vegan': False, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': '5', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 11, 29, 40, 945000, tzinfo=datetime.timezone.utc)}
2025-06-08 15:36:34,711 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '187', 'goal': 'Lose Weight', 'smoking_history': 'never', 'sex': 'Male', 'blood_glucose': '95', 'location': 'California', 'heart_disease': 'No', 'last_metrics': {'bmi': 24.489795918367346, 'macros': {'protein': 204.90829499999998, 'fat': 75.89196111111112, 'carbs': 307.3624425}, 'bmr': 1762.652, 'tdee': 2732.1106, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 23, 26, 10, 287000, tzinfo=datetime.timezone.utc)}, 'weight': '114', 'age': '23', 'vegan': False, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': '5', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 11, 29, 40, 945000, tzinfo=datetime.timezone.utc)}
2025-06-08 15:36:34,723 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': '187', 'goal': 'Lose Weight', 'smoking_history': 'never', 'sex': 'Male', 'blood_glucose': '95', 'location': 'California', 'heart_disease': 'No', 'last_metrics': {'bmi': 24.489795918367346, 'macros': {'protein': 204.90829499999998, 'fat': 75.89196111111112, 'carbs': 307.3624425}, 'bmr': 1762.652, 'tdee': 2732.1106, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 23, 26, 10, 287000, tzinfo=datetime.timezone.utc)}, 'weight': '114', 'age': '23', 'vegan': False, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': '5', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 11, 29, 40, 945000, tzinfo=datetime.timezone.utc)}
2025-06-08 15:36:34,723 - HealthService - DEBUG - BMI calculated: 32.60030312562555, Classification: obese
2025-06-08 15:36:34,723 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': '187', 'goal': 'Lose Weight', 'smoking_history': 'never', 'sex': 'Male', 'blood_glucose': '95', 'location': 'California', 'heart_disease': 'No', 'last_metrics': {'bmi': 24.489795918367346, 'macros': {'protein': 204.90829499999998, 'fat': 75.89196111111112, 'carbs': 307.3624425}, 'bmr': 1762.652, 'tdee': 2732.1106, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 23, 26, 10, 287000, tzinfo=datetime.timezone.utc)}, 'weight': '114', 'age': '23', 'vegan': False, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': '5', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 11, 29, 40, 945000, tzinfo=datetime.timezone.utc)}
2025-06-08 15:36:34,723 - HealthService - DEBUG - Energy metrics calculated - BMR: 2382.46, TDEE: 3692.82
2025-06-08 15:36:34,729 - AIService - DEBUG - Generating diet plan for user data: {'ethnicity': 'Other', 'height': '187', 'goal': 'Lose Weight', 'smoking_history': 'never', 'sex': 'Male', 'blood_glucose': '95', 'location': 'California', 'heart_disease': 'No', 'last_metrics': {'bmi': 24.489795918367346, 'macros': {'protein': 204.90829499999998, 'fat': 75.89196111111112, 'carbs': 307.3624425}, 'bmr': 1762.652, 'tdee': 2732.1106, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 23, 26, 10, 287000, tzinfo=datetime.timezone.utc)}, 'weight': '114', 'age': '23', 'vegan': False, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': '5', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 11, 29, 40, 945000, tzinfo=datetime.timezone.utc), 'bmi': 32.60030312562555, 'bmr': 2382.4620000000004, 'tdee': 3692.816100000001}
2025-06-08 15:36:34,729 - AIService - DEBUG - Generating diet plan for user data: {'ethnicity': 'Other', 'height': '187', 'goal': 'Lose Weight', 'smoking_history': 'never', 'sex': 'Male', 'blood_glucose': '95', 'location': 'California', 'heart_disease': 'No', 'last_metrics': {'bmi': 24.489795918367346, 'macros': {'protein': 204.90829499999998, 'fat': 75.89196111111112, 'carbs': 307.3624425}, 'bmr': 1762.652, 'tdee': 2732.1106, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 23, 26, 10, 287000, tzinfo=datetime.timezone.utc)}, 'weight': '114', 'age': '23', 'vegan': False, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': '5', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 11, 29, 40, 945000, tzinfo=datetime.timezone.utc), 'bmi': 32.60030312562555, 'bmr': 2382.4620000000004, 'tdee': 3692.816100000001}
2025-06-08 15:36:34,729 - AIService - DEBUG - Generating diet plan for user data: {'ethnicity': 'Other', 'height': '187', 'goal': 'Lose Weight', 'smoking_history': 'never', 'sex': 'Male', 'blood_glucose': '95', 'location': 'California', 'heart_disease': 'No', 'last_metrics': {'bmi': 24.489795918367346, 'macros': {'protein': 204.90829499999998, 'fat': 75.89196111111112, 'carbs': 307.3624425}, 'bmr': 1762.652, 'tdee': 2732.1106, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 23, 26, 10, 287000, tzinfo=datetime.timezone.utc)}, 'weight': '114', 'age': '23', 'vegan': False, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': '5', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 11, 29, 40, 945000, tzinfo=datetime.timezone.utc), 'bmi': 32.60030312562555, 'bmr': 2382.4620000000004, 'tdee': 3692.816100000001}
2025-06-08 15:36:34,731 - AIService - DEBUG - Preferences: low Carb
2025-06-08 15:36:34,731 - AIService - DEBUG - Preferences: low Carb
2025-06-08 15:36:34,731 - AIService - DEBUG - Preferences: low Carb
2025-06-08 15:36:34,731 - AIService - DEBUG - Getting response for prompt: Create a diet plan with the preferences: low Carb and vegan: False 
        for a 23yo Other Male 
 ...
2025-06-08 15:36:34,731 - AIService - DEBUG - Getting response for prompt: Create a diet plan with the preferences: low Carb and vegan: False 
        for a 23yo Other Male 
 ...
2025-06-08 15:36:34,731 - AIService - DEBUG - Getting response for prompt: Create a diet plan with the preferences: low Carb and vegan: False 
        for a 23yo Other Male 
 ...
2025-06-08 15:36:34,731 - AIService - DEBUG - Output class: DietPlan
2025-06-08 15:36:34,731 - AIService - DEBUG - Output class: DietPlan
2025-06-08 15:36:34,731 - AIService - DEBUG - Output class: DietPlan
2025-06-08 15:36:38,362 - AIService - DEBUG - Response received: [
  {
    "mealtime": "Breakfast",
    "foodItem": "Omelet with spinach and mushrooms",
    "calorie...
2025-06-08 15:36:38,362 - AIService - DEBUG - Response received: [
  {
    "mealtime": "Breakfast",
    "foodItem": "Omelet with spinach and mushrooms",
    "calorie...
2025-06-08 15:36:38,362 - AIService - DEBUG - Response received: [
  {
    "mealtime": "Breakfast",
    "foodItem": "Omelet with spinach and mushrooms",
    "calorie...
2025-06-08 15:36:38,362 - AIService - DEBUG - Diet plan generated successfully
2025-06-08 15:36:38,362 - AIService - DEBUG - Diet plan generated successfully
2025-06-08 15:36:38,362 - AIService - DEBUG - Diet plan generated successfully
2025-06-08 15:39:38,693 - FoodRoutes - ERROR - Error fetching diet history: DocumentSnapshot.get() takes 2 positional arguments but 3 were given
2025-06-08 15:39:47,369 - FoodRoutes - DEBUG - Getting macro breakdown for food item: peanuts
2025-06-08 15:39:47,371 - AIService - DEBUG - Getting macro breakdown for food: peanuts
2025-06-08 15:39:47,371 - AIService - DEBUG - Getting macro breakdown for food: peanuts
2025-06-08 15:39:47,371 - AIService - DEBUG - Getting macro breakdown for food: peanuts
2025-06-08 15:39:47,372 - AIService - DEBUG - Getting response for prompt: Return the macro breakdown of peanuts.
        Return a list of MacroBreakdown objects with nutrient...
2025-06-08 15:39:47,372 - AIService - DEBUG - Getting response for prompt: Return the macro breakdown of peanuts.
        Return a list of MacroBreakdown objects with nutrient...
2025-06-08 15:39:47,372 - AIService - DEBUG - Getting response for prompt: Return the macro breakdown of peanuts.
        Return a list of MacroBreakdown objects with nutrient...
2025-06-08 15:39:47,373 - AIService - DEBUG - Output class: MacroBreakdown
2025-06-08 15:39:47,373 - AIService - DEBUG - Output class: MacroBreakdown
2025-06-08 15:39:47,373 - AIService - DEBUG - Output class: MacroBreakdown
2025-06-08 15:39:48,425 - AIService - DEBUG - Response received: [
  {
    "nutrient": "Protein",
    "amount": "26g"
  },
  {
    "nutrient": "Fat",
    "amount": "...
2025-06-08 15:39:48,425 - AIService - DEBUG - Response received: [
  {
    "nutrient": "Protein",
    "amount": "26g"
  },
  {
    "nutrient": "Fat",
    "amount": "...
2025-06-08 15:39:48,425 - AIService - DEBUG - Response received: [
  {
    "nutrient": "Protein",
    "amount": "26g"
  },
  {
    "nutrient": "Fat",
    "amount": "...
2025-06-08 15:39:48,426 - AIService - DEBUG - Macro breakdown generated successfully
2025-06-08 15:39:48,426 - AIService - DEBUG - Macro breakdown generated successfully
2025-06-08 15:39:48,426 - AIService - DEBUG - Macro breakdown generated successfully
2025-06-08 15:39:48,426 - FoodRoutes - DEBUG - Saving diet query to Firestore
2025-06-08 15:39:49,249 - FoodRoutes - ERROR - Error fetching diet history: DocumentSnapshot.get() takes 2 positional arguments but 3 were given
2025-06-08 15:40:43,366 - FoodRoutes - DEBUG - Getting macro breakdown for food item: almond
2025-06-08 15:40:43,366 - AIService - DEBUG - Getting macro breakdown for food: almond
2025-06-08 15:40:43,366 - AIService - DEBUG - Getting macro breakdown for food: almond
2025-06-08 15:40:43,366 - AIService - DEBUG - Getting macro breakdown for food: almond
2025-06-08 15:40:43,366 - AIService - DEBUG - Getting response for prompt: Return the macro breakdown of almond.
        Return a list of MacroBreakdown objects with nutrient ...
2025-06-08 15:40:43,366 - AIService - DEBUG - Getting response for prompt: Return the macro breakdown of almond.
        Return a list of MacroBreakdown objects with nutrient ...
2025-06-08 15:40:43,366 - AIService - DEBUG - Getting response for prompt: Return the macro breakdown of almond.
        Return a list of MacroBreakdown objects with nutrient ...
2025-06-08 15:40:43,366 - AIService - DEBUG - Output class: MacroBreakdown
2025-06-08 15:40:43,366 - AIService - DEBUG - Output class: MacroBreakdown
2025-06-08 15:40:43,366 - AIService - DEBUG - Output class: MacroBreakdown
2025-06-08 15:40:44,358 - AIService - DEBUG - Response received: [
  {
    "nutrient": "Carbohydrates",
    "amount": "22g"
  },
  {
    "nutrient": "Fat",
    "amou...
2025-06-08 15:40:44,358 - AIService - DEBUG - Response received: [
  {
    "nutrient": "Carbohydrates",
    "amount": "22g"
  },
  {
    "nutrient": "Fat",
    "amou...
2025-06-08 15:40:44,358 - AIService - DEBUG - Response received: [
  {
    "nutrient": "Carbohydrates",
    "amount": "22g"
  },
  {
    "nutrient": "Fat",
    "amou...
2025-06-08 15:40:44,358 - AIService - DEBUG - Macro breakdown generated successfully
2025-06-08 15:40:44,358 - AIService - DEBUG - Macro breakdown generated successfully
2025-06-08 15:40:44,358 - AIService - DEBUG - Macro breakdown generated successfully
2025-06-08 15:40:44,358 - FoodRoutes - DEBUG - Saving diet query to Firestore
2025-06-08 15:40:59,996 - FoodRoutes - DEBUG - Getting macro breakdown for food item: peanut
2025-06-08 15:40:59,996 - AIService - DEBUG - Getting macro breakdown for food: peanut
2025-06-08 15:40:59,996 - AIService - DEBUG - Getting macro breakdown for food: peanut
2025-06-08 15:40:59,996 - AIService - DEBUG - Getting macro breakdown for food: peanut
2025-06-08 15:40:59,998 - AIService - DEBUG - Getting response for prompt: Return the macro breakdown of peanut.
        Return a list of MacroBreakdown objects with nutrient ...
2025-06-08 15:40:59,998 - AIService - DEBUG - Getting response for prompt: Return the macro breakdown of peanut.
        Return a list of MacroBreakdown objects with nutrient ...
2025-06-08 15:40:59,998 - AIService - DEBUG - Getting response for prompt: Return the macro breakdown of peanut.
        Return a list of MacroBreakdown objects with nutrient ...
2025-06-08 15:40:59,998 - AIService - DEBUG - Output class: MacroBreakdown
2025-06-08 15:40:59,998 - AIService - DEBUG - Output class: MacroBreakdown
2025-06-08 15:40:59,998 - AIService - DEBUG - Output class: MacroBreakdown
2025-06-08 15:41:01,126 - AIService - DEBUG - Response received: [
  {
    "nutrient": "Calories",
    "amount": "567 kcal"
  },
  {
    "nutrient": "Protein",
    "...
2025-06-08 15:41:01,126 - AIService - DEBUG - Response received: [
  {
    "nutrient": "Calories",
    "amount": "567 kcal"
  },
  {
    "nutrient": "Protein",
    "...
2025-06-08 15:41:01,126 - AIService - DEBUG - Response received: [
  {
    "nutrient": "Calories",
    "amount": "567 kcal"
  },
  {
    "nutrient": "Protein",
    "...
2025-06-08 15:41:01,141 - AIService - DEBUG - Macro breakdown generated successfully
2025-06-08 15:41:01,141 - AIService - DEBUG - Macro breakdown generated successfully
2025-06-08 15:41:01,141 - AIService - DEBUG - Macro breakdown generated successfully
2025-06-08 15:41:01,141 - FoodRoutes - DEBUG - Saving diet query to Firestore
2025-06-08 15:41:24,441 - FoodRoutes - DEBUG - Getting macro breakdown for food item: rice
2025-06-08 15:41:24,441 - AIService - DEBUG - Getting macro breakdown for food: rice
2025-06-08 15:41:24,441 - AIService - DEBUG - Getting macro breakdown for food: rice
2025-06-08 15:41:24,441 - AIService - DEBUG - Getting macro breakdown for food: rice
2025-06-08 15:41:24,441 - AIService - DEBUG - Getting response for prompt: Return the macro breakdown of rice.
        Return a list of MacroBreakdown objects with nutrient an...
2025-06-08 15:41:24,441 - AIService - DEBUG - Getting response for prompt: Return the macro breakdown of rice.
        Return a list of MacroBreakdown objects with nutrient an...
2025-06-08 15:41:24,441 - AIService - DEBUG - Getting response for prompt: Return the macro breakdown of rice.
        Return a list of MacroBreakdown objects with nutrient an...
2025-06-08 15:41:24,441 - AIService - DEBUG - Output class: MacroBreakdown
2025-06-08 15:41:24,441 - AIService - DEBUG - Output class: MacroBreakdown
2025-06-08 15:41:24,441 - AIService - DEBUG - Output class: MacroBreakdown
2025-06-08 15:41:25,569 - AIService - DEBUG - Response received: [
  {
    "nutrient": "Carbohydrates",
    "amount": "28g"
  },
  {
    "nutrient": "Protein",
    "...
2025-06-08 15:41:25,569 - AIService - DEBUG - Response received: [
  {
    "nutrient": "Carbohydrates",
    "amount": "28g"
  },
  {
    "nutrient": "Protein",
    "...
2025-06-08 15:41:25,569 - AIService - DEBUG - Response received: [
  {
    "nutrient": "Carbohydrates",
    "amount": "28g"
  },
  {
    "nutrient": "Protein",
    "...
2025-06-08 15:41:25,571 - AIService - DEBUG - Macro breakdown generated successfully
2025-06-08 15:41:25,571 - AIService - DEBUG - Macro breakdown generated successfully
2025-06-08 15:41:25,571 - AIService - DEBUG - Macro breakdown generated successfully
2025-06-08 15:41:25,571 - FoodRoutes - DEBUG - Saving diet query to Firestore
2025-06-08 15:42:25,406 - FoodRoutes - DEBUG - Getting macro breakdown for food item: strawberry
2025-06-08 15:42:25,406 - AIService - DEBUG - Getting macro breakdown for food: strawberry
2025-06-08 15:42:25,406 - AIService - DEBUG - Getting macro breakdown for food: strawberry
2025-06-08 15:42:25,406 - AIService - DEBUG - Getting macro breakdown for food: strawberry
2025-06-08 15:42:25,406 - AIService - DEBUG - Getting response for prompt: Return the macro breakdown of strawberry.
        Return a list of MacroBreakdown objects with nutri...
2025-06-08 15:42:25,406 - AIService - DEBUG - Getting response for prompt: Return the macro breakdown of strawberry.
        Return a list of MacroBreakdown objects with nutri...
2025-06-08 15:42:25,406 - AIService - DEBUG - Getting response for prompt: Return the macro breakdown of strawberry.
        Return a list of MacroBreakdown objects with nutri...
2025-06-08 15:42:25,406 - AIService - DEBUG - Output class: MacroBreakdown
2025-06-08 15:42:25,406 - AIService - DEBUG - Output class: MacroBreakdown
2025-06-08 15:42:25,406 - AIService - DEBUG - Output class: MacroBreakdown
2025-06-08 15:42:26,462 - AIService - DEBUG - Response received: [
  {
    "nutrient": "Carbohydrates",
    "amount": "7.68 g"
  },
  {
    "nutrient": "Fat",
    "a...
2025-06-08 15:42:26,462 - AIService - DEBUG - Response received: [
  {
    "nutrient": "Carbohydrates",
    "amount": "7.68 g"
  },
  {
    "nutrient": "Fat",
    "a...
2025-06-08 15:42:26,462 - AIService - DEBUG - Response received: [
  {
    "nutrient": "Carbohydrates",
    "amount": "7.68 g"
  },
  {
    "nutrient": "Fat",
    "a...
2025-06-08 15:42:26,462 - AIService - DEBUG - Macro breakdown generated successfully
2025-06-08 15:42:26,462 - AIService - DEBUG - Macro breakdown generated successfully
2025-06-08 15:42:26,462 - AIService - DEBUG - Macro breakdown generated successfully
2025-06-08 15:42:26,463 - FoodRoutes - DEBUG - Saving diet query to Firestore
2025-06-08T15:55:45.437130 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T15:55:45.439914 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T15:55:45.753695 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T15:55:45.753695 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T15:55:45.753695 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T15:55:45.753695 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T15:55:45.756944 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T15:55:45.756944 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T15:56:00.701548 - app - INFO - Starting application
Extra: {}

2025-06-08T15:56:00.793836 - app - ERROR - Failed to start application
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\app.py", line 61, in <module>
    app = create_app()
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 74, in wrapper
    logger.debug(
  File "C:\Users\kingc\AppData\Local\Programs\Python\Python310\lib\logging\__init__.py", line 1456, in debug
    self._log(DEBUG, msg, args, **kwargs)
  File "C:\Users\kingc\AppData\Local\Programs\Python\Python310\lib\logging\__init__.py", line 1613, in _log
    record = self.makeRecord(self.name, level, fn, lno, msg, args,
  File "C:\Users\kingc\AppData\Local\Programs\Python\Python310\lib\logging\__init__.py", line 1587, in makeRecord
    raise KeyError("Attempt to overwrite %r in LogRecord" % key)
KeyError: "Attempt to overwrite 'args' in LogRecord"

2025-06-08T16:00:11.675794 - app - INFO - Starting application
Extra: {}

2025-06-08T16:00:11.683486 - app - ERROR - Failed to start application
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\app.py", line 61, in <module>
    app = create_app()
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 74, in wrapper
    logger.debug(
  File "C:\Users\kingc\AppData\Local\Programs\Python\Python310\lib\logging\__init__.py", line 1456, in debug
    self._log(DEBUG, msg, args, **kwargs)
  File "C:\Users\kingc\AppData\Local\Programs\Python\Python310\lib\logging\__init__.py", line 1613, in _log
    record = self.makeRecord(self.name, level, fn, lno, msg, args,
  File "C:\Users\kingc\AppData\Local\Programs\Python\Python310\lib\logging\__init__.py", line 1587, in makeRecord
    raise KeyError("Attempt to overwrite %r in LogRecord" % key)
KeyError: "Attempt to overwrite 'args' in LogRecord"

2025-06-08T16:01:09.527109 - app - INFO - Starting application
Extra: {}

2025-06-08T16:01:09.527109 - app - ERROR - Failed to start application
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\app.py", line 61, in <module>
    app = create_app()
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 79, in wrapper
    logger.debug(
  File "C:\Users\kingc\AppData\Local\Programs\Python\Python310\lib\logging\__init__.py", line 1456, in debug
    self._log(DEBUG, msg, args, **kwargs)
  File "C:\Users\kingc\AppData\Local\Programs\Python\Python310\lib\logging\__init__.py", line 1613, in _log
    record = self.makeRecord(self.name, level, fn, lno, msg, args,
  File "C:\Users\kingc\AppData\Local\Programs\Python\Python310\lib\logging\__init__.py", line 1587, in makeRecord
    raise KeyError("Attempt to overwrite %r in LogRecord" % key)
KeyError: "Attempt to overwrite 'module' in LogRecord"

2025-06-08T16:01:57.893620 - app - INFO - Starting application
Extra: {}

2025-06-08T16:01:57.893620 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T16:01:57.893620 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T16:01:57.893620 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T16:01:57.893620 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T16:01:57.992730 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T16:01:57.992730 - app - INFO - Loading ML model
Extra: {}

2025-06-08T16:02:00.469081 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T16:02:00.469822 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T16:02:00.471037 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:02:00.471037 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:02:00.736631 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T16:02:00.736631 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T16:02:00.736631 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T16:02:00.736631 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T16:02:00.736631 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T16:02:00.744172 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:02:00.744172 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:02:00.744172 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:02:00.744172 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:02:00.769386 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T16:02:00.803259 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T16:02:00.803889 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T16:02:00.803889 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T16:02:00.937397 - app - ERROR - Error during app initialization
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\app.py", line 48, in create_app
    app.register_blueprint(user_bp, url_prefix='/api/user')
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\scaffold.py", line 47, in wrapper_func
    return f(self, *args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\app.py", line 595, in register_blueprint
    blueprint.register(self, options)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\blueprints.py", line 335, in register
    deferred(state)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\blueprints.py", line 434, in <lambda>
    lambda s: s.add_url_rule(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\blueprints.py", line 110, in add_url_rule
    self.app.add_url_rule(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\scaffold.py", line 47, in wrapper_func
    return f(self, *args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\app.py", line 657, in add_url_rule
    raise AssertionError(
AssertionError: View function mapping is overwriting an existing endpoint function: user.chat

2025-06-08T16:02:00.941445 - app - ERROR - Error in create_app
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\app.py", line 48, in create_app
    app.register_blueprint(user_bp, url_prefix='/api/user')
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\scaffold.py", line 47, in wrapper_func
    return f(self, *args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\app.py", line 595, in register_blueprint
    blueprint.register(self, options)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\blueprints.py", line 335, in register
    deferred(state)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\blueprints.py", line 434, in <lambda>
    lambda s: s.add_url_rule(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\blueprints.py", line 110, in add_url_rule
    self.app.add_url_rule(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\scaffold.py", line 47, in wrapper_func
    return f(self, *args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\app.py", line 657, in add_url_rule
    raise AssertionError(
AssertionError: View function mapping is overwriting an existing endpoint function: user.chat

2025-06-08T16:02:00.941445 - app - ERROR - Failed to start application
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\app.py", line 61, in <module>
    app = create_app()
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\app.py", line 48, in create_app
    app.register_blueprint(user_bp, url_prefix='/api/user')
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\scaffold.py", line 47, in wrapper_func
    return f(self, *args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\app.py", line 595, in register_blueprint
    blueprint.register(self, options)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\blueprints.py", line 335, in register
    deferred(state)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\blueprints.py", line 434, in <lambda>
    lambda s: s.add_url_rule(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\blueprints.py", line 110, in add_url_rule
    self.app.add_url_rule(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\scaffold.py", line 47, in wrapper_func
    return f(self, *args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\app.py", line 657, in add_url_rule
    raise AssertionError(
AssertionError: View function mapping is overwriting an existing endpoint function: user.chat

2025-06-08T16:04:40.662503 - app - INFO - Starting application
Extra: {}

2025-06-08T16:04:40.662503 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T16:04:40.662503 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T16:04:40.662503 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T16:04:40.662503 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T16:04:40.730865 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T16:04:40.730865 - app - INFO - Loading ML model
Extra: {}

2025-06-08T16:04:41.979639 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T16:04:41.979639 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T16:04:41.979639 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:04:41.979639 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:04:42.071795 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T16:04:42.071795 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T16:04:42.072739 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T16:04:42.072739 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T16:04:42.072739 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T16:04:42.073737 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:04:42.073737 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:04:42.073737 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:04:42.073737 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:04:42.084208 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T16:04:42.098048 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T16:04:42.098048 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T16:04:42.104485 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T16:04:42.108500 - app - ERROR - Error during app initialization
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\app.py", line 48, in create_app
    app.register_blueprint(user_bp, url_prefix='/api/user')
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\scaffold.py", line 47, in wrapper_func
    return f(self, *args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\app.py", line 595, in register_blueprint
    blueprint.register(self, options)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\blueprints.py", line 335, in register
    deferred(state)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\blueprints.py", line 434, in <lambda>
    lambda s: s.add_url_rule(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\blueprints.py", line 110, in add_url_rule
    self.app.add_url_rule(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\scaffold.py", line 47, in wrapper_func
    return f(self, *args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\app.py", line 657, in add_url_rule
    raise AssertionError(
AssertionError: View function mapping is overwriting an existing endpoint function: user.get_chat_history

2025-06-08T16:04:42.111647 - app - ERROR - Error in create_app
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\app.py", line 48, in create_app
    app.register_blueprint(user_bp, url_prefix='/api/user')
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\scaffold.py", line 47, in wrapper_func
    return f(self, *args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\app.py", line 595, in register_blueprint
    blueprint.register(self, options)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\blueprints.py", line 335, in register
    deferred(state)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\blueprints.py", line 434, in <lambda>
    lambda s: s.add_url_rule(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\blueprints.py", line 110, in add_url_rule
    self.app.add_url_rule(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\scaffold.py", line 47, in wrapper_func
    return f(self, *args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\app.py", line 657, in add_url_rule
    raise AssertionError(
AssertionError: View function mapping is overwriting an existing endpoint function: user.get_chat_history

2025-06-08T16:04:42.114185 - app - ERROR - Failed to start application
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\app.py", line 61, in <module>
    app = create_app()
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\app.py", line 48, in create_app
    app.register_blueprint(user_bp, url_prefix='/api/user')
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\scaffold.py", line 47, in wrapper_func
    return f(self, *args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\app.py", line 595, in register_blueprint
    blueprint.register(self, options)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\blueprints.py", line 335, in register
    deferred(state)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\blueprints.py", line 434, in <lambda>
    lambda s: s.add_url_rule(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\blueprints.py", line 110, in add_url_rule
    self.app.add_url_rule(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\scaffold.py", line 47, in wrapper_func
    return f(self, *args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\app.py", line 657, in add_url_rule
    raise AssertionError(
AssertionError: View function mapping is overwriting an existing endpoint function: user.get_chat_history

2025-06-08T16:05:29.391295 - app - INFO - Starting application
Extra: {}

2025-06-08T16:05:29.391295 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T16:05:29.391295 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T16:05:29.391295 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T16:05:29.391295 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T16:05:29.447520 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T16:05:29.447520 - app - INFO - Loading ML model
Extra: {}

2025-06-08T16:05:30.618571 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T16:05:30.618571 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T16:05:30.621045 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:05:30.622026 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:05:30.704348 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T16:05:30.704348 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T16:05:30.705335 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T16:05:30.705335 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T16:05:30.705335 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T16:05:30.706334 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:05:30.706334 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:05:30.707335 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:05:30.707335 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:05:30.716931 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T16:05:30.729233 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T16:05:30.729233 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T16:05:30.729233 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T16:05:30.739413 - app - ERROR - Error during app initialization
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\app.py", line 49, in create_app
    app.register_blueprint(health_bp, url_prefix='/api/health')
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\scaffold.py", line 47, in wrapper_func
    return f(self, *args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\app.py", line 595, in register_blueprint
    blueprint.register(self, options)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\blueprints.py", line 335, in register
    deferred(state)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\blueprints.py", line 434, in <lambda>
    lambda s: s.add_url_rule(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\blueprints.py", line 110, in add_url_rule
    self.app.add_url_rule(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\scaffold.py", line 47, in wrapper_func
    return f(self, *args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\app.py", line 657, in add_url_rule
    raise AssertionError(
AssertionError: View function mapping is overwriting an existing endpoint function: health.calculate_metrics

2025-06-08T16:05:30.740416 - app - ERROR - Error in create_app
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\app.py", line 49, in create_app
    app.register_blueprint(health_bp, url_prefix='/api/health')
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\scaffold.py", line 47, in wrapper_func
    return f(self, *args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\app.py", line 595, in register_blueprint
    blueprint.register(self, options)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\blueprints.py", line 335, in register
    deferred(state)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\blueprints.py", line 434, in <lambda>
    lambda s: s.add_url_rule(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\blueprints.py", line 110, in add_url_rule
    self.app.add_url_rule(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\scaffold.py", line 47, in wrapper_func
    return f(self, *args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\app.py", line 657, in add_url_rule
    raise AssertionError(
AssertionError: View function mapping is overwriting an existing endpoint function: health.calculate_metrics

2025-06-08T16:05:30.741420 - app - ERROR - Failed to start application
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\app.py", line 61, in <module>
    app = create_app()
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\app.py", line 49, in create_app
    app.register_blueprint(health_bp, url_prefix='/api/health')
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\scaffold.py", line 47, in wrapper_func
    return f(self, *args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\app.py", line 595, in register_blueprint
    blueprint.register(self, options)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\blueprints.py", line 335, in register
    deferred(state)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\blueprints.py", line 434, in <lambda>
    lambda s: s.add_url_rule(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\blueprints.py", line 110, in add_url_rule
    self.app.add_url_rule(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\scaffold.py", line 47, in wrapper_func
    return f(self, *args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\flask\sansio\app.py", line 657, in add_url_rule
    raise AssertionError(
AssertionError: View function mapping is overwriting an existing endpoint function: health.calculate_metrics

2025-06-08T16:08:42.825322 - app - INFO - Starting application
Extra: {}

2025-06-08T16:08:42.825322 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T16:08:42.825322 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T16:08:42.841118 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T16:08:42.841118 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T16:08:42.906707 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T16:08:42.906707 - app - INFO - Loading ML model
Extra: {}

2025-06-08T16:08:44.507197 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T16:08:44.507197 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T16:08:44.516480 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:08:44.517448 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:08:44.605885 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T16:08:44.605885 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T16:08:44.606886 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T16:08:44.606886 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T16:08:44.606886 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T16:08:44.607886 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:08:44.607886 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:08:44.608888 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:08:44.608888 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:08:44.609889 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T16:08:44.627412 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T16:08:44.627412 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T16:08:44.627412 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T16:08:44.640694 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T16:08:44.640694 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T16:08:44.641599 - app - INFO - Application created successfully
Extra: {}

2025-06-08T16:08:46.889800 - app - INFO - Starting application
Extra: {}

2025-06-08T16:08:46.889800 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T16:08:46.889800 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T16:08:46.889800 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T16:08:46.889800 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T16:08:46.965781 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T16:08:46.965781 - app - INFO - Loading ML model
Extra: {}

2025-06-08T16:08:48.214898 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T16:08:48.214898 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T16:08:48.214898 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:08:48.214898 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:08:48.315834 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T16:08:48.315834 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T16:08:48.316833 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T16:08:48.316833 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T16:08:48.317832 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T16:08:48.317832 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:08:48.317832 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:08:48.318832 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:08:48.318832 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:08:48.330023 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T16:08:48.345203 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T16:08:48.345203 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T16:08:48.345203 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T16:08:48.358460 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T16:08:48.358460 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T16:08:48.359474 - app - INFO - Application created successfully
Extra: {}

2025-06-08T16:10:26.070245 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T16:10:26.074186 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T16:10:26.343574 - UserRoutes - INFO - User profile retrieved successfully
Extra: {}

2025-06-08T16:10:26.343574 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T16:13:51.581940 - UserService - DEBUG - Processing login for email: test@example.com
Extra: {}

2025-06-08T16:13:51.581940 - UserService - DEBUG - Processing login for email: test@example.com
Extra: {}

2025-06-08T16:13:51.986258 - UserService - DEBUG - User found: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
Extra: {}

2025-06-08T16:13:51.986258 - UserService - DEBUG - User found: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
Extra: {}

2025-06-08T16:13:51.989254 - UserService - DEBUG - Custom token created for login
Extra: {}

2025-06-08T16:13:51.989254 - UserService - DEBUG - Custom token created for login
Extra: {}

2025-06-08T16:13:52.934342 - UserService - DEBUG - Last login timestamp updated
Extra: {}

2025-06-08T16:13:52.934342 - UserService - DEBUG - Last login timestamp updated
Extra: {}

2025-06-08T16:14:27.578116 - food_routes - INFO - API Request: POST http://192.168.1.25:5000/api/food/recipes
Extra: {}

2025-06-08T16:14:27.580117 - food_routes - ERROR - Error generating recipe
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\routes\food_routes.py", line 34, in generate_recipe
    logger.debug('File received', extra={
  File "C:\Users\kingc\AppData\Local\Programs\Python\Python310\lib\logging\__init__.py", line 1456, in debug
    self._log(DEBUG, msg, args, **kwargs)
  File "C:\Users\kingc\AppData\Local\Programs\Python\Python310\lib\logging\__init__.py", line 1613, in _log
    record = self.makeRecord(self.name, level, fn, lno, msg, args,
  File "C:\Users\kingc\AppData\Local\Programs\Python\Python310\lib\logging\__init__.py", line 1587, in makeRecord
    raise KeyError("Attempt to overwrite %r in LogRecord" % key)
KeyError: "Attempt to overwrite 'filename' in LogRecord"

2025-06-08T16:14:27.580117 - food_routes - INFO - API Response: POST http://192.168.1.25:5000/api/food/recipes
Extra: {}

2025-06-08T16:15:14.622023 - app - INFO - Starting application
Extra: {}

2025-06-08T16:15:14.622023 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T16:15:14.622023 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T16:15:14.622023 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T16:15:14.622023 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T16:15:14.685981 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T16:15:14.685981 - app - INFO - Loading ML model
Extra: {}

2025-06-08T16:15:17.978483 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T16:15:17.979240 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T16:15:17.979240 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:15:17.981136 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:15:18.219710 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T16:15:18.219710 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T16:15:18.219710 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T16:15:18.219710 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T16:15:18.219710 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T16:15:18.225687 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:15:18.225687 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:15:18.225687 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:15:18.225687 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:15:18.256805 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T16:15:18.276292 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T16:15:18.288400 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T16:15:18.288400 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T16:15:18.304226 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T16:15:18.304226 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T16:15:18.304226 - app - INFO - Application created successfully
Extra: {}

2025-06-08T16:15:22.404453 - food_routes - INFO - API Request: POST http://192.168.1.25:5000/api/food/recipes
Extra: {}

2025-06-08T16:15:22.404453 - food_routes - DEBUG - File received
Extra: {}

2025-06-08T16:15:22.404453 - food_routes - INFO - Recipe generated successfully
Extra: {}

2025-06-08T16:15:22.404453 - food_routes - INFO - API Response: POST http://192.168.1.25:5000/api/food/recipes
Extra: {}

2025-06-08T16:18:41.634735 - app - INFO - Starting application
Extra: {}

2025-06-08T16:18:41.637801 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T16:18:41.642785 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T16:18:41.656848 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T16:18:41.661846 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T16:18:41.986479 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T16:18:41.988491 - app - INFO - Loading ML model
Extra: {}

2025-06-08T16:18:47.111806 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T16:18:47.111806 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T16:18:47.113845 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:18:47.113845 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:18:47.257318 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T16:18:47.257318 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T16:18:47.257318 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T16:18:47.257318 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T16:18:47.257318 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T16:18:47.257318 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:18:47.257318 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:18:47.257318 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:18:47.257318 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:18:47.279782 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T16:18:47.303238 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T16:18:47.303238 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T16:18:47.304238 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T16:18:47.310251 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T16:18:47.310251 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T16:18:47.311241 - app - INFO - Application created successfully
Extra: {}

2025-06-08T16:19:13.640106 - app - INFO - Starting application
Extra: {}

2025-06-08T16:19:13.642121 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T16:19:13.642121 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T16:19:13.644130 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T16:19:13.644130 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T16:19:13.793457 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T16:19:13.794459 - app - INFO - Loading ML model
Extra: {}

2025-06-08T16:19:17.618067 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T16:19:17.620019 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T16:19:17.624042 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:19:17.624042 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:19:17.839658 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T16:19:17.839658 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T16:19:17.839658 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T16:19:17.839658 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T16:19:17.839658 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T16:19:17.839658 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:19:17.839658 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:19:17.851606 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:19:17.851606 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:19:17.884770 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T16:19:17.914706 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T16:19:17.915664 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T16:19:17.915664 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T16:19:17.942640 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T16:19:17.943634 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T16:19:17.944682 - app - INFO - Application created successfully
Extra: {}

2025-06-08T16:19:28.228280 - app - INFO - Starting application
Extra: {}

2025-06-08T16:19:28.230269 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T16:19:28.232282 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T16:19:28.240389 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T16:19:28.241379 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T16:19:28.591496 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T16:19:28.591496 - app - INFO - Loading ML model
Extra: {}

2025-06-08T16:19:31.233355 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T16:19:31.233355 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T16:19:31.242986 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:19:31.242986 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:19:31.332895 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T16:19:31.333892 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T16:19:31.334906 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T16:19:31.334906 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T16:19:31.334906 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T16:19:31.335886 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:19:31.336887 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:19:31.336887 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:19:31.337914 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:19:31.349887 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T16:19:31.377735 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T16:19:31.377735 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T16:19:31.377735 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T16:19:31.389279 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T16:19:31.390252 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T16:19:31.390252 - app - INFO - Application created successfully
Extra: {}

2025-06-08T16:19:43.715443 - app - INFO - Starting application
Extra: {}

2025-06-08T16:19:43.716496 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T16:19:43.716496 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T16:19:43.718494 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T16:19:43.718494 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T16:19:43.794127 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T16:19:43.795129 - app - INFO - Loading ML model
Extra: {}

2025-06-08T16:19:46.433430 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T16:19:46.433430 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T16:19:46.438121 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:19:46.438121 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:19:46.656107 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T16:19:46.658116 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T16:19:46.658116 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T16:19:46.659878 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T16:19:46.659878 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T16:19:46.662777 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:19:46.662777 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:19:46.663773 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:19:46.663773 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:19:46.686984 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T16:19:46.721807 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T16:19:46.721807 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T16:19:46.721807 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T16:19:46.736739 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T16:19:46.737064 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T16:19:46.738081 - app - INFO - Application created successfully
Extra: {}

2025-06-08T16:20:18.055367 - app - INFO - Starting application
Extra: {}

2025-06-08T16:20:18.055367 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T16:20:18.055367 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T16:20:18.055367 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T16:20:18.055367 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T16:20:18.123594 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T16:20:18.123594 - app - INFO - Loading ML model
Extra: {}

2025-06-08T16:20:19.449223 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T16:20:19.449697 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T16:20:19.450856 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:20:19.451850 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:20:19.548766 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T16:20:19.548766 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T16:20:19.548766 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T16:20:19.548766 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T16:20:19.548766 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T16:20:19.564523 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:20:19.564523 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:20:19.564523 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:20:19.564523 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:20:19.585822 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T16:20:19.603400 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T16:20:19.604483 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T16:20:19.605482 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T16:20:19.613298 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T16:20:19.614246 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T16:20:19.615282 - app - INFO - Application created successfully
Extra: {}

2025-06-08T16:20:31.327110 - app - INFO - Starting application
Extra: {}

2025-06-08T16:20:31.327110 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T16:20:31.327110 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T16:20:31.327110 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T16:20:31.327110 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T16:20:31.388120 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T16:20:31.388120 - app - INFO - Loading ML model
Extra: {}

2025-06-08T16:20:32.528581 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T16:20:32.528581 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T16:20:32.535881 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:20:32.535881 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:20:32.648137 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T16:20:32.648137 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T16:20:32.648137 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T16:20:32.648137 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T16:20:32.648137 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T16:20:32.648137 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:20:32.648137 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:20:32.648137 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:20:32.648137 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:20:32.670825 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T16:20:32.685066 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T16:20:32.686104 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T16:20:32.686104 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T16:20:32.689104 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T16:20:32.689104 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T16:20:32.689104 - app - INFO - Application created successfully
Extra: {}

2025-06-08T16:20:43.422473 - food_routes - INFO - API Request: POST http://192.168.1.25:5000/api/food/recipes
Extra: {}

2025-06-08T16:20:43.422473 - food_routes - DEBUG - File received
Extra: {}

2025-06-08T16:20:43.422473 - food_routes - DEBUG - Saved uploaded file
Extra: {}

2025-06-08T16:20:43.422473 - food_routes - DEBUG - Initializing Clarifai model
Extra: {}

2025-06-08T16:20:43.455534 - food_routes - DEBUG - Running food recognition
Extra: {}

2025-06-08T16:20:44.441212 - food_routes - DEBUG - Food recognized
Extra: {}

2025-06-08T16:20:44.441212 - food_routes - DEBUG - Generating recipe
Extra: {}

2025-06-08T16:20:44.441212 - AIService - DEBUG - Calling generate_recipe
Extra: {}

2025-06-08T16:20:44.441212 - AIService - DEBUG - Generating recipe for food: strawberry
Extra: {}

2025-06-08T16:20:44.441212 - AIService - DEBUG - Getting response for prompt: Generate a recipe with strawberry.
        Return a Recipe object with recipeName, calories, protein...
Extra: {}

2025-06-08T16:20:44.441212 - AIService - DEBUG - Output class: Recipe
Extra: {}

2025-06-08T16:20:45.574686 - AIService - DEBUG - Response received: [
  {
    "recipeName": "Strawberry Delight Smoothie",
    "calories": 250,
    "protein": 8,
    "f...
Extra: {}

2025-06-08T16:20:45.574686 - AIService - DEBUG - Recipe generated successfully
Extra: {}

2025-06-08T16:20:45.574686 - AIService - DEBUG - Function generate_recipe completed successfully
Extra: {}

2025-06-08T16:20:45.574686 - food_routes - DEBUG - Saving recipe query to Firestore
Extra: {}

2025-06-08T16:20:46.891761 - food_routes - INFO - Recipe generated successfully
Extra: {}

2025-06-08T16:20:46.892747 - food_routes - DEBUG - Removed temporary file
Extra: {}

2025-06-08T16:20:46.894090 - food_routes - INFO - API Response: POST http://192.168.1.25:5000/api/food/recipes
Extra: {}

2025-06-08T16:29:23.287453 - food_routes - INFO - API Request: POST http://192.168.1.25:5000/api/food/recipes
Extra: {}

2025-06-08T16:29:23.287453 - food_routes - DEBUG - File received
Extra: {}

2025-06-08T16:29:23.288296 - food_routes - DEBUG - Saved uploaded file
Extra: {}

2025-06-08T16:29:23.288296 - food_routes - DEBUG - Initializing Clarifai model
Extra: {}

2025-06-08T16:29:23.293198 - food_routes - DEBUG - Running food recognition
Extra: {}

2025-06-08T16:29:24.240249 - food_routes - DEBUG - Food recognized
Extra: {}

2025-06-08T16:29:24.240249 - food_routes - DEBUG - Generating recipe
Extra: {}

2025-06-08T16:29:24.240249 - AIService - DEBUG - Calling generate_recipe
Extra: {}

2025-06-08T16:29:24.240249 - AIService - DEBUG - Generating recipe for food: almond
Extra: {}

2025-06-08T16:29:24.240249 - AIService - DEBUG - Getting response for prompt: Generate a recipe with almond.
        Return a Recipe object with recipeName, calories, protein, fa...
Extra: {}

2025-06-08T16:29:24.240249 - AIService - DEBUG - Output class: Recipe
Extra: {}

2025-06-08T16:29:25.615250 - AIService - DEBUG - Response received: [
  {
    "recipeName": "Almond Joy Energy Bites",
    "calories": 150,
    "protein": 5,
    "fats"...
Extra: {}

2025-06-08T16:29:25.615250 - AIService - DEBUG - Recipe generated successfully
Extra: {}

2025-06-08T16:29:25.615250 - AIService - DEBUG - Function generate_recipe completed successfully
Extra: {}

2025-06-08T16:29:25.615250 - food_routes - DEBUG - Saving recipe query to Firestore
Extra: {}

2025-06-08T16:29:25.992906 - food_routes - INFO - Recipe generated successfully
Extra: {}

2025-06-08T16:29:26.008245 - food_routes - DEBUG - Removed temporary file
Extra: {}

2025-06-08T16:29:26.008245 - food_routes - INFO - API Response: POST http://192.168.1.25:5000/api/food/recipes
Extra: {}

2025-06-08T16:30:47.482469 - app - INFO - Starting application
Extra: {}

2025-06-08T16:30:47.487051 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T16:30:47.488201 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T16:30:47.492842 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T16:30:47.493488 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T16:30:47.596587 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T16:30:47.596587 - app - INFO - Loading ML model
Extra: {}

2025-06-08T16:30:50.705226 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T16:30:50.705226 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T16:30:50.715527 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:30:50.715527 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:30:51.065380 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T16:30:51.065380 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T16:30:51.070357 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T16:30:51.072379 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T16:30:51.072930 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T16:30:51.074488 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:30:51.074488 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:30:51.074488 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:30:51.078858 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:30:51.122047 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T16:30:51.163090 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T16:30:51.163090 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T16:30:51.163090 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T16:30:51.179406 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T16:30:51.179406 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T16:30:51.179406 - app - INFO - Application created successfully
Extra: {}

2025-06-08T16:31:11.363226 - app - INFO - Starting application
Extra: {}

2025-06-08T16:31:11.363226 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T16:31:11.363226 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T16:31:11.363226 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T16:31:11.363226 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T16:31:11.419306 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T16:31:11.419306 - app - INFO - Loading ML model
Extra: {}

2025-06-08T16:31:13.847289 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T16:31:13.847289 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T16:31:13.858203 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:31:13.861640 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:31:14.282815 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T16:31:14.282815 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T16:31:14.286885 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T16:31:14.290597 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T16:31:14.290597 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T16:31:14.293520 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:31:14.293520 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:31:14.299791 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:31:14.301820 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:31:14.355417 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T16:31:14.418472 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T16:31:14.419517 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T16:31:14.420568 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T16:31:14.459685 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T16:31:14.464772 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T16:31:14.465820 - app - INFO - Application created successfully
Extra: {}

2025-06-08T16:32:27.523555 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/diabetes_check
Extra: {}

2025-06-08T16:32:27.523555 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T16:32:27.523555 - UserService - DEBUG - Getting user data for user_id: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
Extra: {}

2025-06-08T16:32:27.523555 - UserService - DEBUG - Getting user data for user_id: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
Extra: {}

2025-06-08T16:32:28.812021 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '187', 'goal': 'Lose Weight', 'smoking_history': 'never', 'sex': 'Male', 'blood_glucose': '95', 'location': 'California', 'heart_disease': 'No', 'last_metrics': {'bmi': 24.489795918367346, 'macros': {'protein': 204.90829499999998, 'fat': 75.89196111111112, 'carbs': 307.3624425}, 'bmr': 1762.652, 'tdee': 2732.1106, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 23, 26, 10, 287000, tzinfo=datetime.timezone.utc)}, 'weight': '114', 'age': '23', 'vegan': False, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': '5', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 13, 13, 48, 927000, tzinfo=datetime.timezone.utc)}
Extra: {}

2025-06-08T16:32:28.812021 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '187', 'goal': 'Lose Weight', 'smoking_history': 'never', 'sex': 'Male', 'blood_glucose': '95', 'location': 'California', 'heart_disease': 'No', 'last_metrics': {'bmi': 24.489795918367346, 'macros': {'protein': 204.90829499999998, 'fat': 75.89196111111112, 'carbs': 307.3624425}, 'bmr': 1762.652, 'tdee': 2732.1106, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 23, 26, 10, 287000, tzinfo=datetime.timezone.utc)}, 'weight': '114', 'age': '23', 'vegan': False, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': '5', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 13, 13, 48, 927000, tzinfo=datetime.timezone.utc)}
Extra: {}

2025-06-08T16:32:28.812021 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T16:32:28.812021 - health_service - DEBUG - Calling check_diabetes_risk
Extra: {}

2025-06-08T16:32:28.812021 - HealthService - DEBUG - Checking diabetes risk for user data: {'ethnicity': 'Other', 'height': '187', 'goal': 'Lose Weight', 'smoking_history': 'never', 'sex': 'Male', 'blood_glucose': '95', 'location': 'California', 'heart_disease': 'No', 'last_metrics': {'bmi': 24.489795918367346, 'macros': {'protein': 204.90829499999998, 'fat': 75.89196111111112, 'carbs': 307.3624425}, 'bmr': 1762.652, 'tdee': 2732.1106, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 23, 26, 10, 287000, tzinfo=datetime.timezone.utc)}, 'weight': '114', 'age': '23', 'vegan': False, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': '5', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 13, 13, 48, 927000, tzinfo=datetime.timezone.utc)}
Extra: {}

2025-06-08T16:32:28.812021 - HealthService - DEBUG - Prepared input data for diabetes prediction: {'year': [2022], 'gender': [1], 'age': ['23'], 'location': [4], 'africanamerican': [0], 'asian': [0], 'caucasian': [0], 'hispanic': [0], 'other': [1], 'hypertension': [0], 'heart_disease': [0], 'smoking_history': [4], 'bmi': [24.489795918367346], 'hbA1c_level': ['5'], 'blood_glucose_level': ['95']}
Extra: {}

2025-06-08T16:32:28.887703 - HealthService - DEBUG - Diabetes risk prediction: {'prediction': 'no', 'prediction_code': 0}
Extra: {}

2025-06-08T16:32:28.888314 - health_service - DEBUG - Function check_diabetes_risk completed successfully
Extra: {}

2025-06-08T16:32:29.125588 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/diabetes_check
Extra: {}

2025-06-08T16:34:39.890604 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/diabetes_check
Extra: {}

2025-06-08T16:34:39.890604 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T16:34:39.890604 - UserService - DEBUG - Getting user data for user_id: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
Extra: {}

2025-06-08T16:34:39.890604 - UserService - DEBUG - Getting user data for user_id: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
Extra: {}

2025-06-08T16:34:40.906424 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '187', 'goal': 'Lose Weight', 'smoking_history': 'never', 'sex': 'Male', 'blood_glucose': '95', 'location': 'California', 'heart_disease': 'No', 'last_metrics': {'bmi': 24.489795918367346, 'macros': {'protein': 204.90829499999998, 'fat': 75.89196111111112, 'carbs': 307.3624425}, 'bmr': 1762.652, 'tdee': 2732.1106, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 23, 26, 10, 287000, tzinfo=datetime.timezone.utc)}, 'weight': '114', 'age': '23', 'vegan': False, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': '5', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 13, 13, 48, 927000, tzinfo=datetime.timezone.utc)}
Extra: {}

2025-06-08T16:34:40.906424 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '187', 'goal': 'Lose Weight', 'smoking_history': 'never', 'sex': 'Male', 'blood_glucose': '95', 'location': 'California', 'heart_disease': 'No', 'last_metrics': {'bmi': 24.489795918367346, 'macros': {'protein': 204.90829499999998, 'fat': 75.89196111111112, 'carbs': 307.3624425}, 'bmr': 1762.652, 'tdee': 2732.1106, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 23, 26, 10, 287000, tzinfo=datetime.timezone.utc)}, 'weight': '114', 'age': '23', 'vegan': False, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': '5', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 13, 13, 48, 927000, tzinfo=datetime.timezone.utc)}
Extra: {}

2025-06-08T16:34:40.906424 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T16:34:40.906424 - health_service - DEBUG - Calling check_diabetes_risk
Extra: {}

2025-06-08T16:34:40.909056 - HealthService - DEBUG - Checking diabetes risk for user data: {'ethnicity': 'Other', 'height': '187', 'goal': 'Lose Weight', 'smoking_history': 'never', 'sex': 'Male', 'blood_glucose': '95', 'location': 'California', 'heart_disease': 'No', 'last_metrics': {'bmi': 24.489795918367346, 'macros': {'protein': 204.90829499999998, 'fat': 75.89196111111112, 'carbs': 307.3624425}, 'bmr': 1762.652, 'tdee': 2732.1106, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 23, 26, 10, 287000, tzinfo=datetime.timezone.utc)}, 'weight': '114', 'age': '23', 'vegan': False, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': '5', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 13, 13, 48, 927000, tzinfo=datetime.timezone.utc)}
Extra: {}

2025-06-08T16:34:40.909056 - HealthService - DEBUG - Prepared input data for diabetes prediction: {'year': [2022], 'gender': [1], 'age': ['23'], 'location': [4], 'africanamerican': [0], 'asian': [0], 'caucasian': [0], 'hispanic': [0], 'other': [1], 'hypertension': [0], 'heart_disease': [0], 'smoking_history': [4], 'bmi': [24.489795918367346], 'hbA1c_level': ['5'], 'blood_glucose_level': ['95']}
Extra: {}

2025-06-08T16:34:40.942369 - HealthService - DEBUG - Diabetes risk prediction: {'prediction': 'no', 'prediction_code': 0}
Extra: {}

2025-06-08T16:34:40.942369 - health_service - DEBUG - Function check_diabetes_risk completed successfully
Extra: {}

2025-06-08T16:34:41.182654 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/diabetes_check
Extra: {}

2025-06-08T16:35:46.440611 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T16:35:46.440611 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T16:35:47.473014 - user_service - INFO - Chat history retrieved successfully
Extra: {}

2025-06-08T16:35:47.473014 - user_service - DEBUG - Function get_chat_history completed successfully
Extra: {}

2025-06-08T16:36:00.585398 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T16:36:00.585398 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T16:36:00.858310 - user_service - INFO - Chat history retrieved successfully
Extra: {}

2025-06-08T16:36:00.858310 - user_service - DEBUG - Function get_chat_history completed successfully
Extra: {}

2025-06-08T16:36:06.326736 - UserRoutes - INFO - API Request: POST http://192.168.1.25:5000/api/user/chat
Extra: {}

2025-06-08T16:36:06.326736 - UserRoutes - ERROR - Error in chat
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\routes\user_routes.py", line 139, in chat
    logger.debug('Processing chat message', extra={'user_id': user_id, 'message': new_message})
  File "C:\Users\kingc\AppData\Local\Programs\Python\Python310\lib\logging\__init__.py", line 1456, in debug
    self._log(DEBUG, msg, args, **kwargs)
  File "C:\Users\kingc\AppData\Local\Programs\Python\Python310\lib\logging\__init__.py", line 1613, in _log
    record = self.makeRecord(self.name, level, fn, lno, msg, args,
  File "C:\Users\kingc\AppData\Local\Programs\Python\Python310\lib\logging\__init__.py", line 1587, in makeRecord
    raise KeyError("Attempt to overwrite %r in LogRecord" % key)
KeyError: "Attempt to overwrite 'message' in LogRecord"

2025-06-08T16:36:06.326736 - UserRoutes - INFO - API Response: POST http://192.168.1.25:5000/api/user/chat
Extra: {}

2025-06-08T16:36:43.795584 - UserRoutes - INFO - API Request: POST http://192.168.1.25:5000/api/user/chat
Extra: {}

2025-06-08T16:36:43.795584 - UserRoutes - ERROR - Error in chat
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\routes\user_routes.py", line 139, in chat
    logger.debug('Processing chat message', extra={'user_id': user_id, 'message': new_message})
  File "C:\Users\kingc\AppData\Local\Programs\Python\Python310\lib\logging\__init__.py", line 1456, in debug
    self._log(DEBUG, msg, args, **kwargs)
  File "C:\Users\kingc\AppData\Local\Programs\Python\Python310\lib\logging\__init__.py", line 1613, in _log
    record = self.makeRecord(self.name, level, fn, lno, msg, args,
  File "C:\Users\kingc\AppData\Local\Programs\Python\Python310\lib\logging\__init__.py", line 1587, in makeRecord
    raise KeyError("Attempt to overwrite %r in LogRecord" % key)
KeyError: "Attempt to overwrite 'message' in LogRecord"

2025-06-08T16:36:43.795584 - UserRoutes - INFO - API Response: POST http://192.168.1.25:5000/api/user/chat
Extra: {}

2025-06-08T16:36:59.994534 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T16:36:59.994859 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T16:37:00.285268 - user_service - INFO - Chat history retrieved successfully
Extra: {}

2025-06-08T16:37:00.285268 - user_service - DEBUG - Function get_chat_history completed successfully
Extra: {}

2025-06-08T16:37:09.245074 - UserRoutes - INFO - API Request: POST http://192.168.1.25:5000/api/user/chat
Extra: {}

2025-06-08T16:37:09.245074 - UserRoutes - ERROR - Error in chat
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\routes\user_routes.py", line 139, in chat
    logger.debug('Processing chat message', extra={'user_id': user_id, 'message': new_message})
  File "C:\Users\kingc\AppData\Local\Programs\Python\Python310\lib\logging\__init__.py", line 1456, in debug
    self._log(DEBUG, msg, args, **kwargs)
  File "C:\Users\kingc\AppData\Local\Programs\Python\Python310\lib\logging\__init__.py", line 1613, in _log
    record = self.makeRecord(self.name, level, fn, lno, msg, args,
  File "C:\Users\kingc\AppData\Local\Programs\Python\Python310\lib\logging\__init__.py", line 1587, in makeRecord
    raise KeyError("Attempt to overwrite %r in LogRecord" % key)
KeyError: "Attempt to overwrite 'message' in LogRecord"

2025-06-08T16:37:09.245074 - UserRoutes - INFO - API Response: POST http://192.168.1.25:5000/api/user/chat
Extra: {}

2025-06-08T16:37:39.610589 - UserService - DEBUG - Processing login for email: test@example.com
Extra: {}

2025-06-08T16:37:39.610589 - UserService - DEBUG - Processing login for email: test@example.com
Extra: {}

2025-06-08T16:37:40.016267 - UserService - DEBUG - User found: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
Extra: {}

2025-06-08T16:37:40.016967 - UserService - DEBUG - User found: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
Extra: {}

2025-06-08T16:37:40.019715 - UserService - DEBUG - Custom token created for login
Extra: {}

2025-06-08T16:37:40.019715 - UserService - DEBUG - Custom token created for login
Extra: {}

2025-06-08T16:37:40.253740 - UserService - DEBUG - Last login timestamp updated
Extra: {}

2025-06-08T16:37:40.253740 - UserService - DEBUG - Last login timestamp updated
Extra: {}

2025-06-08T16:37:54.183212 - UserRoutes - INFO - API Request: POST http://localhost:5000/api/user/chat
Extra: {}

2025-06-08T16:37:54.183212 - UserRoutes - ERROR - Error in chat
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\routes\user_routes.py", line 139, in chat
    logger.debug('Processing chat message', extra={'user_id': user_id, 'message': new_message})
  File "C:\Users\kingc\AppData\Local\Programs\Python\Python310\lib\logging\__init__.py", line 1456, in debug
    self._log(DEBUG, msg, args, **kwargs)
  File "C:\Users\kingc\AppData\Local\Programs\Python\Python310\lib\logging\__init__.py", line 1613, in _log
    record = self.makeRecord(self.name, level, fn, lno, msg, args,
  File "C:\Users\kingc\AppData\Local\Programs\Python\Python310\lib\logging\__init__.py", line 1587, in makeRecord
    raise KeyError("Attempt to overwrite %r in LogRecord" % key)
KeyError: "Attempt to overwrite 'message' in LogRecord"

2025-06-08T16:37:54.183212 - UserRoutes - INFO - API Response: POST http://localhost:5000/api/user/chat
Extra: {}

2025-06-08T16:38:31.711299 - app - INFO - Starting application
Extra: {}

2025-06-08T16:38:31.711299 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T16:38:31.711299 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T16:38:31.711299 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T16:38:31.711299 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T16:38:31.817004 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T16:38:31.817004 - app - INFO - Loading ML model
Extra: {}

2025-06-08T16:38:33.800335 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T16:38:33.800335 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T16:38:33.800335 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:38:33.800335 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:38:33.954828 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T16:38:33.954828 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T16:38:33.954828 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T16:38:33.954828 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T16:38:33.954828 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T16:38:33.954828 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:38:33.954828 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:38:33.954828 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:38:33.954828 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:38:33.969450 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T16:38:33.994589 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T16:38:33.994589 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T16:38:33.994589 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T16:38:34.000930 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T16:38:34.000930 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T16:38:34.000930 - app - INFO - Application created successfully
Extra: {}

2025-06-08T16:38:51.371661 - app - INFO - Starting application
Extra: {}

2025-06-08T16:38:51.371661 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T16:38:51.371661 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T16:38:51.373673 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T16:38:51.373673 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T16:38:51.455843 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T16:38:51.455843 - app - INFO - Loading ML model
Extra: {}

2025-06-08T16:38:53.610258 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T16:38:53.610258 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T16:38:53.610258 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:38:53.610258 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:38:53.800923 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T16:38:53.800923 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T16:38:53.802937 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T16:38:53.802937 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T16:38:53.804952 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T16:38:53.804952 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:38:53.804952 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:38:53.806963 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:38:53.806963 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:38:53.843178 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T16:38:53.869880 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T16:38:53.872638 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T16:38:53.872638 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T16:38:53.892349 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T16:38:53.892349 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T16:38:53.898832 - app - INFO - Application created successfully
Extra: {}

2025-06-08T16:39:01.035348 - UserRoutes - INFO - API Request: POST http://192.168.1.25:5000/api/user/chat
Extra: {}

2025-06-08T16:39:01.035348 - UserRoutes - DEBUG - Processing chat message
Extra: {}

2025-06-08T16:39:01.035348 - UserRoutes - ERROR - Error in chat
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\routes\user_routes.py", line 146, in chat
    response = ai_service.generate_chat_response(new_message)
AttributeError: 'AIService' object has no attribute 'generate_chat_response'

2025-06-08T16:39:01.035348 - UserRoutes - INFO - API Response: POST http://192.168.1.25:5000/api/user/chat
Extra: {}

2025-06-08T16:40:56.138574 - app - INFO - Starting application
Extra: {}

2025-06-08T16:40:56.141590 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T16:40:56.141590 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T16:40:56.141590 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T16:40:56.141590 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T16:40:56.196997 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T16:40:56.196997 - app - INFO - Loading ML model
Extra: {}

2025-06-08T16:40:58.129702 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T16:40:58.129702 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T16:40:58.129702 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:40:58.129702 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:40:58.300738 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T16:40:58.300738 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T16:40:58.300738 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T16:40:58.300738 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T16:40:58.300738 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T16:40:58.300738 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:40:58.300738 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:40:58.300738 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:40:58.300738 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:40:58.317572 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T16:40:58.348862 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T16:40:58.348862 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T16:40:58.348862 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T16:40:58.364529 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T16:40:58.364529 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T16:40:58.368822 - app - INFO - Application created successfully
Extra: {}

2025-06-08T16:42:42.945475 - app - INFO - Starting application
Extra: {}

2025-06-08T16:42:42.945475 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T16:42:42.945475 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T16:42:42.952843 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T16:42:42.952843 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T16:42:43.133641 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T16:42:43.133641 - app - INFO - Loading ML model
Extra: {}

2025-06-08T16:42:46.816003 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T16:42:46.816003 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T16:42:46.816003 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:42:46.816003 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:42:47.130330 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T16:42:47.130330 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T16:42:47.130330 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T16:42:47.138687 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T16:42:47.138687 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T16:42:47.138687 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:42:47.138687 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:42:47.142123 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:42:47.142123 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:42:47.174224 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T16:42:47.231532 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T16:42:47.233552 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T16:42:47.233552 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T16:42:47.264003 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T16:42:47.264003 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T16:42:47.264003 - app - INFO - Application created successfully
Extra: {}

2025-06-08T16:44:03.242420 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T16:44:03.243883 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T16:44:04.735287 - user_service - INFO - Chat history retrieved successfully
Extra: {}

2025-06-08T16:44:04.743677 - user_service - DEBUG - Function get_chat_history completed successfully
Extra: {}

2025-06-08T16:44:20.700824 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T16:44:20.702457 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T16:44:20.963353 - user_service - INFO - Chat history retrieved successfully
Extra: {}

2025-06-08T16:44:20.965387 - user_service - DEBUG - Function get_chat_history completed successfully
Extra: {}

2025-06-08T16:44:30.643126 - app - INFO - Starting application
Extra: {}

2025-06-08T16:44:30.643126 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T16:44:30.651189 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T16:44:30.651189 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T16:44:30.651189 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T16:44:30.818451 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T16:44:30.818451 - app - INFO - Loading ML model
Extra: {}

2025-06-08T16:44:33.654494 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T16:44:33.654494 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T16:44:33.656135 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:44:33.656135 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:44:33.819480 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T16:44:33.819480 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T16:44:33.819480 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T16:44:33.819480 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T16:44:33.819480 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T16:44:33.819480 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:44:33.819480 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:44:33.819480 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:44:33.819480 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:44:33.848446 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T16:44:33.867887 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T16:44:33.867887 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T16:44:33.867887 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T16:44:33.877057 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T16:44:33.884717 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T16:44:33.884717 - app - INFO - Application created successfully
Extra: {}

2025-06-08T16:44:43.498032 - UserRoutes - INFO - API Request: POST http://localhost:5000/api/user/chat
Extra: {}

2025-06-08T16:44:43.498032 - UserRoutes - WARNING - No message provided in request
Extra: {}

2025-06-08T16:44:43.506959 - UserRoutes - INFO - API Response: POST http://localhost:5000/api/user/chat
Extra: {}

2025-06-08T16:45:37.448794 - UserRoutes - INFO - API Request: POST http://localhost:5000/api/user/chat
Extra: {}

2025-06-08T16:45:37.450682 - UserRoutes - WARNING - No message provided in request
Extra: {}

2025-06-08T16:45:37.450682 - UserRoutes - INFO - API Response: POST http://localhost:5000/api/user/chat
Extra: {}

2025-06-08T16:46:18.522669 - app - INFO - Starting application
Extra: {}

2025-06-08T16:46:18.522669 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T16:46:18.522669 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T16:46:18.522669 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T16:46:18.522669 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T16:46:18.591375 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T16:46:18.591375 - app - INFO - Loading ML model
Extra: {}

2025-06-08T16:46:19.748591 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T16:46:19.748591 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T16:46:19.763598 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:46:19.765582 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:46:19.865422 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T16:46:19.865422 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T16:46:19.865422 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T16:46:19.865422 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T16:46:19.865422 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T16:46:19.865422 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:46:19.865422 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:46:19.865422 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:46:19.865422 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:46:19.881916 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T16:46:19.900599 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T16:46:19.900599 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T16:46:19.900599 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T16:46:19.902572 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T16:46:19.908639 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T16:46:19.908639 - app - INFO - Application created successfully
Extra: {}

2025-06-08T16:46:26.143169 - UserRoutes - INFO - API Request: POST http://localhost:5000/api/user/chat
Extra: {}

2025-06-08T16:46:26.143169 - UserRoutes - DEBUG - Processing chat message
Extra: {}

2025-06-08T16:46:26.143169 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T16:46:26.143169 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T16:46:27.334545 - user_service - INFO - Chat history retrieved successfully
Extra: {}

2025-06-08T16:46:27.334545 - user_service - DEBUG - Function get_chat_history completed successfully
Extra: {}

2025-06-08T16:46:28.372590 - UserRoutes - DEBUG - Saving chat to Firestore
Extra: {}

2025-06-08T16:46:28.691091 - UserRoutes - INFO - Chat processed successfully
Extra: {}

2025-06-08T16:46:28.691091 - UserRoutes - INFO - API Response: POST http://localhost:5000/api/user/chat
Extra: {}

2025-06-08T16:46:36.463550 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T16:46:36.463550 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T16:46:36.683123 - user_service - INFO - Chat history retrieved successfully
Extra: {}

2025-06-08T16:46:36.684994 - user_service - DEBUG - Function get_chat_history completed successfully
Extra: {}

2025-06-08T16:47:07.932218 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T16:47:07.934223 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T16:47:08.700272 - user_service - INFO - Chat history retrieved successfully
Extra: {}

2025-06-08T16:47:08.700272 - user_service - DEBUG - Function get_chat_history completed successfully
Extra: {}

2025-06-08T16:47:19.415929 - UserRoutes - INFO - API Request: POST http://192.168.1.25:5000/api/user/chat
Extra: {}

2025-06-08T16:47:19.417987 - UserRoutes - DEBUG - Processing chat message
Extra: {}

2025-06-08T16:47:19.417987 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T16:47:19.417987 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T16:47:19.640758 - user_service - INFO - Chat history retrieved successfully
Extra: {}

2025-06-08T16:47:19.640758 - user_service - DEBUG - Function get_chat_history completed successfully
Extra: {}

2025-06-08T16:47:20.508810 - UserRoutes - DEBUG - Saving chat to Firestore
Extra: {}

2025-06-08T16:47:20.743495 - UserRoutes - INFO - Chat processed successfully
Extra: {}

2025-06-08T16:47:20.743495 - UserRoutes - INFO - API Response: POST http://192.168.1.25:5000/api/user/chat
Extra: {}

2025-06-08T16:47:30.891251 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T16:47:30.891251 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T16:47:31.106656 - user_service - INFO - Chat history retrieved successfully
Extra: {}

2025-06-08T16:47:31.106656 - user_service - DEBUG - Function get_chat_history completed successfully
Extra: {}

2025-06-08T16:48:53.218855 - app - INFO - Starting application
Extra: {}

2025-06-08T16:48:53.218855 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T16:48:53.218855 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T16:48:53.218855 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T16:48:53.218855 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T16:48:53.300767 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T16:48:53.300767 - app - INFO - Loading ML model
Extra: {}

2025-06-08T16:48:54.907075 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T16:48:54.907075 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T16:48:54.916362 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:48:54.916362 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:48:55.030142 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T16:48:55.030142 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T16:48:55.030142 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T16:48:55.030142 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T16:48:55.030142 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T16:48:55.030142 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:48:55.030142 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:48:55.030142 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:48:55.030142 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:48:55.054343 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T16:48:55.062717 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T16:48:55.062717 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T16:48:55.062717 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T16:48:55.076233 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T16:48:55.076233 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T16:48:55.076233 - app - INFO - Application created successfully
Extra: {}

2025-06-08T16:49:03.236065 - UserRoutes - INFO - API Request: POST http://192.168.1.25:5000/api/user/chat
Extra: {}

2025-06-08T16:49:03.236065 - UserRoutes - DEBUG - Processing chat message
Extra: {}

2025-06-08T16:49:03.236065 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T16:49:03.236065 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T16:49:04.407386 - user_service - INFO - Chat history retrieved successfully
Extra: {}

2025-06-08T16:49:04.407386 - user_service - DEBUG - Function get_chat_history completed successfully
Extra: {}

2025-06-08T16:49:05.266562 - UserRoutes - DEBUG - Saving chat to Firestore
Extra: {}

2025-06-08T16:49:05.517507 - UserRoutes - INFO - Chat processed successfully
Extra: {}

2025-06-08T16:49:05.517507 - UserRoutes - INFO - API Response: POST http://192.168.1.25:5000/api/user/chat
Extra: {}

2025-06-08T16:49:12.765097 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T16:49:12.765097 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T16:49:13.023228 - user_service - INFO - Chat history retrieved successfully
Extra: {}

2025-06-08T16:49:13.023228 - user_service - DEBUG - Function get_chat_history completed successfully
Extra: {}

2025-06-08T16:51:58.200571 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T16:51:58.202597 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T16:51:59.145107 - user_service - INFO - Chat history retrieved successfully
Extra: {}

2025-06-08T16:51:59.146093 - user_service - DEBUG - Function get_chat_history completed successfully
Extra: {}

2025-06-08T16:52:26.274133 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T16:52:26.275149 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T16:52:26.517418 - user_service - INFO - Chat history retrieved successfully
Extra: {}

2025-06-08T16:52:26.521653 - user_service - DEBUG - Function get_chat_history completed successfully
Extra: {}

2025-06-08T16:52:52.023299 - app - INFO - Starting application
Extra: {}

2025-06-08T16:52:52.023299 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T16:52:52.024745 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T16:52:52.027312 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T16:52:52.027312 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T16:52:52.167413 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T16:52:52.167413 - app - INFO - Loading ML model
Extra: {}

2025-06-08T16:52:55.448650 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T16:52:55.449650 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T16:52:55.451662 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:52:55.452658 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:52:55.690092 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T16:52:55.691085 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T16:52:55.692084 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T16:52:55.693083 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T16:52:55.693083 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T16:52:55.699192 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:52:55.709079 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:52:55.710080 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:52:55.710080 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:52:55.757590 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T16:52:55.802829 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T16:52:55.802829 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T16:52:55.802829 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T16:52:55.815747 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T16:52:55.816757 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T16:52:55.817731 - app - INFO - Application created successfully
Extra: {}

2025-06-08T16:53:10.379898 - app - INFO - Starting application
Extra: {}

2025-06-08T16:53:10.379898 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T16:53:10.379898 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T16:53:10.382001 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T16:53:10.382001 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T16:53:10.456500 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T16:53:10.457465 - app - INFO - Loading ML model
Extra: {}

2025-06-08T16:53:12.647757 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T16:53:12.647757 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T16:53:12.652382 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:53:12.654986 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:53:12.959440 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T16:53:12.959440 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T16:53:12.964786 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T16:53:12.964786 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T16:53:12.964786 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T16:53:12.964786 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:53:12.964786 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:53:12.964786 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:53:12.964786 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:53:12.994526 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T16:53:13.022212 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T16:53:13.023203 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T16:53:13.023203 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T16:53:13.032214 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T16:53:13.033200 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T16:53:13.033469 - app - INFO - Application created successfully
Extra: {}

2025-06-08T16:53:29.095236 - app - INFO - Starting application
Extra: {}

2025-06-08T16:53:29.095236 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T16:53:29.095236 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T16:53:29.098653 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T16:53:29.098653 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T16:53:29.230282 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T16:53:29.231283 - app - INFO - Loading ML model
Extra: {}

2025-06-08T16:53:31.722144 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T16:53:31.723648 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T16:53:31.725678 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:53:31.725678 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:53:31.951948 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T16:53:31.951948 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T16:53:31.953079 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T16:53:31.954158 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T16:53:31.954158 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T16:53:31.956332 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:53:31.956332 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:53:31.957380 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:53:31.957380 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:53:31.983501 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T16:53:32.012085 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T16:53:32.013409 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T16:53:32.013409 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T16:53:32.022717 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T16:53:32.023704 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T16:53:32.024698 - app - INFO - Application created successfully
Extra: {}

2025-06-08T16:53:46.491766 - app - INFO - Starting application
Extra: {}

2025-06-08T16:53:46.492770 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T16:53:46.492770 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T16:53:46.494679 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T16:53:46.494679 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T16:53:46.560659 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T16:53:46.561567 - app - INFO - Loading ML model
Extra: {}

2025-06-08T16:53:48.758403 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T16:53:48.758403 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T16:53:48.759980 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:53:48.761618 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:53:48.988343 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T16:53:48.988343 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T16:53:48.988343 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T16:53:48.988343 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T16:53:48.988343 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T16:53:48.988343 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:53:48.998974 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:53:48.998974 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:53:48.998974 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:53:49.050660 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T16:53:49.122132 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T16:53:49.146818 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T16:53:49.149825 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T16:53:49.181370 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T16:53:49.182375 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T16:53:49.182375 - app - INFO - Application created successfully
Extra: {}

2025-06-08T16:54:52.144636 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/chat/history
Extra: {}

2025-06-08T16:54:52.145944 - UserRoutes - INFO - Fetching chat history
Extra: {}

2025-06-08T16:54:52.145944 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T16:54:52.146954 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T16:54:53.820739 - user_service - ERROR - Error getting chat history
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\user_service.py", line 168, in get_chat_history
    .get()
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\cloud\firestore_v1\query.py", line 202, in get
    result_list = list(result)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\cloud\firestore_v1\stream_generator.py", line 58, in __next__
    return self._generator.__next__()
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\cloud\firestore_v1\query.py", line 410, in _make_stream
    response_iterator, expected_prefix = self._get_stream_iterator(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\cloud\firestore_v1\query.py", line 260, in _get_stream_iterator
    response_iterator = self._client._firestore_api.run_query(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\cloud\firestore_v1\services\firestore\client.py", line 1624, in run_query
    response = rpc(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\retry\retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\retry\retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\retry\retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\retry\retry_unary.py", line 147, in retry_target
    result = target()
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\grpc_helpers.py", line 174, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.FailedPrecondition: 400 The query requires an index. You can create it here: https://console.firebase.google.com/v1/r/project/glucose-3f1ef/firestore/indexes?create_composite=ClJwcm9qZWN0cy9nbHVjb3NlLTNmMWVmL2RhdGFiYXNlcy8oZGVmYXVsdCkvY29sbGVjdGlvbkdyb3Vwcy9jaGF0X2hpc3RvcnkvaW5kZXhlcy9fEAEaCwoHdXNlcl9pZBABGg0KCXRpbWVzdGFtcBABGgwKCF9fbmFtZV9fEAE

2025-06-08T16:54:53.828651 - user_service - ERROR - Error in get_chat_history
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\user_service.py", line 188, in get_chat_history
    raise e
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\user_service.py", line 168, in get_chat_history
    .get()
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\cloud\firestore_v1\query.py", line 202, in get
    result_list = list(result)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\cloud\firestore_v1\stream_generator.py", line 58, in __next__
    return self._generator.__next__()
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\cloud\firestore_v1\query.py", line 410, in _make_stream
    response_iterator, expected_prefix = self._get_stream_iterator(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\cloud\firestore_v1\query.py", line 260, in _get_stream_iterator
    response_iterator = self._client._firestore_api.run_query(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\cloud\firestore_v1\services\firestore\client.py", line 1624, in run_query
    response = rpc(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\retry\retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\retry\retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\retry\retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\retry\retry_unary.py", line 147, in retry_target
    result = target()
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\grpc_helpers.py", line 174, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.FailedPrecondition: 400 The query requires an index. You can create it here: https://console.firebase.google.com/v1/r/project/glucose-3f1ef/firestore/indexes?create_composite=ClJwcm9qZWN0cy9nbHVjb3NlLTNmMWVmL2RhdGFiYXNlcy8oZGVmYXVsdCkvY29sbGVjdGlvbkdyb3Vwcy9jaGF0X2hpc3RvcnkvaW5kZXhlcy9fEAEaCwoHdXNlcl9pZBABGg0KCXRpbWVzdGFtcBABGgwKCF9fbmFtZV9fEAE

2025-06-08T16:54:53.833793 - UserRoutes - ERROR - Error fetching chat history
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\routes\user_routes.py", line 182, in get_chat_history
    history = user_service.get_chat_history(user_id)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\user_service.py", line 188, in get_chat_history
    raise e
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\user_service.py", line 168, in get_chat_history
    .get()
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\cloud\firestore_v1\query.py", line 202, in get
    result_list = list(result)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\cloud\firestore_v1\stream_generator.py", line 58, in __next__
    return self._generator.__next__()
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\cloud\firestore_v1\query.py", line 410, in _make_stream
    response_iterator, expected_prefix = self._get_stream_iterator(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\cloud\firestore_v1\query.py", line 260, in _get_stream_iterator
    response_iterator = self._client._firestore_api.run_query(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\cloud\firestore_v1\services\firestore\client.py", line 1624, in run_query
    response = rpc(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\retry\retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\retry\retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\retry\retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\retry\retry_unary.py", line 147, in retry_target
    result = target()
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\grpc_helpers.py", line 174, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.FailedPrecondition: 400 The query requires an index. You can create it here: https://console.firebase.google.com/v1/r/project/glucose-3f1ef/firestore/indexes?create_composite=ClJwcm9qZWN0cy9nbHVjb3NlLTNmMWVmL2RhdGFiYXNlcy8oZGVmYXVsdCkvY29sbGVjdGlvbkdyb3Vwcy9jaGF0X2hpc3RvcnkvaW5kZXhlcy9fEAEaCwoHdXNlcl9pZBABGg0KCXRpbWVzdGFtcBABGgwKCF9fbmFtZV9fEAE

2025-06-08T16:54:53.833793 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/chat/history
Extra: {}

2025-06-08T16:55:13.451235 - app - INFO - Starting application
Extra: {}

2025-06-08T16:55:13.451235 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T16:55:13.451235 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T16:55:13.454203 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T16:55:13.454203 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T16:55:13.618220 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T16:55:13.620083 - app - INFO - Loading ML model
Extra: {}

2025-06-08T16:55:17.541218 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T16:55:17.542214 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T16:55:17.545220 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:55:17.546213 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:55:18.029569 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T16:55:18.030592 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T16:55:18.033564 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T16:55:18.034271 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T16:55:18.035307 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T16:55:18.038313 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:55:18.039303 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:55:18.041316 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:55:18.041316 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:55:18.094762 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T16:55:18.138132 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T16:55:18.139139 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T16:55:18.140150 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T16:55:18.160470 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T16:55:18.161473 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T16:55:18.162950 - app - INFO - Application created successfully
Extra: {}

2025-06-08T16:56:38.029636 - app - INFO - Starting application
Extra: {}

2025-06-08T16:56:38.029636 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T16:56:38.029636 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T16:56:38.029636 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T16:56:38.029636 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T16:56:38.097080 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T16:56:38.097080 - app - INFO - Loading ML model
Extra: {}

2025-06-08T16:56:39.468885 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T16:56:39.468885 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T16:56:39.468885 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:56:39.468885 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:56:39.564595 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T16:56:39.564595 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T16:56:39.565592 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T16:56:39.565592 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T16:56:39.566592 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T16:56:39.566592 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:56:39.566592 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:56:39.566592 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:56:39.566592 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:56:39.578026 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T16:56:39.592588 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T16:56:39.593574 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T16:56:39.593574 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T16:56:39.599577 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T16:56:39.599577 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T16:56:39.599577 - app - INFO - Application created successfully
Extra: {}

2025-06-08T16:57:25.612838 - app - INFO - Starting application
Extra: {}

2025-06-08T16:57:25.612838 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T16:57:25.612838 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T16:57:25.612838 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T16:57:25.612838 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T16:57:25.681554 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T16:57:25.681554 - app - INFO - Loading ML model
Extra: {}

2025-06-08T16:57:27.208385 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T16:57:27.208385 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T16:57:27.209385 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:57:27.209385 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:57:27.328186 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T16:57:27.328186 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T16:57:27.330190 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T16:57:27.330190 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T16:57:27.330190 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T16:57:27.331528 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:57:27.331528 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:57:27.331528 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:57:27.331528 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:57:27.350470 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T16:57:27.370044 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T16:57:27.370044 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T16:57:27.371333 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T16:57:27.377076 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T16:57:27.378039 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T16:57:27.378039 - app - INFO - Application created successfully
Extra: {}

2025-06-08T16:57:36.840711 - app - INFO - Starting application
Extra: {}

2025-06-08T16:57:36.841696 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T16:57:36.841696 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T16:57:36.843712 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T16:57:36.843712 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T16:57:36.900079 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T16:57:36.901080 - app - INFO - Loading ML model
Extra: {}

2025-06-08T16:57:38.104944 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T16:57:38.104944 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T16:57:38.107262 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:57:38.107262 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:57:38.196421 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T16:57:38.197346 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T16:57:38.197346 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T16:57:38.198186 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T16:57:38.198186 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T16:57:38.199324 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:57:38.199324 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T16:57:38.199324 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:57:38.199324 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T16:57:38.211368 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T16:57:38.225098 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T16:57:38.225098 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T16:57:38.225098 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T16:57:38.232337 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T16:57:38.233298 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T16:57:38.233298 - app - INFO - Application created successfully
Extra: {}

2025-06-08T16:57:50.754251 - UserRoutes - INFO - API Request: POST http://192.168.1.25:5000/api/user/chat
Extra: {}

2025-06-08T16:57:50.754251 - UserRoutes - DEBUG - Processing chat message
Extra: {}

2025-06-08T16:57:50.754251 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T16:57:50.754251 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T16:57:51.927359 - user_service - INFO - Chat history retrieved successfully
Extra: {}

2025-06-08T16:57:51.927359 - user_service - DEBUG - Function get_chat_history completed successfully
Extra: {}

2025-06-08T16:57:52.514709 - UserRoutes - DEBUG - Saving chat to Firestore
Extra: {}

2025-06-08T16:57:52.514709 - user_service - DEBUG - Calling save_chat_message
Extra: {}

2025-06-08T16:57:52.514709 - user_service - INFO - Saving chat message
Extra: {}

2025-06-08T16:57:53.323853 - user_service - INFO - Chat message saved successfully
Extra: {}

2025-06-08T16:57:53.323853 - user_service - DEBUG - Function save_chat_message completed successfully
Extra: {}

2025-06-08T16:57:53.323853 - UserRoutes - INFO - Chat processed successfully
Extra: {}

2025-06-08T16:57:53.326252 - UserRoutes - INFO - API Response: POST http://192.168.1.25:5000/api/user/chat
Extra: {}

2025-06-08T16:58:00.464372 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T16:58:00.465373 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T16:58:00.671891 - user_service - INFO - Chat history retrieved successfully
Extra: {}

2025-06-08T16:58:00.671891 - user_service - DEBUG - Function get_chat_history completed successfully
Extra: {}

2025-06-08T16:58:11.770098 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T16:58:11.770098 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T16:58:11.984670 - user_service - INFO - Chat history retrieved successfully
Extra: {}

2025-06-08T16:58:11.984670 - user_service - DEBUG - Function get_chat_history completed successfully
Extra: {}

2025-06-08T16:59:26.572471 - UserRoutes - INFO - API Request: POST http://192.168.1.25:5000/api/user/chat
Extra: {}

2025-06-08T16:59:26.572471 - UserRoutes - DEBUG - Processing chat message
Extra: {}

2025-06-08T16:59:26.573469 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T16:59:26.573469 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T16:59:27.490253 - user_service - INFO - Chat history retrieved successfully
Extra: {}

2025-06-08T16:59:27.490253 - user_service - DEBUG - Function get_chat_history completed successfully
Extra: {}

2025-06-08T16:59:28.132830 - UserRoutes - DEBUG - Saving chat to Firestore
Extra: {}

2025-06-08T16:59:28.133830 - user_service - DEBUG - Calling save_chat_message
Extra: {}

2025-06-08T16:59:28.133830 - user_service - INFO - Saving chat message
Extra: {}

2025-06-08T16:59:28.925816 - user_service - INFO - Chat message saved successfully
Extra: {}

2025-06-08T16:59:28.925816 - user_service - DEBUG - Function save_chat_message completed successfully
Extra: {}

2025-06-08T16:59:28.925816 - UserRoutes - INFO - Chat processed successfully
Extra: {}

2025-06-08T16:59:28.926856 - UserRoutes - INFO - API Response: POST http://192.168.1.25:5000/api/user/chat
Extra: {}

2025-06-08T16:59:33.868741 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T16:59:33.869747 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T16:59:34.085453 - user_service - INFO - Chat history retrieved successfully
Extra: {}

2025-06-08T16:59:34.086478 - user_service - DEBUG - Function get_chat_history completed successfully
Extra: {}

2025-06-08T17:00:13.061571 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T17:00:13.061571 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T17:00:13.269486 - user_service - INFO - Chat history retrieved successfully
Extra: {}

2025-06-08T17:00:13.269486 - user_service - DEBUG - Function get_chat_history completed successfully
Extra: {}

2025-06-08T17:00:18.835444 - UserRoutes - INFO - API Request: POST http://192.168.1.25:5000/api/user/chat
Extra: {}

2025-06-08T17:00:18.835444 - UserRoutes - DEBUG - Processing chat message
Extra: {}

2025-06-08T17:00:18.835444 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T17:00:18.835444 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T17:00:19.045405 - user_service - INFO - Chat history retrieved successfully
Extra: {}

2025-06-08T17:00:19.045862 - user_service - DEBUG - Function get_chat_history completed successfully
Extra: {}

2025-06-08T17:00:19.751811 - UserRoutes - DEBUG - Saving chat to Firestore
Extra: {}

2025-06-08T17:00:19.752795 - user_service - DEBUG - Calling save_chat_message
Extra: {}

2025-06-08T17:00:19.752795 - user_service - INFO - Saving chat message
Extra: {}

2025-06-08T17:00:20.540670 - user_service - INFO - Chat message saved successfully
Extra: {}

2025-06-08T17:00:20.541707 - user_service - DEBUG - Function save_chat_message completed successfully
Extra: {}

2025-06-08T17:00:20.542702 - UserRoutes - INFO - Chat processed successfully
Extra: {}

2025-06-08T17:00:20.542702 - UserRoutes - INFO - API Response: POST http://192.168.1.25:5000/api/user/chat
Extra: {}

2025-06-08T17:00:22.784734 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T17:00:22.784734 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T17:00:23.000628 - user_service - INFO - Chat history retrieved successfully
Extra: {}

2025-06-08T17:00:23.000628 - user_service - DEBUG - Function get_chat_history completed successfully
Extra: {}

2025-06-08T17:00:27.697488 - UserRoutes - INFO - API Request: POST http://192.168.1.25:5000/api/user/chat
Extra: {}

2025-06-08T17:00:27.697488 - UserRoutes - DEBUG - Processing chat message
Extra: {}

2025-06-08T17:00:27.697488 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T17:00:27.698566 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T17:00:27.891639 - user_service - INFO - Chat history retrieved successfully
Extra: {}

2025-06-08T17:00:27.891639 - user_service - DEBUG - Function get_chat_history completed successfully
Extra: {}

2025-06-08T17:00:29.045673 - UserRoutes - DEBUG - Saving chat to Firestore
Extra: {}

2025-06-08T17:00:29.045673 - user_service - DEBUG - Calling save_chat_message
Extra: {}

2025-06-08T17:00:29.045673 - user_service - INFO - Saving chat message
Extra: {}

2025-06-08T17:00:29.825775 - user_service - INFO - Chat message saved successfully
Extra: {}

2025-06-08T17:00:29.826738 - user_service - DEBUG - Function save_chat_message completed successfully
Extra: {}

2025-06-08T17:00:29.826738 - UserRoutes - INFO - Chat processed successfully
Extra: {}

2025-06-08T17:00:29.827737 - UserRoutes - INFO - API Response: POST http://192.168.1.25:5000/api/user/chat
Extra: {}

2025-06-08T17:00:34.975441 - UserRoutes - INFO - API Request: POST http://192.168.1.25:5000/api/user/chat
Extra: {}

2025-06-08T17:00:34.975441 - UserRoutes - DEBUG - Processing chat message
Extra: {}

2025-06-08T17:00:34.975441 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T17:00:34.976461 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T17:00:35.185378 - user_service - INFO - Chat history retrieved successfully
Extra: {}

2025-06-08T17:00:35.185378 - user_service - DEBUG - Function get_chat_history completed successfully
Extra: {}

2025-06-08T17:00:35.747503 - UserRoutes - DEBUG - Saving chat to Firestore
Extra: {}

2025-06-08T17:00:35.748510 - user_service - DEBUG - Calling save_chat_message
Extra: {}

2025-06-08T17:00:35.748510 - user_service - INFO - Saving chat message
Extra: {}

2025-06-08T17:00:36.524170 - user_service - INFO - Chat message saved successfully
Extra: {}

2025-06-08T17:00:36.524170 - user_service - DEBUG - Function save_chat_message completed successfully
Extra: {}

2025-06-08T17:00:36.524170 - UserRoutes - INFO - Chat processed successfully
Extra: {}

2025-06-08T17:00:36.525187 - UserRoutes - INFO - API Response: POST http://192.168.1.25:5000/api/user/chat
Extra: {}

2025-06-08T17:00:40.655086 - user_service - DEBUG - Calling delete_chat_history
Extra: {}

2025-06-08T17:00:40.656091 - UserService - DEBUG - Deleting chat history for user_id: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
Extra: {}

2025-06-08T17:00:40.656091 - UserService - DEBUG - Deleting chat history for user_id: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
Extra: {}

2025-06-08T17:00:41.546514 - UserService - DEBUG - Successfully deleted chat history for user_id: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
Extra: {}

2025-06-08T17:00:41.547518 - UserService - DEBUG - Successfully deleted chat history for user_id: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
Extra: {}

2025-06-08T17:00:41.547518 - user_service - DEBUG - Function delete_chat_history completed successfully
Extra: {}

2025-06-08T17:01:33.347534 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:01:33.350152 - UserService - DEBUG - Getting user data for user_id: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
Extra: {}

2025-06-08T17:01:33.350152 - UserService - DEBUG - Getting user data for user_id: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
Extra: {}

2025-06-08T17:01:33.574584 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '187', 'goal': 'Lose Weight', 'smoking_history': 'never', 'sex': 'Male', 'blood_glucose': '95', 'location': 'California', 'heart_disease': 'No', 'last_metrics': {'bmi': 24.489795918367346, 'macros': {'protein': 204.90829499999998, 'fat': 75.89196111111112, 'carbs': 307.3624425}, 'bmr': 1762.652, 'tdee': 2732.1106, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 23, 26, 10, 287000, tzinfo=datetime.timezone.utc)}, 'weight': '114', 'age': '23', 'vegan': False, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': '5', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 13, 37, 36, 256000, tzinfo=datetime.timezone.utc)}
Extra: {}

2025-06-08T17:01:33.574584 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '187', 'goal': 'Lose Weight', 'smoking_history': 'never', 'sex': 'Male', 'blood_glucose': '95', 'location': 'California', 'heart_disease': 'No', 'last_metrics': {'bmi': 24.489795918367346, 'macros': {'protein': 204.90829499999998, 'fat': 75.89196111111112, 'carbs': 307.3624425}, 'bmr': 1762.652, 'tdee': 2732.1106, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 23, 26, 10, 287000, tzinfo=datetime.timezone.utc)}, 'weight': '114', 'age': '23', 'vegan': False, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': '5', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 13, 37, 36, 256000, tzinfo=datetime.timezone.utc)}
Extra: {}

2025-06-08T17:01:33.574584 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:01:39.962957 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:01:39.962957 - UserService - DEBUG - Getting user data for user_id: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
Extra: {}

2025-06-08T17:01:39.962957 - UserService - DEBUG - Getting user data for user_id: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
Extra: {}

2025-06-08T17:01:40.171160 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '187', 'goal': 'Lose Weight', 'smoking_history': 'never', 'sex': 'Male', 'blood_glucose': '95', 'location': 'California', 'heart_disease': 'No', 'last_metrics': {'bmi': 24.489795918367346, 'macros': {'protein': 204.90829499999998, 'fat': 75.89196111111112, 'carbs': 307.3624425}, 'bmr': 1762.652, 'tdee': 2732.1106, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 23, 26, 10, 287000, tzinfo=datetime.timezone.utc)}, 'weight': '114', 'age': '23', 'vegan': False, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': '5', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 13, 37, 36, 256000, tzinfo=datetime.timezone.utc)}
Extra: {}

2025-06-08T17:01:40.171160 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '187', 'goal': 'Lose Weight', 'smoking_history': 'never', 'sex': 'Male', 'blood_glucose': '95', 'location': 'California', 'heart_disease': 'No', 'last_metrics': {'bmi': 24.489795918367346, 'macros': {'protein': 204.90829499999998, 'fat': 75.89196111111112, 'carbs': 307.3624425}, 'bmr': 1762.652, 'tdee': 2732.1106, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 23, 26, 10, 287000, tzinfo=datetime.timezone.utc)}, 'weight': '114', 'age': '23', 'vegan': False, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': '5', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 13, 37, 36, 256000, tzinfo=datetime.timezone.utc)}
Extra: {}

2025-06-08T17:01:40.171160 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:01:41.179961 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:01:41.179961 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:01:41.179961 - UserService - DEBUG - Getting user data for user_id: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
Extra: {}

2025-06-08T17:01:41.179961 - UserService - DEBUG - Getting user data for user_id: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
Extra: {}

2025-06-08T17:01:41.425708 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '187', 'goal': 'Lose Weight', 'smoking_history': 'never', 'sex': 'Male', 'blood_glucose': '95', 'location': 'California', 'heart_disease': 'No', 'last_metrics': {'bmi': 24.489795918367346, 'macros': {'protein': 204.90829499999998, 'fat': 75.89196111111112, 'carbs': 307.3624425}, 'bmr': 1762.652, 'tdee': 2732.1106, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 23, 26, 10, 287000, tzinfo=datetime.timezone.utc)}, 'weight': '114', 'age': '23', 'vegan': False, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': '5', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 13, 37, 36, 256000, tzinfo=datetime.timezone.utc)}
Extra: {}

2025-06-08T17:01:41.426708 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '187', 'goal': 'Lose Weight', 'smoking_history': 'never', 'sex': 'Male', 'blood_glucose': '95', 'location': 'California', 'heart_disease': 'No', 'last_metrics': {'bmi': 24.489795918367346, 'macros': {'protein': 204.90829499999998, 'fat': 75.89196111111112, 'carbs': 307.3624425}, 'bmr': 1762.652, 'tdee': 2732.1106, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 23, 26, 10, 287000, tzinfo=datetime.timezone.utc)}, 'weight': '114', 'age': '23', 'vegan': False, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': '5', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 13, 37, 36, 256000, tzinfo=datetime.timezone.utc)}
Extra: {}

2025-06-08T17:01:41.426708 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:01:41.426708 - health_service - DEBUG - Calling calculate_bmi
Extra: {}

2025-06-08T17:01:41.426708 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': '187', 'goal': 'Lose Weight', 'smoking_history': 'never', 'sex': 'Male', 'blood_glucose': '95', 'location': 'California', 'heart_disease': 'No', 'last_metrics': {'bmi': 24.489795918367346, 'macros': {'protein': 204.90829499999998, 'fat': 75.89196111111112, 'carbs': 307.3624425}, 'bmr': 1762.652, 'tdee': 2732.1106, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 23, 26, 10, 287000, tzinfo=datetime.timezone.utc)}, 'weight': '114', 'age': '23', 'vegan': False, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': '5', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 13, 37, 36, 256000, tzinfo=datetime.timezone.utc)}
Extra: {}

2025-06-08T17:01:41.426708 - HealthService - DEBUG - BMI calculated: 32.60030312562555, Classification: obese
Extra: {}

2025-06-08T17:01:41.428085 - health_service - DEBUG - Function calculate_bmi completed successfully
Extra: {}

2025-06-08T17:01:41.428085 - health_service - DEBUG - Calling calculate_energy
Extra: {}

2025-06-08T17:01:41.428085 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': '187', 'goal': 'Lose Weight', 'smoking_history': 'never', 'sex': 'Male', 'blood_glucose': '95', 'location': 'California', 'heart_disease': 'No', 'last_metrics': {'bmi': 24.489795918367346, 'macros': {'protein': 204.90829499999998, 'fat': 75.89196111111112, 'carbs': 307.3624425}, 'bmr': 1762.652, 'tdee': 2732.1106, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 23, 26, 10, 287000, tzinfo=datetime.timezone.utc)}, 'weight': '114', 'age': '23', 'vegan': False, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': '5', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 13, 37, 36, 256000, tzinfo=datetime.timezone.utc)}
Extra: {}

2025-06-08T17:01:41.428085 - HealthService - DEBUG - Energy metrics calculated - BMR: 2382.46, TDEE: 3692.82
Extra: {}

2025-06-08T17:01:41.429090 - health_service - DEBUG - Function calculate_energy completed successfully
Extra: {}

2025-06-08T17:01:41.429090 - health_service - DEBUG - Calling calculate_macros
Extra: {}

2025-06-08T17:01:41.429090 - HealthService - DEBUG - Calculating macros for person info: {'ethnicity': 'Other', 'height': '187', 'goal': 'Lose Weight', 'smoking_history': 'never', 'sex': 'Male', 'blood_glucose': '95', 'location': 'California', 'heart_disease': 'No', 'last_metrics': {'bmi': 24.489795918367346, 'macros': {'protein': 204.90829499999998, 'fat': 75.89196111111112, 'carbs': 307.3624425}, 'bmr': 1762.652, 'tdee': 2732.1106, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 5, 23, 26, 10, 287000, tzinfo=datetime.timezone.utc)}, 'weight': '114', 'age': '23', 'vegan': False, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': '5', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 13, 37, 36, 256000, tzinfo=datetime.timezone.utc)}, calories: 3692.816100000001
Extra: {}

2025-06-08T17:01:41.430093 - HealthService - DEBUG - Macros calculated: {'protein': 276.96120750000006, 'fat': 102.57822500000003, 'carbs': 415.4418112500001}
Extra: {}

2025-06-08T17:01:41.430093 - health_service - DEBUG - Function calculate_macros completed successfully
Extra: {}

2025-06-08T17:01:42.175431 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:01:42.311862 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:01:42.311862 - UserService - DEBUG - Getting user data for user_id: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
Extra: {}

2025-06-08T17:01:42.311862 - UserService - DEBUG - Getting user data for user_id: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
Extra: {}

2025-06-08T17:01:42.528536 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '187', 'goal': 'Lose Weight', 'smoking_history': 'never', 'sex': 'Male', 'blood_glucose': '95', 'location': 'California', 'heart_disease': 'No', 'last_metrics': {'bmi': 32.60030312562555, 'macros': {'protein': 276.96120750000006, 'fat': 102.57822500000003, 'carbs': 415.4418112500001}, 'bmr': 2382.4620000000004, 'tdee': 3692.816100000001, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 1, 38, 188000, tzinfo=datetime.timezone.utc)}, 'weight': '114', 'age': '23', 'vegan': False, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': '5', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 13, 37, 36, 256000, tzinfo=datetime.timezone.utc)}
Extra: {}

2025-06-08T17:01:42.528536 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '187', 'goal': 'Lose Weight', 'smoking_history': 'never', 'sex': 'Male', 'blood_glucose': '95', 'location': 'California', 'heart_disease': 'No', 'last_metrics': {'bmi': 32.60030312562555, 'macros': {'protein': 276.96120750000006, 'fat': 102.57822500000003, 'carbs': 415.4418112500001}, 'bmr': 2382.4620000000004, 'tdee': 3692.816100000001, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 1, 38, 188000, tzinfo=datetime.timezone.utc)}, 'weight': '114', 'age': '23', 'vegan': False, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': '5', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 13, 37, 36, 256000, tzinfo=datetime.timezone.utc)}
Extra: {}

2025-06-08T17:01:42.528536 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:02:04.224873 - health_routes - INFO - API Request: GET http://192.168.1.25:5000/api/health/advice
Extra: {}

2025-06-08T17:02:04.787628 - health_routes - INFO - API Response: GET http://192.168.1.25:5000/api/health/advice
Extra: {}

2025-06-08T17:02:39.036323 - app - INFO - Starting application
Extra: {}

2025-06-08T17:02:39.037328 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T17:02:39.037328 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T17:02:39.039337 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T17:02:39.039337 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T17:02:39.116059 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T17:02:39.116059 - app - INFO - Loading ML model
Extra: {}

2025-06-08T17:02:41.014056 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T17:02:41.014704 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T17:02:41.015986 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T17:02:41.015986 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T17:02:41.157427 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T17:02:41.157427 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T17:02:41.157427 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T17:02:41.157427 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T17:02:41.157427 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T17:02:41.157427 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T17:02:41.157427 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T17:02:41.157427 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T17:02:41.157427 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T17:02:41.179250 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T17:02:41.202147 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T17:02:41.202147 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T17:02:41.202147 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T17:02:41.216525 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T17:02:41.218543 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T17:02:41.219615 - app - INFO - Application created successfully
Extra: {}

2025-06-08T17:03:10.070070 - app - INFO - Starting application
Extra: {}

2025-06-08T17:03:10.070070 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T17:03:10.070070 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T17:03:10.076627 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T17:03:10.076627 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T17:03:10.131689 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T17:03:10.131689 - app - INFO - Loading ML model
Extra: {}

2025-06-08T17:03:11.539908 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T17:03:11.540314 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T17:03:11.541943 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T17:03:11.542751 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T17:03:11.661167 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T17:03:11.661167 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T17:03:11.661167 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T17:03:11.661167 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T17:03:11.661167 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T17:03:11.661167 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T17:03:11.661167 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T17:03:11.661167 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T17:03:11.661167 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T17:03:11.683466 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T17:03:11.703357 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T17:03:11.703357 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T17:03:11.703357 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T17:03:11.711699 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T17:03:11.711699 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T17:03:11.713167 - app - INFO - Application created successfully
Extra: {}

2025-06-08T17:03:15.460769 - health_routes - INFO - API Request: GET http://192.168.1.25:5000/api/health/advice
Extra: {}

2025-06-08T17:03:16.684110 - health_routes - INFO - API Response: GET http://192.168.1.25:5000/api/health/advice
Extra: {}

2025-06-08T17:03:18.992853 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/advice
Extra: {}

2025-06-08T17:03:18.992853 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:03:18.992853 - UserService - DEBUG - Getting user data for user_id: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
Extra: {}

2025-06-08T17:03:18.992853 - UserService - DEBUG - Getting user data for user_id: Gcxg1VaLhFbx31JM4mDKwIOqE2u1
Extra: {}

2025-06-08T17:03:19.210205 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '187', 'goal': 'Lose Weight', 'smoking_history': 'never', 'sex': 'Male', 'blood_glucose': '95', 'location': 'California', 'heart_disease': 'No', 'last_metrics': {'bmi': 32.60030312562555, 'macros': {'protein': 276.96120750000006, 'fat': 102.57822500000003, 'carbs': 415.4418112500001}, 'bmr': 2382.4620000000004, 'tdee': 3692.816100000001, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 1, 38, 188000, tzinfo=datetime.timezone.utc)}, 'weight': '114', 'age': '23', 'vegan': False, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': '5', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 13, 37, 36, 256000, tzinfo=datetime.timezone.utc)}
Extra: {}

2025-06-08T17:03:19.210205 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '187', 'goal': 'Lose Weight', 'smoking_history': 'never', 'sex': 'Male', 'blood_glucose': '95', 'location': 'California', 'heart_disease': 'No', 'last_metrics': {'bmi': 32.60030312562555, 'macros': {'protein': 276.96120750000006, 'fat': 102.57822500000003, 'carbs': 415.4418112500001}, 'bmr': 2382.4620000000004, 'tdee': 3692.816100000001, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 1, 38, 188000, tzinfo=datetime.timezone.utc)}, 'weight': '114', 'age': '23', 'vegan': False, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': '5', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 13, 37, 36, 256000, tzinfo=datetime.timezone.utc)}
Extra: {}

2025-06-08T17:03:19.210205 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:03:19.210205 - health_service - DEBUG - Calling calculate_bmi
Extra: {}

2025-06-08T17:03:19.210205 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': '187', 'goal': 'Lose Weight', 'smoking_history': 'never', 'sex': 'Male', 'blood_glucose': '95', 'location': 'California', 'heart_disease': 'No', 'last_metrics': {'bmi': 32.60030312562555, 'macros': {'protein': 276.96120750000006, 'fat': 102.57822500000003, 'carbs': 415.4418112500001}, 'bmr': 2382.4620000000004, 'tdee': 3692.816100000001, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 1, 38, 188000, tzinfo=datetime.timezone.utc)}, 'weight': '114', 'age': '23', 'vegan': False, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': '5', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 13, 37, 36, 256000, tzinfo=datetime.timezone.utc)}
Extra: {}

2025-06-08T17:03:19.210205 - HealthService - DEBUG - BMI calculated: 32.60030312562555, Classification: obese
Extra: {}

2025-06-08T17:03:19.210205 - health_service - DEBUG - Function calculate_bmi completed successfully
Extra: {}

2025-06-08T17:03:19.210205 - health_service - DEBUG - Calling calculate_energy
Extra: {}

2025-06-08T17:03:19.210205 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': '187', 'goal': 'Lose Weight', 'smoking_history': 'never', 'sex': 'Male', 'blood_glucose': '95', 'location': 'California', 'heart_disease': 'No', 'last_metrics': {'bmi': 32.60030312562555, 'macros': {'protein': 276.96120750000006, 'fat': 102.57822500000003, 'carbs': 415.4418112500001}, 'bmr': 2382.4620000000004, 'tdee': 3692.816100000001, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 1, 38, 188000, tzinfo=datetime.timezone.utc)}, 'weight': '114', 'age': '23', 'vegan': False, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': '5', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 13, 37, 36, 256000, tzinfo=datetime.timezone.utc)}
Extra: {}

2025-06-08T17:03:19.210205 - HealthService - DEBUG - Energy metrics calculated - BMR: 2382.46, TDEE: 3692.82
Extra: {}

2025-06-08T17:03:19.210205 - health_service - DEBUG - Function calculate_energy completed successfully
Extra: {}

2025-06-08T17:03:19.210205 - AIService - DEBUG - Calling generate_health_advice
Extra: {}

2025-06-08T17:03:19.210205 - AIService - DEBUG - Generating health advice for user data: {'ethnicity': 'Other', 'height': '187', 'goal': 'Lose Weight', 'smoking_history': 'never', 'sex': 'Male', 'blood_glucose': '95', 'location': 'California', 'heart_disease': 'No', 'last_metrics': {'bmi': 32.60030312562555, 'macros': {'protein': 276.96120750000006, 'fat': 102.57822500000003, 'carbs': 415.4418112500001}, 'bmr': 2382.4620000000004, 'tdee': 3692.816100000001, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 1, 38, 188000, tzinfo=datetime.timezone.utc)}, 'weight': '114', 'age': '23', 'vegan': False, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': '5', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 13, 37, 36, 256000, tzinfo=datetime.timezone.utc)}
Extra: {}

2025-06-08T17:03:19.210205 - AIService - DEBUG - Metrics: {'bmi': 32.60030312562555, 'bmi_class': 'obese', 'bmr': 2382.4620000000004, 'tdee': 3692.816100000001}
Extra: {}

2025-06-08T17:03:19.210205 - AIService - DEBUG - Getting response for prompt: 
        Provide comprehensive health advice for:
        - 23 year old Male
        - Height: 187m,...
Extra: {}

2025-06-08T17:03:19.210205 - AIService - DEBUG - Output class: HealthAdvice
Extra: {}

2025-06-08T17:03:22.926370 - AIService - DEBUG - Response received: [
  {
    "general_recommendations": "Given your BMI of 32.6, focusing on sustainable lifestyle chan...
Extra: {}

2025-06-08T17:03:22.926370 - AIService - DEBUG - Health advice generated successfully
Extra: {}

2025-06-08T17:03:22.926370 - AIService - DEBUG - Function generate_health_advice completed successfully
Extra: {}

2025-06-08T17:03:23.170055 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/advice
Extra: {}

2025-06-08T17:03:38.363779 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:03:38.365757 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:03:38.566707 - UserRoutes - INFO - User profile retrieved successfully
Extra: {}

2025-06-08T17:03:38.576596 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:06:57.244877 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:06:57.247907 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:06:57.622200 - UserRoutes - INFO - User profile not found
Extra: {}

2025-06-08T17:06:57.622200 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:07:49.653362 - user_service - DEBUG - Calling update_user
Extra: {}

2025-06-08T17:07:49.654343 - UserService - DEBUG - Updating user data for user_id: p3EXM5QqcOWTNHbw2Nfduw2SZ8w2
Extra: {}

2025-06-08T17:07:49.654343 - UserService - DEBUG - Updating user data for user_id: p3EXM5QqcOWTNHbw2Nfduw2SZ8w2
Extra: {}

2025-06-08T17:07:49.654343 - UserService - DEBUG - Update data: {'age': '21', 'sex': 'Female', 'height': '165', 'weight': '95', 'activity_level': 'Sedentary', 'goal': 'Lose Weight', 'ethnicity': 'Other', 'vegan': False, 'location': 'egypt', 'race': 'Other', 'hypertension': 'No', 'heart_disease': 'No', 'smoking_history': 'never', 'hba1c': '20', 'blood_glucose': '190'}
Extra: {}

2025-06-08T17:07:49.654343 - UserService - DEBUG - Update data: {'age': '21', 'sex': 'Female', 'height': '165', 'weight': '95', 'activity_level': 'Sedentary', 'goal': 'Lose Weight', 'ethnicity': 'Other', 'vegan': False, 'location': 'egypt', 'race': 'Other', 'hypertension': 'No', 'heart_disease': 'No', 'smoking_history': 'never', 'hba1c': '20', 'blood_glucose': '190'}
Extra: {}

2025-06-08T17:07:49.859596 - UserService - WARNING - User not found for update: p3EXM5QqcOWTNHbw2Nfduw2SZ8w2
Extra: {}

2025-06-08T17:07:49.859596 - UserService - WARNING - User not found for update: p3EXM5QqcOWTNHbw2Nfduw2SZ8w2
Extra: {}

2025-06-08T17:07:49.859596 - UserService - ERROR - Error updating user data: User not found
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\user_service.py", line 88, in update_user
    raise ValueError("User not found")
ValueError: User not found

2025-06-08T17:07:49.859596 - UserService - ERROR - Error updating user data: User not found
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\user_service.py", line 88, in update_user
    raise ValueError("User not found")
ValueError: User not found

2025-06-08T17:07:49.859596 - user_service - ERROR - Error in update_user
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\user_service.py", line 88, in update_user
    raise ValueError("User not found")
ValueError: User not found

2025-06-08T17:07:49.866791 - UserRoutes - ERROR - Error updating user: User not found
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\routes\user_routes.py", line 112, in update_user
    result = user_service.update_user(user_id, update_data)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\user_service.py", line 88, in update_user
    raise ValueError("User not found")
ValueError: User not found

2025-06-08T17:08:03.489782 - user_service - DEBUG - Calling update_user
Extra: {}

2025-06-08T17:08:03.489782 - UserService - DEBUG - Updating user data for user_id: p3EXM5QqcOWTNHbw2Nfduw2SZ8w2
Extra: {}

2025-06-08T17:08:03.490765 - UserService - DEBUG - Updating user data for user_id: p3EXM5QqcOWTNHbw2Nfduw2SZ8w2
Extra: {}

2025-06-08T17:08:03.490765 - UserService - DEBUG - Update data: {'age': '21', 'sex': 'Female', 'height': '165', 'weight': '95', 'activity_level': 'Sedentary', 'goal': 'Lose Weight', 'ethnicity': 'Other', 'vegan': False, 'location': 'egypt', 'race': 'Other', 'hypertension': 'No', 'heart_disease': 'No', 'smoking_history': 'never', 'hba1c': '20', 'blood_glucose': '190'}
Extra: {}

2025-06-08T17:08:03.490765 - UserService - DEBUG - Update data: {'age': '21', 'sex': 'Female', 'height': '165', 'weight': '95', 'activity_level': 'Sedentary', 'goal': 'Lose Weight', 'ethnicity': 'Other', 'vegan': False, 'location': 'egypt', 'race': 'Other', 'hypertension': 'No', 'heart_disease': 'No', 'smoking_history': 'never', 'hba1c': '20', 'blood_glucose': '190'}
Extra: {}

2025-06-08T17:08:03.696198 - UserService - WARNING - User not found for update: p3EXM5QqcOWTNHbw2Nfduw2SZ8w2
Extra: {}

2025-06-08T17:08:03.696198 - UserService - WARNING - User not found for update: p3EXM5QqcOWTNHbw2Nfduw2SZ8w2
Extra: {}

2025-06-08T17:08:03.696198 - UserService - ERROR - Error updating user data: User not found
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\user_service.py", line 88, in update_user
    raise ValueError("User not found")
ValueError: User not found

2025-06-08T17:08:03.696198 - UserService - ERROR - Error updating user data: User not found
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\user_service.py", line 88, in update_user
    raise ValueError("User not found")
ValueError: User not found

2025-06-08T17:08:03.696198 - user_service - ERROR - Error in update_user
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\user_service.py", line 88, in update_user
    raise ValueError("User not found")
ValueError: User not found

2025-06-08T17:08:03.696198 - UserRoutes - ERROR - Error updating user: User not found
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\routes\user_routes.py", line 112, in update_user
    result = user_service.update_user(user_id, update_data)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\user_service.py", line 88, in update_user
    raise ValueError("User not found")
ValueError: User not found

2025-06-08T17:12:08.980942 - app - INFO - Starting application
Extra: {}

2025-06-08T17:12:08.980942 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T17:12:08.980942 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T17:12:08.986158 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T17:12:08.987440 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T17:12:09.096477 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T17:12:09.096477 - app - INFO - Loading ML model
Extra: {}

2025-06-08T17:12:11.944619 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T17:12:11.946678 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T17:12:11.947685 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T17:12:11.947685 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T17:12:12.195113 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T17:12:12.195113 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T17:12:12.195113 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T17:12:12.199396 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T17:12:12.199396 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T17:12:12.199396 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T17:12:12.199396 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T17:12:12.199396 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T17:12:12.199396 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T17:12:12.221946 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T17:12:12.241358 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T17:12:12.241358 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T17:12:12.241358 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T17:12:12.249248 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T17:12:12.249248 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T17:12:12.249248 - app - INFO - Application created successfully
Extra: {}

2025-06-08T17:13:08.495987 - app - INFO - Starting application
Extra: {}

2025-06-08T17:13:08.495987 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T17:13:08.495987 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T17:13:08.495987 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T17:13:08.495987 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T17:13:08.562343 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T17:13:08.562343 - app - INFO - Loading ML model
Extra: {}

2025-06-08T17:13:10.051524 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T17:13:10.051524 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T17:13:10.067244 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T17:13:10.067244 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T17:13:10.156083 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T17:13:10.156083 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T17:13:10.156083 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T17:13:10.156083 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T17:13:10.156083 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T17:13:10.156083 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T17:13:10.156083 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T17:13:10.156083 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T17:13:10.156083 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T17:13:10.184436 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T17:13:10.204865 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T17:13:10.204865 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T17:13:10.207508 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T17:13:10.213063 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T17:13:10.213063 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T17:13:10.213063 - app - INFO - Application created successfully
Extra: {}

2025-06-08T17:14:38.253658 - app - INFO - Starting application
Extra: {}

2025-06-08T17:14:38.253658 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T17:14:38.253658 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T17:14:38.253658 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T17:14:38.253658 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T17:14:38.328140 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T17:14:38.328140 - app - INFO - Loading ML model
Extra: {}

2025-06-08T17:14:40.331922 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T17:14:40.331922 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T17:14:40.333406 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T17:14:40.333406 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T17:14:40.466093 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T17:14:40.466093 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T17:14:40.466093 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T17:14:40.466093 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T17:14:40.466093 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T17:14:40.469004 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T17:14:40.469907 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T17:14:40.470744 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T17:14:40.470744 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T17:14:40.490468 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T17:14:40.515272 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T17:14:40.515272 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T17:14:40.515272 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T17:14:40.523483 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T17:14:40.526978 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T17:14:40.527391 - app - INFO - Application created successfully
Extra: {}

2025-06-08T17:16:56.832018 - UserService - DEBUG - Creating new user with email: test@test.com
Extra: {}

2025-06-08T17:16:56.832018 - UserService - DEBUG - Creating new user with email: test@test.com
Extra: {}

2025-06-08T17:16:56.832018 - UserService - DEBUG - Additional data: {}
Extra: {}

2025-06-08T17:16:56.832018 - UserService - DEBUG - Additional data: {}
Extra: {}

2025-06-08T17:16:58.100357 - UserService - DEBUG - User data saved to Firestore: {'email': 'test@test.com', 'display_name': '', 'created_at': Sentinel: Value used to set a document field to the server timestamp., 'last_login': Sentinel: Value used to set a document field to the server timestamp.}
Extra: {}

2025-06-08T17:16:58.100357 - UserService - DEBUG - User data saved to Firestore: {'email': 'test@test.com', 'display_name': '', 'created_at': Sentinel: Value used to set a document field to the server timestamp., 'last_login': Sentinel: Value used to set a document field to the server timestamp.}
Extra: {}

2025-06-08T17:17:11.958136 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:17:11.971297 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:17:12.199596 - UserRoutes - INFO - User profile retrieved successfully
Extra: {}

2025-06-08T17:17:12.199596 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:17:58.568999 - user_service - DEBUG - Calling update_user
Extra: {}

2025-06-08T17:17:58.568999 - UserService - DEBUG - Updating user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:17:58.585112 - UserService - DEBUG - Updating user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:17:58.585112 - UserService - DEBUG - Update data: {'age': '21', 'sex': 'Female', 'height': '165', 'weight': '95', 'activity_level': 'Sedentary', 'goal': 'Lose Weight', 'ethnicity': 'Other', 'vegan': False, 'location': 'egypt', 'race': 'Other', 'hypertension': 'No', 'heart_disease': 'No', 'smoking_history': 'never', 'hba1c': '20', 'blood_glucose': '190'}
Extra: {}

2025-06-08T17:17:58.585112 - UserService - DEBUG - Update data: {'age': '21', 'sex': 'Female', 'height': '165', 'weight': '95', 'activity_level': 'Sedentary', 'goal': 'Lose Weight', 'ethnicity': 'Other', 'vegan': False, 'location': 'egypt', 'race': 'Other', 'hypertension': 'No', 'heart_disease': 'No', 'smoking_history': 'never', 'hba1c': '20', 'blood_glucose': '190'}
Extra: {}

2025-06-08T17:17:59.351450 - UserService - DEBUG - User data updated successfully. Updated fields: ['age', 'sex', 'height', 'weight', 'activity_level', 'goal', 'ethnicity', 'vegan', 'location', 'race', 'hypertension', 'heart_disease', 'smoking_history', 'hba1c', 'blood_glucose']
Extra: {}

2025-06-08T17:17:59.367223 - UserService - DEBUG - User data updated successfully. Updated fields: ['age', 'sex', 'height', 'weight', 'activity_level', 'goal', 'ethnicity', 'vegan', 'location', 'race', 'hypertension', 'heart_disease', 'smoking_history', 'hba1c', 'blood_glucose']
Extra: {}

2025-06-08T17:17:59.367223 - user_service - DEBUG - Function update_user completed successfully
Extra: {}

2025-06-08T17:18:05.966031 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/diabetes_check
Extra: {}

2025-06-08T17:18:05.982030 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:18:05.982030 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:18:05.982030 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:18:06.277568 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '165', 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'egypt', 'blood_glucose': '190', 'weight': '95', 'heart_disease': 'No', 'age': '21', 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:18:06.277568 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '165', 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'egypt', 'blood_glucose': '190', 'weight': '95', 'heart_disease': 'No', 'age': '21', 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:18:06.277568 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:18:06.277568 - health_service - DEBUG - Calling check_diabetes_risk
Extra: {}

2025-06-08T17:18:06.277568 - HealthService - DEBUG - Checking diabetes risk for user data: {'ethnicity': 'Other', 'height': '165', 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'egypt', 'blood_glucose': '190', 'weight': '95', 'heart_disease': 'No', 'age': '21', 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:18:06.277568 - HealthService - ERROR - Error checking diabetes risk: 'egypt'
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 125, in check_diabetes_risk
    "location": [location_encoding[user_data['location']]],
KeyError: 'egypt'

2025-06-08T17:18:06.277568 - health_service - ERROR - Error in check_diabetes_risk
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 125, in check_diabetes_risk
    "location": [location_encoding[user_data['location']]],
KeyError: 'egypt'

2025-06-08T17:18:06.277568 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/diabetes_check
Extra: {}

2025-06-08T17:18:10.452351 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:18:10.452351 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:18:10.452351 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:18:10.682760 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '165', 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'egypt', 'blood_glucose': '190', 'weight': '95', 'heart_disease': 'No', 'age': '21', 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:18:10.682760 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '165', 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'egypt', 'blood_glucose': '190', 'weight': '95', 'heart_disease': 'No', 'age': '21', 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:18:10.682760 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:18:14.530238 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:18:14.530238 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:18:14.530238 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:18:14.530238 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:18:14.768646 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '165', 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'egypt', 'blood_glucose': '190', 'weight': '95', 'heart_disease': 'No', 'age': '21', 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:18:14.768646 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '165', 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'egypt', 'blood_glucose': '190', 'weight': '95', 'heart_disease': 'No', 'age': '21', 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:18:14.768646 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:18:14.768646 - health_service - DEBUG - Calling calculate_bmi
Extra: {}

2025-06-08T17:18:14.768646 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': '165', 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'egypt', 'blood_glucose': '190', 'weight': '95', 'heart_disease': 'No', 'age': '21', 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:18:14.768646 - HealthService - DEBUG - BMI calculated: 34.894398530762174, Classification: obese
Extra: {}

2025-06-08T17:18:14.768646 - health_service - DEBUG - Function calculate_bmi completed successfully
Extra: {}

2025-06-08T17:18:14.768646 - health_service - DEBUG - Calling calculate_energy
Extra: {}

2025-06-08T17:18:14.768646 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': '165', 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'egypt', 'blood_glucose': '190', 'weight': '95', 'heart_disease': 'No', 'age': '21', 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:18:14.768646 - HealthService - DEBUG - Energy metrics calculated - BMR: 1746.63, TDEE: 2095.95
Extra: {}

2025-06-08T17:18:14.768646 - health_service - DEBUG - Function calculate_energy completed successfully
Extra: {}

2025-06-08T17:18:14.768646 - health_service - DEBUG - Calling calculate_macros
Extra: {}

2025-06-08T17:18:14.768646 - HealthService - DEBUG - Calculating macros for person info: {'ethnicity': 'Other', 'height': '165', 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'egypt', 'blood_glucose': '190', 'weight': '95', 'heart_disease': 'No', 'age': '21', 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}, calories: 2095.9536
Extra: {}

2025-06-08T17:18:14.784607 - HealthService - DEBUG - Macros calculated: {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}
Extra: {}

2025-06-08T17:18:14.784607 - health_service - DEBUG - Function calculate_macros completed successfully
Extra: {}

2025-06-08T17:18:15.393761 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:18:15.604481 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:18:15.604481 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:18:15.604481 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:18:15.896035 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '165', 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'egypt', 'blood_glucose': '190', 'weight': '95', 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 18, 11, 313000, tzinfo=datetime.timezone.utc)}, 'heart_disease': 'No', 'age': '21', 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:18:15.896035 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '165', 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'egypt', 'blood_glucose': '190', 'weight': '95', 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 18, 11, 313000, tzinfo=datetime.timezone.utc)}, 'heart_disease': 'No', 'age': '21', 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:18:15.896035 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:18:26.607525 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/diabetes_check
Extra: {}

2025-06-08T17:18:26.607525 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:18:26.607525 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:18:26.607525 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:18:27.434054 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '165', 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'egypt', 'blood_glucose': '190', 'weight': '95', 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 18, 11, 313000, tzinfo=datetime.timezone.utc)}, 'heart_disease': 'No', 'age': '21', 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:18:27.434054 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '165', 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'egypt', 'blood_glucose': '190', 'weight': '95', 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 18, 11, 313000, tzinfo=datetime.timezone.utc)}, 'heart_disease': 'No', 'age': '21', 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:18:27.435803 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:18:27.435803 - health_service - DEBUG - Calling check_diabetes_risk
Extra: {}

2025-06-08T17:18:27.435803 - HealthService - DEBUG - Checking diabetes risk for user data: {'ethnicity': 'Other', 'height': '165', 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'egypt', 'blood_glucose': '190', 'weight': '95', 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 18, 11, 313000, tzinfo=datetime.timezone.utc)}, 'heart_disease': 'No', 'age': '21', 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:18:27.437811 - HealthService - ERROR - Error checking diabetes risk: 'egypt'
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 125, in check_diabetes_risk
    "location": [location_encoding[user_data['location']]],
KeyError: 'egypt'

2025-06-08T17:18:27.437811 - health_service - ERROR - Error in check_diabetes_risk
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 125, in check_diabetes_risk
    "location": [location_encoding[user_data['location']]],
KeyError: 'egypt'

2025-06-08T17:18:27.437811 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/diabetes_check
Extra: {}

2025-06-08T17:18:30.351444 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:18:30.351444 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:18:30.571154 - UserRoutes - INFO - User profile retrieved successfully
Extra: {}

2025-06-08T17:18:30.571154 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:19:12.675862 - user_service - DEBUG - Calling update_user
Extra: {}

2025-06-08T17:19:12.675862 - UserService - DEBUG - Updating user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:19:12.677870 - UserService - DEBUG - Updating user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:19:12.677870 - UserService - DEBUG - Update data: {'age': '21', 'sex': 'Female', 'height': '165', 'weight': '95', 'activity_level': 'Sedentary', 'goal': 'Lose Weight', 'ethnicity': 'Other', 'vegan': False, 'location': 'california ', 'race': 'Other', 'hypertension': 'No', 'heart_disease': 'No', 'smoking_history': 'never', 'hba1c': '20', 'blood_glucose': '190'}
Extra: {}

2025-06-08T17:19:12.677870 - UserService - DEBUG - Update data: {'age': '21', 'sex': 'Female', 'height': '165', 'weight': '95', 'activity_level': 'Sedentary', 'goal': 'Lose Weight', 'ethnicity': 'Other', 'vegan': False, 'location': 'california ', 'race': 'Other', 'hypertension': 'No', 'heart_disease': 'No', 'smoking_history': 'never', 'hba1c': '20', 'blood_glucose': '190'}
Extra: {}

2025-06-08T17:19:13.452760 - UserService - DEBUG - User data updated successfully. Updated fields: ['age', 'sex', 'height', 'weight', 'activity_level', 'goal', 'ethnicity', 'vegan', 'location', 'race', 'hypertension', 'heart_disease', 'smoking_history', 'hba1c', 'blood_glucose']
Extra: {}

2025-06-08T17:19:13.452760 - UserService - DEBUG - User data updated successfully. Updated fields: ['age', 'sex', 'height', 'weight', 'activity_level', 'goal', 'ethnicity', 'vegan', 'location', 'race', 'hypertension', 'heart_disease', 'smoking_history', 'hba1c', 'blood_glucose']
Extra: {}

2025-06-08T17:19:13.452760 - user_service - DEBUG - Function update_user completed successfully
Extra: {}

2025-06-08T17:19:16.038358 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:19:16.038358 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:19:16.038358 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:19:16.277024 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '165', 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'california ', 'blood_glucose': '190', 'weight': '95', 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 18, 11, 313000, tzinfo=datetime.timezone.utc)}, 'heart_disease': 'No', 'age': '21', 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:19:16.277024 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '165', 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'california ', 'blood_glucose': '190', 'weight': '95', 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 18, 11, 313000, tzinfo=datetime.timezone.utc)}, 'heart_disease': 'No', 'age': '21', 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:19:16.277024 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:19:16.883824 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:19:16.883824 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:19:16.883824 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:19:16.883824 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:19:17.089539 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '165', 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'california ', 'blood_glucose': '190', 'weight': '95', 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 18, 11, 313000, tzinfo=datetime.timezone.utc)}, 'heart_disease': 'No', 'age': '21', 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:19:17.089539 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '165', 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'california ', 'blood_glucose': '190', 'weight': '95', 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 18, 11, 313000, tzinfo=datetime.timezone.utc)}, 'heart_disease': 'No', 'age': '21', 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:19:17.089539 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:19:17.089539 - health_service - DEBUG - Calling calculate_bmi
Extra: {}

2025-06-08T17:19:17.089539 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': '165', 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'california ', 'blood_glucose': '190', 'weight': '95', 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 18, 11, 313000, tzinfo=datetime.timezone.utc)}, 'heart_disease': 'No', 'age': '21', 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:19:17.089539 - HealthService - DEBUG - BMI calculated: 34.894398530762174, Classification: obese
Extra: {}

2025-06-08T17:19:17.089539 - health_service - DEBUG - Function calculate_bmi completed successfully
Extra: {}

2025-06-08T17:19:17.089539 - health_service - DEBUG - Calling calculate_energy
Extra: {}

2025-06-08T17:19:17.089539 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': '165', 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'california ', 'blood_glucose': '190', 'weight': '95', 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 18, 11, 313000, tzinfo=datetime.timezone.utc)}, 'heart_disease': 'No', 'age': '21', 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:19:17.089539 - HealthService - DEBUG - Energy metrics calculated - BMR: 1746.63, TDEE: 2095.95
Extra: {}

2025-06-08T17:19:17.089539 - health_service - DEBUG - Function calculate_energy completed successfully
Extra: {}

2025-06-08T17:19:17.089539 - health_service - DEBUG - Calling calculate_macros
Extra: {}

2025-06-08T17:19:17.089539 - HealthService - DEBUG - Calculating macros for person info: {'ethnicity': 'Other', 'height': '165', 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'california ', 'blood_glucose': '190', 'weight': '95', 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 18, 11, 313000, tzinfo=datetime.timezone.utc)}, 'heart_disease': 'No', 'age': '21', 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}, calories: 2095.9536
Extra: {}

2025-06-08T17:19:17.089539 - HealthService - DEBUG - Macros calculated: {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}
Extra: {}

2025-06-08T17:19:17.089539 - health_service - DEBUG - Function calculate_macros completed successfully
Extra: {}

2025-06-08T17:19:17.696806 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:19:17.807654 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:19:17.807654 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:19:17.807654 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:19:18.015340 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '165', 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'california ', 'blood_glucose': '190', 'weight': '95', 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 19, 13, 673000, tzinfo=datetime.timezone.utc)}, 'heart_disease': 'No', 'age': '21', 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:19:18.015340 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '165', 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'california ', 'blood_glucose': '190', 'weight': '95', 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 19, 13, 673000, tzinfo=datetime.timezone.utc)}, 'heart_disease': 'No', 'age': '21', 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:19:18.015340 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:19:22.384372 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:19:22.384372 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:19:22.384372 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:19:22.657605 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '165', 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'california ', 'blood_glucose': '190', 'weight': '95', 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 19, 13, 673000, tzinfo=datetime.timezone.utc)}, 'heart_disease': 'No', 'age': '21', 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:19:22.657605 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '165', 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'california ', 'blood_glucose': '190', 'weight': '95', 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 19, 13, 673000, tzinfo=datetime.timezone.utc)}, 'heart_disease': 'No', 'age': '21', 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:19:22.657605 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:19:25.224208 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/diabetes_check
Extra: {}

2025-06-08T17:19:25.224697 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:19:25.225000 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:19:25.225000 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:19:25.418255 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '165', 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'california ', 'blood_glucose': '190', 'weight': '95', 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 19, 13, 673000, tzinfo=datetime.timezone.utc)}, 'heart_disease': 'No', 'age': '21', 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:19:25.418255 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': '165', 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'california ', 'blood_glucose': '190', 'weight': '95', 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 19, 13, 673000, tzinfo=datetime.timezone.utc)}, 'heart_disease': 'No', 'age': '21', 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:19:25.418255 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:19:25.418255 - health_service - DEBUG - Calling check_diabetes_risk
Extra: {}

2025-06-08T17:19:25.418255 - HealthService - DEBUG - Checking diabetes risk for user data: {'ethnicity': 'Other', 'height': '165', 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'california ', 'blood_glucose': '190', 'weight': '95', 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 19, 13, 673000, tzinfo=datetime.timezone.utc)}, 'heart_disease': 'No', 'age': '21', 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': 'No', 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:19:25.418255 - HealthService - ERROR - Error checking diabetes risk: 'california '
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 125, in check_diabetes_risk
    "location": [location_encoding[user_data['location']]],
KeyError: 'california '

2025-06-08T17:19:25.418255 - health_service - ERROR - Error in check_diabetes_risk
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 125, in check_diabetes_risk
    "location": [location_encoding[user_data['location']]],
KeyError: 'california '

2025-06-08T17:19:25.418255 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/diabetes_check
Extra: {}

2025-06-08T17:19:36.794639 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:19:36.811410 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:19:37.019523 - UserRoutes - INFO - User profile retrieved successfully
Extra: {}

2025-06-08T17:19:37.019523 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:21:15.482181 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:21:15.484321 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:21:16.435714 - UserRoutes - INFO - User profile retrieved successfully
Extra: {}

2025-06-08T17:21:16.435714 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:21:29.244115 - UserRoutes - INFO - API Request: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:21:29.246308 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:21:29.246308 - UserRoutes - DEBUG - Updating user profile
Extra: {}

2025-06-08T17:21:29.483420 - UserRoutes - INFO - User profile updated successfully
Extra: {}

2025-06-08T17:21:29.483420 - UserRoutes - INFO - API Response: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:21:32.563153 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:21:32.565159 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:21:32.565159 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:21:32.772992 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California ', 'blood_glucose': '190', 'weight': 95, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 19, 13, 673000, tzinfo=datetime.timezone.utc)}, 'blood_glucose_level': 95, 'age': 21, 'heart_disease': True, 'hba1c_level': 5, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:21:32.772992 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California ', 'blood_glucose': '190', 'weight': 95, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 19, 13, 673000, tzinfo=datetime.timezone.utc)}, 'blood_glucose_level': 95, 'age': 21, 'heart_disease': True, 'hba1c_level': 5, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:21:32.772992 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:21:33.642407 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:21:33.642407 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:21:33.642407 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:21:33.658246 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:21:33.863382 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California ', 'blood_glucose': '190', 'weight': 95, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 19, 13, 673000, tzinfo=datetime.timezone.utc)}, 'blood_glucose_level': 95, 'age': 21, 'heart_disease': True, 'hba1c_level': 5, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:21:33.866281 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California ', 'blood_glucose': '190', 'weight': 95, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 19, 13, 673000, tzinfo=datetime.timezone.utc)}, 'blood_glucose_level': 95, 'age': 21, 'heart_disease': True, 'hba1c_level': 5, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:21:33.866281 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:21:33.866281 - health_service - DEBUG - Calling calculate_bmi
Extra: {}

2025-06-08T17:21:33.867385 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California ', 'blood_glucose': '190', 'weight': 95, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 19, 13, 673000, tzinfo=datetime.timezone.utc)}, 'blood_glucose_level': 95, 'age': 21, 'heart_disease': True, 'hba1c_level': 5, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:21:33.867385 - HealthService - DEBUG - BMI calculated: 34.894398530762174, Classification: obese
Extra: {}

2025-06-08T17:21:33.867385 - health_service - DEBUG - Function calculate_bmi completed successfully
Extra: {}

2025-06-08T17:21:33.867385 - health_service - DEBUG - Calling calculate_energy
Extra: {}

2025-06-08T17:21:33.867385 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California ', 'blood_glucose': '190', 'weight': 95, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 19, 13, 673000, tzinfo=datetime.timezone.utc)}, 'blood_glucose_level': 95, 'age': 21, 'heart_disease': True, 'hba1c_level': 5, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:21:33.867385 - HealthService - DEBUG - Energy metrics calculated - BMR: 1746.63, TDEE: 2095.95
Extra: {}

2025-06-08T17:21:33.867385 - health_service - DEBUG - Function calculate_energy completed successfully
Extra: {}

2025-06-08T17:21:33.867385 - health_service - DEBUG - Calling calculate_macros
Extra: {}

2025-06-08T17:21:33.867385 - HealthService - DEBUG - Calculating macros for person info: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California ', 'blood_glucose': '190', 'weight': 95, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 19, 13, 673000, tzinfo=datetime.timezone.utc)}, 'blood_glucose_level': 95, 'age': 21, 'heart_disease': True, 'hba1c_level': 5, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}, calories: 2095.9536
Extra: {}

2025-06-08T17:21:33.867385 - HealthService - DEBUG - Macros calculated: {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}
Extra: {}

2025-06-08T17:21:33.867385 - health_service - DEBUG - Function calculate_macros completed successfully
Extra: {}

2025-06-08T17:21:34.435328 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:21:34.665489 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:21:34.665489 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:21:34.665489 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:21:34.864046 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California ', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 21, 30, 449000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:21:34.864046 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California ', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 21, 30, 449000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:21:34.864046 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:21:40.993968 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/diabetes_check
Extra: {}

2025-06-08T17:21:40.993968 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:21:40.993968 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:21:40.993968 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:21:41.218790 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California ', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 21, 30, 449000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:21:41.218790 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California ', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 21, 30, 449000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:21:41.220804 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:21:41.220804 - health_service - DEBUG - Calling check_diabetes_risk
Extra: {}

2025-06-08T17:21:41.220804 - HealthService - DEBUG - Checking diabetes risk for user data: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California ', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 21, 30, 449000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:21:41.220804 - HealthService - ERROR - Error checking diabetes risk: 'California '
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 125, in check_diabetes_risk
    "location": [location_encoding[user_data['location']]],
KeyError: 'California '

2025-06-08T17:21:41.220804 - health_service - ERROR - Error in check_diabetes_risk
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 125, in check_diabetes_risk
    "location": [location_encoding[user_data['location']]],
KeyError: 'California '

2025-06-08T17:21:41.220804 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/diabetes_check
Extra: {}

2025-06-08T17:22:21.384724 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T17:22:21.385923 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T17:22:21.596010 - user_service - INFO - Chat history retrieved successfully
Extra: {}

2025-06-08T17:22:21.596010 - user_service - DEBUG - Function get_chat_history completed successfully
Extra: {}

2025-06-08T17:22:30.393414 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:22:30.396347 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:22:30.671502 - UserRoutes - INFO - User profile retrieved successfully
Extra: {}

2025-06-08T17:22:30.671502 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:22:36.914289 - UserRoutes - INFO - API Request: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:22:36.914289 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:22:36.914289 - UserRoutes - DEBUG - Updating user profile
Extra: {}

2025-06-08T17:22:37.145260 - UserRoutes - INFO - User profile updated successfully
Extra: {}

2025-06-08T17:22:37.145260 - UserRoutes - INFO - API Response: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:22:41.234056 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/diabetes_check
Extra: {}

2025-06-08T17:22:41.234056 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:22:41.234056 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:22:41.234056 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:22:41.428566 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 21, 30, 449000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:22:41.428566 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 21, 30, 449000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:22:41.428566 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:22:41.428566 - health_service - DEBUG - Calling check_diabetes_risk
Extra: {}

2025-06-08T17:22:41.428566 - HealthService - DEBUG - Checking diabetes risk for user data: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 21, 30, 449000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:22:41.428566 - HealthService - DEBUG - Prepared input data for diabetes prediction: {'year': [2022], 'gender': [0], 'age': [21], 'location': [4], 'africanamerican': [0], 'asian': [0], 'caucasian': [0], 'hispanic': [0], 'other': [1], 'hypertension': [0], 'heart_disease': [0], 'smoking_history': [4], 'bmi': [34.894398530762174], 'hbA1c_level': ['20'], 'blood_glucose_level': ['190']}
Extra: {}

2025-06-08T17:22:41.520518 - HealthService - DEBUG - Diabetes risk prediction: {'prediction': 'yes', 'prediction_code': 1}
Extra: {}

2025-06-08T17:22:41.520518 - health_service - DEBUG - Function check_diabetes_risk completed successfully
Extra: {}

2025-06-08T17:22:41.989391 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/diabetes_check
Extra: {}

2025-06-08T17:22:51.366223 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:22:51.366223 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:22:51.567482 - UserRoutes - INFO - User profile retrieved successfully
Extra: {}

2025-06-08T17:22:51.567482 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:22:58.017088 - UserRoutes - INFO - API Request: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:22:58.024080 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:22:58.025015 - UserRoutes - DEBUG - Updating user profile
Extra: {}

2025-06-08T17:22:58.234171 - UserRoutes - INFO - User profile updated successfully
Extra: {}

2025-06-08T17:22:58.234171 - UserRoutes - INFO - API Response: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:23:04.094215 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:23:04.094215 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:23:04.094215 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:23:04.299635 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 21, 30, 449000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:23:04.299635 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 21, 30, 449000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:23:04.299635 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:23:04.552619 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:23:04.552619 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:23:04.552619 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:23:04.552619 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:23:04.878671 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 21, 30, 449000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:23:04.884140 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 21, 30, 449000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:23:04.886145 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:23:04.886145 - health_service - DEBUG - Calling calculate_bmi
Extra: {}

2025-06-08T17:23:04.887858 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 21, 30, 449000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:23:04.887858 - HealthService - DEBUG - BMI calculated: 34.894398530762174, Classification: obese
Extra: {}

2025-06-08T17:23:04.887858 - health_service - DEBUG - Function calculate_bmi completed successfully
Extra: {}

2025-06-08T17:23:04.887858 - health_service - DEBUG - Calling calculate_energy
Extra: {}

2025-06-08T17:23:04.887858 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 21, 30, 449000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:23:04.887858 - HealthService - DEBUG - Energy metrics calculated - BMR: 1746.63, TDEE: 2095.95
Extra: {}

2025-06-08T17:23:04.887858 - health_service - DEBUG - Function calculate_energy completed successfully
Extra: {}

2025-06-08T17:23:04.887858 - health_service - DEBUG - Calling calculate_macros
Extra: {}

2025-06-08T17:23:04.889870 - HealthService - DEBUG - Calculating macros for person info: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 21, 30, 449000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}, calories: 2095.9536
Extra: {}

2025-06-08T17:23:04.889870 - HealthService - DEBUG - Macros calculated: {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}
Extra: {}

2025-06-08T17:23:04.889870 - health_service - DEBUG - Function calculate_macros completed successfully
Extra: {}

2025-06-08T17:23:05.387705 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:23:05.595416 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:23:05.595416 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:23:05.595416 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:23:05.801155 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 23, 1, 344000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:23:05.803172 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 23, 1, 344000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:23:05.803172 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:23:08.182100 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/diabetes_check
Extra: {}

2025-06-08T17:23:08.182100 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:23:08.182100 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:23:08.182100 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:23:08.460846 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 23, 1, 344000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:23:08.460846 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 23, 1, 344000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:23:08.460846 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:23:08.460846 - health_service - DEBUG - Calling check_diabetes_risk
Extra: {}

2025-06-08T17:23:08.460846 - HealthService - DEBUG - Checking diabetes risk for user data: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 23, 1, 344000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:23:08.460846 - HealthService - DEBUG - Prepared input data for diabetes prediction: {'year': [2022], 'gender': [0], 'age': [21], 'location': [4], 'africanamerican': [0], 'asian': [0], 'caucasian': [0], 'hispanic': [0], 'other': [1], 'hypertension': [0], 'heart_disease': [0], 'smoking_history': [4], 'bmi': [34.894398530762174], 'hbA1c_level': ['20'], 'blood_glucose_level': ['190']}
Extra: {}

2025-06-08T17:23:08.493100 - HealthService - DEBUG - Diabetes risk prediction: {'prediction': 'yes', 'prediction_code': 1}
Extra: {}

2025-06-08T17:23:08.493100 - health_service - DEBUG - Function check_diabetes_risk completed successfully
Extra: {}

2025-06-08T17:23:08.970637 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/diabetes_check
Extra: {}

2025-06-08T17:23:10.831686 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/diabetes_check
Extra: {}

2025-06-08T17:23:10.833694 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:23:10.834470 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:23:10.834470 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:23:11.031624 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 23, 1, 344000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:23:11.031624 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 23, 1, 344000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:23:11.031624 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:23:11.031624 - health_service - DEBUG - Calling check_diabetes_risk
Extra: {}

2025-06-08T17:23:11.041060 - HealthService - DEBUG - Checking diabetes risk for user data: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 23, 1, 344000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:23:11.041060 - HealthService - DEBUG - Prepared input data for diabetes prediction: {'year': [2022], 'gender': [0], 'age': [21], 'location': [4], 'africanamerican': [0], 'asian': [0], 'caucasian': [0], 'hispanic': [0], 'other': [1], 'hypertension': [0], 'heart_disease': [0], 'smoking_history': [4], 'bmi': [34.894398530762174], 'hbA1c_level': ['20'], 'blood_glucose_level': ['190']}
Extra: {}

2025-06-08T17:23:11.074413 - HealthService - DEBUG - Diabetes risk prediction: {'prediction': 'yes', 'prediction_code': 1}
Extra: {}

2025-06-08T17:23:11.075648 - health_service - DEBUG - Function check_diabetes_risk completed successfully
Extra: {}

2025-06-08T17:23:11.737604 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/diabetes_check
Extra: {}

2025-06-08T17:23:13.695430 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T17:23:13.695430 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T17:23:13.908952 - user_service - INFO - Chat history retrieved successfully
Extra: {}

2025-06-08T17:23:13.908952 - user_service - DEBUG - Function get_chat_history completed successfully
Extra: {}

2025-06-08T17:23:32.735356 - UserRoutes - INFO - API Request: POST http://192.168.1.25:5000/api/user/chat
Extra: {}

2025-06-08T17:23:32.735356 - UserRoutes - DEBUG - Processing chat message
Extra: {}

2025-06-08T17:23:32.738807 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T17:23:32.738807 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T17:23:32.931668 - user_service - INFO - Chat history retrieved successfully
Extra: {}

2025-06-08T17:23:32.931668 - user_service - DEBUG - Function get_chat_history completed successfully
Extra: {}

2025-06-08T17:23:42.000547 - UserRoutes - DEBUG - Saving chat to Firestore
Extra: {}

2025-06-08T17:23:42.000547 - user_service - DEBUG - Calling save_chat_message
Extra: {}

2025-06-08T17:23:42.000547 - user_service - INFO - Saving chat message
Extra: {}

2025-06-08T17:23:42.854494 - user_service - INFO - Chat message saved successfully
Extra: {}

2025-06-08T17:23:42.854494 - user_service - DEBUG - Function save_chat_message completed successfully
Extra: {}

2025-06-08T17:23:42.854494 - UserRoutes - INFO - Chat processed successfully
Extra: {}

2025-06-08T17:23:42.854494 - UserRoutes - INFO - API Response: POST http://192.168.1.25:5000/api/user/chat
Extra: {}

2025-06-08T17:24:24.460843 - UserRoutes - INFO - API Request: POST http://192.168.1.25:5000/api/user/chat
Extra: {}

2025-06-08T17:24:24.460843 - UserRoutes - DEBUG - Processing chat message
Extra: {}

2025-06-08T17:24:24.460843 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T17:24:24.460843 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T17:24:24.748659 - user_service - INFO - Chat history retrieved successfully
Extra: {}

2025-06-08T17:24:24.750664 - user_service - DEBUG - Function get_chat_history completed successfully
Extra: {}

2025-06-08T17:24:31.816646 - UserRoutes - DEBUG - Saving chat to Firestore
Extra: {}

2025-06-08T17:24:31.816646 - user_service - DEBUG - Calling save_chat_message
Extra: {}

2025-06-08T17:24:31.816646 - user_service - INFO - Saving chat message
Extra: {}

2025-06-08T17:24:32.623714 - user_service - INFO - Chat message saved successfully
Extra: {}

2025-06-08T17:24:32.623714 - user_service - DEBUG - Function save_chat_message completed successfully
Extra: {}

2025-06-08T17:24:32.623714 - UserRoutes - INFO - Chat processed successfully
Extra: {}

2025-06-08T17:24:32.623714 - UserRoutes - INFO - API Response: POST http://192.168.1.25:5000/api/user/chat
Extra: {}

2025-06-08T17:25:03.510573 - food_routes - INFO - API Request: POST http://192.168.1.25:5000/api/food/recipes
Extra: {}

2025-06-08T17:25:03.510573 - food_routes - DEBUG - File received
Extra: {}

2025-06-08T17:25:03.522026 - food_routes - DEBUG - Saved uploaded file
Extra: {}

2025-06-08T17:25:03.523130 - food_routes - DEBUG - Initializing Clarifai model
Extra: {}

2025-06-08T17:25:03.538853 - food_routes - DEBUG - Running food recognition
Extra: {}

2025-06-08T17:25:04.469662 - food_routes - DEBUG - Food recognized
Extra: {}

2025-06-08T17:25:04.469662 - food_routes - DEBUG - Generating recipe
Extra: {}

2025-06-08T17:25:04.469662 - AIService - DEBUG - Calling generate_recipe
Extra: {}

2025-06-08T17:25:04.469662 - AIService - DEBUG - Generating recipe for food: almond
Extra: {}

2025-06-08T17:25:04.469662 - AIService - DEBUG - Getting response for prompt: Generate a recipe with almond.
        Return a Recipe object with recipeName, calories, protein, fa...
Extra: {}

2025-06-08T17:25:04.469662 - AIService - DEBUG - Output class: Recipe
Extra: {}

2025-06-08T17:25:05.530428 - AIService - DEBUG - Response received: [
  {
    "recipeName": "Almond Joy Energy Bites",
    "calories": 150,
    "protein": 5,
    "fats"...
Extra: {}

2025-06-08T17:25:05.530428 - AIService - DEBUG - Recipe generated successfully
Extra: {}

2025-06-08T17:25:05.530428 - AIService - DEBUG - Function generate_recipe completed successfully
Extra: {}

2025-06-08T17:25:05.530428 - food_routes - DEBUG - Saving recipe query to Firestore
Extra: {}

2025-06-08T17:25:05.811353 - food_routes - INFO - Recipe generated successfully
Extra: {}

2025-06-08T17:25:05.811353 - food_routes - DEBUG - Removed temporary file
Extra: {}

2025-06-08T17:25:05.823630 - food_routes - INFO - API Response: POST http://192.168.1.25:5000/api/food/recipes
Extra: {}

2025-06-08T17:25:20.613420 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:25:20.615433 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:25:20.615433 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:25:20.859255 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 23, 1, 344000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:25:20.859255 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 23, 1, 344000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:25:20.859255 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:25:23.066478 - health_routes - INFO - API Request: GET http://192.168.1.25:5000/api/health/advice
Extra: {}

2025-06-08T17:25:23.325194 - health_routes - INFO - API Response: GET http://192.168.1.25:5000/api/health/advice
Extra: {}

2025-06-08T17:25:24.132313 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/advice
Extra: {}

2025-06-08T17:25:24.140816 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:25:24.141804 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:25:24.141804 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:25:24.332048 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 23, 1, 344000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:25:24.332048 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 23, 1, 344000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:25:24.332048 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:25:24.332048 - health_service - DEBUG - Calling calculate_bmi
Extra: {}

2025-06-08T17:25:24.332048 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 23, 1, 344000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:25:24.332048 - HealthService - DEBUG - BMI calculated: 34.894398530762174, Classification: obese
Extra: {}

2025-06-08T17:25:24.332048 - health_service - DEBUG - Function calculate_bmi completed successfully
Extra: {}

2025-06-08T17:25:24.332048 - health_service - DEBUG - Calling calculate_energy
Extra: {}

2025-06-08T17:25:24.332048 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 23, 1, 344000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:25:24.332048 - HealthService - DEBUG - Energy metrics calculated - BMR: 1746.63, TDEE: 2095.95
Extra: {}

2025-06-08T17:25:24.332048 - health_service - DEBUG - Function calculate_energy completed successfully
Extra: {}

2025-06-08T17:25:24.332048 - AIService - DEBUG - Calling generate_health_advice
Extra: {}

2025-06-08T17:25:24.332048 - AIService - DEBUG - Generating health advice for user data: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 23, 1, 344000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:25:24.332048 - AIService - DEBUG - Metrics: {'bmi': 34.894398530762174, 'bmi_class': 'obese', 'bmr': 1746.628, 'tdee': 2095.9536}
Extra: {}

2025-06-08T17:25:24.332048 - AIService - DEBUG - Getting response for prompt: 
        Provide comprehensive health advice for:
        - 21 year old Female
        - Height: 165...
Extra: {}

2025-06-08T17:25:24.332048 - AIService - DEBUG - Output class: HealthAdvice
Extra: {}

2025-06-08T17:25:27.752464 - AIService - DEBUG - Response received: [
  {
    "general_recommendations": "Given your current weight and sedentary lifestyle, it's crucia...
Extra: {}

2025-06-08T17:25:27.752464 - AIService - DEBUG - Health advice generated successfully
Extra: {}

2025-06-08T17:25:27.752464 - AIService - DEBUG - Function generate_health_advice completed successfully
Extra: {}

2025-06-08T17:25:28.024288 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/advice
Extra: {}

2025-06-08T17:26:15.663216 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:26:15.663216 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:26:15.663216 - UserService - DEBUG - Getting user data for user_id: 03mKk1aAvMeVk95PXcxDqB4nfV23
Extra: {}

2025-06-08T17:26:15.951568 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 23, 1, 344000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:26:15.956732 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 23, 1, 344000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:26:15.956732 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:26:15.956732 - health_service - DEBUG - Calling calculate_bmi
Extra: {}

2025-06-08T17:26:15.957588 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 23, 1, 344000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:26:15.957588 - HealthService - DEBUG - BMI calculated: 34.894398530762174, Classification: obese
Extra: {}

2025-06-08T17:26:15.957588 - health_service - DEBUG - Function calculate_bmi completed successfully
Extra: {}

2025-06-08T17:26:15.957588 - health_service - DEBUG - Calling calculate_energy
Extra: {}

2025-06-08T17:26:15.957588 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 23, 1, 344000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:26:15.957588 - HealthService - DEBUG - Energy metrics calculated - BMR: 1746.63, TDEE: 2095.95
Extra: {}

2025-06-08T17:26:15.957588 - health_service - DEBUG - Function calculate_energy completed successfully
Extra: {}

2025-06-08T17:26:15.957588 - AIService - DEBUG - Calling generate_diet_plan
Extra: {}

2025-06-08T17:26:15.957588 - AIService - DEBUG - Generating diet plan for user data: {'ethnicity': 'Other', 'height': 165, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': '190', 'weight': 95, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 21, 'heart_disease': True, 'last_metrics': {'bmi': 34.894398530762174, 'macros': {'protein': 157.19652, 'fat': 58.22093333333333, 'carbs': 235.79477999999997}, 'bmr': 1746.628, 'tdee': 2095.9536, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 23, 1, 344000, tzinfo=datetime.timezone.utc)}, 'vegan': False, 'activity_level': 'Sedentary', 'race': 'Other', 'hba1c': '20', 'hypertension': True, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 16, 54, 100000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com', 'bmi': 34.894398530762174, 'bmr': 1746.628, 'tdee': 2095.9536}
Extra: {}

2025-06-08T17:26:15.957588 - AIService - DEBUG - Preferences: low carb
Extra: {}

2025-06-08T17:26:15.957588 - AIService - DEBUG - Getting response for prompt: Create a diet plan with the preferences: low carb and vegan: False 
        for a 21yo Other Female ...
Extra: {}

2025-06-08T17:26:15.957588 - AIService - DEBUG - Output class: DietPlan
Extra: {}

2025-06-08T17:26:18.313364 - AIService - DEBUG - Response received: [
  {
    "mealtime": "Breakfast",
    "foodItem": "Oatmeal with Berries and Nuts",
    "calories": ...
Extra: {}

2025-06-08T17:26:18.313364 - AIService - DEBUG - Diet plan generated successfully
Extra: {}

2025-06-08T17:26:18.313364 - AIService - DEBUG - Function generate_diet_plan completed successfully
Extra: {}

2025-06-08T17:27:51.737708 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:27:51.748826 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:27:52.695580 - UserRoutes - INFO - User profile not found
Extra: {}

2025-06-08T17:27:52.695580 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:31:08.471213 - UserRoutes - INFO - API Request: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:31:08.475309 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:31:08.481364 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:31:08.485274 - UserRoutes - DEBUG - Updating user profile
Extra: {}

2025-06-08T17:31:08.487292 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:31:16.276732 - UserRoutes - INFO - API Request: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:31:16.282931 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:31:16.282931 - UserRoutes - DEBUG - Updating user profile
Extra: {}

2025-06-08T17:31:55.153937 - UserRoutes - ERROR - Error updating user profile
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\grpc_helpers.py", line 76, in error_remapped_callable
    return callable_(*args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\grpc\_interceptor.py", line 277, in __call__
    response, ignored_call = self._with_call(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\grpc\_interceptor.py", line 332, in _with_call
    return call.result(), call
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\grpc\_channel.py", line 440, in result
    raise self
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\grpc\_interceptor.py", line 315, in continuation
    response, call = self._thunk(new_method).with_call(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\grpc\_channel.py", line 1198, in with_call
    return _end_unary_response_blocking(state, call, True, None)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\grpc\_channel.py", line 1006, in _end_unary_response_blocking
    raise _InactiveRpcError(state)  # pytype: disable=not-instantiable
grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:
	status = StatusCode.UNAVAILABLE
	details = "failed to connect to all addresses; last error: UNKNOWN: ipv4:142.250.200.202:443: tcp handshaker shutdown"
	debug_error_string = "UNKNOWN:Error received from peer  {grpc_status:14, grpc_message:"failed to connect to all addresses; last error: UNKNOWN: ipv4:142.250.200.202:443: tcp handshaker shutdown"}"
>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\retry\retry_unary.py", line 147, in retry_target
    result = target()
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ServiceUnavailable: 503 failed to connect to all addresses; last error: UNKNOWN: ipv4:142.250.200.202:443: tcp handshaker shutdown

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\routes\user_routes.py", line 311, in update_user_profile
    user_ref.update(update_data)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\cloud\firestore_v1\document.py", line 325, in update
    write_results = batch.commit(**kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\cloud\firestore_v1\batch.py", line 61, in commit
    commit_response = self._client._firestore_api.commit(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\cloud\firestore_v1\services\firestore\client.py", line 1431, in commit
    response = rpc(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\retry\retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\retry\retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\retry\retry_base.py", line 229, in _retry_error_helper
    raise final_exc from source_exc
google.api_core.exceptions.RetryError: Timeout of 60.0s exceeded, last exception: 503 failed to connect to all addresses; last error: UNKNOWN: ipv4:142.250.200.202:443: tcp handshaker shutdown

2025-06-08T17:31:55.165327 - UserRoutes - INFO - API Response: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:32:05.153581 - UserRoutes - ERROR - Error updating user profile
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\grpc_helpers.py", line 76, in error_remapped_callable
    return callable_(*args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\grpc\_interceptor.py", line 277, in __call__
    response, ignored_call = self._with_call(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\grpc\_interceptor.py", line 332, in _with_call
    return call.result(), call
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\grpc\_channel.py", line 440, in result
    raise self
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\grpc\_interceptor.py", line 315, in continuation
    response, call = self._thunk(new_method).with_call(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\grpc\_channel.py", line 1198, in with_call
    return _end_unary_response_blocking(state, call, True, None)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\grpc\_channel.py", line 1006, in _end_unary_response_blocking
    raise _InactiveRpcError(state)  # pytype: disable=not-instantiable
grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:
	status = StatusCode.UNAVAILABLE
	details = "failed to connect to all addresses; last error: UNKNOWN: ipv4:142.250.200.202:443: tcp handshaker shutdown"
	debug_error_string = "UNKNOWN:Error received from peer  {grpc_message:"failed to connect to all addresses; last error: UNKNOWN: ipv4:142.250.200.202:443: tcp handshaker shutdown", grpc_status:14}"
>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\retry\retry_unary.py", line 147, in retry_target
    result = target()
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ServiceUnavailable: 503 failed to connect to all addresses; last error: UNKNOWN: ipv4:142.250.200.202:443: tcp handshaker shutdown

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\routes\user_routes.py", line 311, in update_user_profile
    user_ref.update(update_data)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\cloud\firestore_v1\document.py", line 325, in update
    write_results = batch.commit(**kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\cloud\firestore_v1\batch.py", line 61, in commit
    commit_response = self._client._firestore_api.commit(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\cloud\firestore_v1\services\firestore\client.py", line 1431, in commit
    response = rpc(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\retry\retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\retry\retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\retry\retry_base.py", line 229, in _retry_error_helper
    raise final_exc from source_exc
google.api_core.exceptions.RetryError: Timeout of 60.0s exceeded, last exception: 503 failed to connect to all addresses; last error: UNKNOWN: ipv4:142.250.200.202:443: tcp handshaker shutdown

2025-06-08T17:32:05.153581 - UserRoutes - INFO - API Response: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:32:34.653763 - UserRoutes - INFO - API Request: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:32:34.653763 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:32:34.653763 - UserRoutes - DEBUG - Updating user profile
Extra: {}

2025-06-08T17:33:19.325472 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:33:19.328025 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:33:29.065404 - UserRoutes - ERROR - Error updating user profile
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\grpc_helpers.py", line 76, in error_remapped_callable
    return callable_(*args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\grpc\_interceptor.py", line 277, in __call__
    response, ignored_call = self._with_call(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\grpc\_interceptor.py", line 332, in _with_call
    return call.result(), call
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\grpc\_channel.py", line 440, in result
    raise self
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\grpc\_interceptor.py", line 315, in continuation
    response, call = self._thunk(new_method).with_call(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\grpc\_channel.py", line 1198, in with_call
    return _end_unary_response_blocking(state, call, True, None)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\grpc\_channel.py", line 1006, in _end_unary_response_blocking
    raise _InactiveRpcError(state)  # pytype: disable=not-instantiable
grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:
	status = StatusCode.UNAVAILABLE
	details = "failed to connect to all addresses; last error: UNKNOWN: ipv4:142.250.200.202:443: tcp handshaker shutdown"
	debug_error_string = "UNKNOWN:Error received from peer  {grpc_status:14, grpc_message:"failed to connect to all addresses; last error: UNKNOWN: ipv4:142.250.200.202:443: tcp handshaker shutdown"}"
>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\retry\retry_unary.py", line 147, in retry_target
    result = target()
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ServiceUnavailable: 503 failed to connect to all addresses; last error: UNKNOWN: ipv4:142.250.200.202:443: tcp handshaker shutdown

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\routes\user_routes.py", line 311, in update_user_profile
    user_ref.update(update_data)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\cloud\firestore_v1\document.py", line 325, in update
    write_results = batch.commit(**kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\cloud\firestore_v1\batch.py", line 61, in commit
    commit_response = self._client._firestore_api.commit(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\cloud\firestore_v1\services\firestore\client.py", line 1431, in commit
    response = rpc(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\retry\retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\retry\retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\venv\lib\site-packages\google\api_core\retry\retry_base.py", line 229, in _retry_error_helper
    raise final_exc from source_exc
google.api_core.exceptions.RetryError: Timeout of 60.0s exceeded, last exception: 503 failed to connect to all addresses; last error: UNKNOWN: ipv4:142.250.200.202:443: tcp handshaker shutdown

2025-06-08T17:33:29.065404 - UserRoutes - INFO - API Response: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:34:04.646211 - app - INFO - Starting application
Extra: {}

2025-06-08T17:34:04.646211 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T17:34:04.646211 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T17:34:04.646211 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T17:34:04.646211 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T17:34:04.681287 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T17:34:04.681287 - app - INFO - Loading ML model
Extra: {}

2025-06-08T17:34:06.121388 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T17:34:06.122365 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T17:34:06.123368 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T17:34:06.123368 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T17:34:06.209160 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T17:34:06.209160 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T17:34:06.210159 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T17:34:06.210159 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T17:34:06.210159 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T17:34:06.211158 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T17:34:06.211158 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T17:34:06.212158 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T17:34:06.212158 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T17:34:06.220113 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T17:34:06.230874 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T17:34:06.231206 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T17:34:06.231206 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T17:34:06.231206 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T17:34:06.231206 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T17:34:06.236539 - app - INFO - Application created successfully
Extra: {}

2025-06-08T17:34:09.712407 - app - INFO - Starting application
Extra: {}

2025-06-08T17:34:09.712407 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T17:34:09.712407 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T17:34:09.726659 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T17:34:09.726659 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T17:34:09.807123 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T17:34:09.807123 - app - INFO - Loading ML model
Extra: {}

2025-06-08T17:34:11.762623 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T17:34:11.762623 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T17:34:11.773212 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T17:34:11.773974 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T17:34:11.937309 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T17:34:11.937309 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T17:34:11.937309 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T17:34:11.937309 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T17:34:11.937309 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T17:34:11.937309 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T17:34:11.937309 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T17:34:11.937309 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T17:34:11.937309 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T17:34:11.965255 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T17:34:11.990705 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T17:34:11.990705 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T17:34:11.991706 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T17:34:11.999710 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T17:34:11.999710 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T17:34:11.999710 - app - INFO - Application created successfully
Extra: {}

2025-06-08T17:34:24.358171 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:34:24.567038 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:34:25.786472 - UserRoutes - INFO - User profile retrieved successfully
Extra: {}

2025-06-08T17:34:25.786472 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:34:30.496129 - UserRoutes - INFO - API Request: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:34:30.501507 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:34:30.501507 - UserRoutes - DEBUG - Updating user profile
Extra: {}

2025-06-08T17:34:30.726410 - UserRoutes - INFO - User profile updated successfully
Extra: {}

2025-06-08T17:34:30.726410 - UserRoutes - INFO - API Response: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:35:34.408262 - UserService - DEBUG - Creating new user with email: nadamamdouh@gmail.com
Extra: {}

2025-06-08T17:35:34.409267 - UserService - DEBUG - Creating new user with email: nadamamdouh@gmail.com
Extra: {}

2025-06-08T17:35:34.409267 - UserService - DEBUG - Additional data: {}
Extra: {}

2025-06-08T17:35:34.409267 - UserService - DEBUG - Additional data: {}
Extra: {}

2025-06-08T17:35:35.329352 - UserService - DEBUG - User data saved to Firestore: {'email': 'nadamamdouh@gmail.com', 'display_name': '', 'created_at': Sentinel: Value used to set a document field to the server timestamp., 'last_login': Sentinel: Value used to set a document field to the server timestamp.}
Extra: {}

2025-06-08T17:35:35.329352 - UserService - DEBUG - User data saved to Firestore: {'email': 'nadamamdouh@gmail.com', 'display_name': '', 'created_at': Sentinel: Value used to set a document field to the server timestamp., 'last_login': Sentinel: Value used to set a document field to the server timestamp.}
Extra: {}

2025-06-08T17:35:55.008935 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:35:55.008935 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:35:55.212718 - UserRoutes - INFO - User profile retrieved successfully
Extra: {}

2025-06-08T17:35:55.212718 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:36:47.151055 - UserRoutes - INFO - API Request: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:36:47.160728 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:36:47.160728 - UserRoutes - DEBUG - Updating user profile
Extra: {}

2025-06-08T17:36:47.393446 - UserRoutes - INFO - User profile updated successfully
Extra: {}

2025-06-08T17:36:47.393446 - UserRoutes - INFO - API Response: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:36:52.128517 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:36:52.128517 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:36:52.128517 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:36:52.341302 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'hba1c_level': 50, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'heart_disease': True, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'gender': 'Female', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'goals': ['Lose Weight']}
Extra: {}

2025-06-08T17:36:52.341302 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'hba1c_level': 50, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'heart_disease': True, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'gender': 'Female', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'goals': ['Lose Weight']}
Extra: {}

2025-06-08T17:36:52.342359 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:36:53.061487 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:36:53.061487 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:36:53.061487 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:36:53.061487 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:36:53.273438 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'hba1c_level': 50, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'heart_disease': True, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'gender': 'Female', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'goals': ['Lose Weight']}
Extra: {}

2025-06-08T17:36:53.273438 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'hba1c_level': 50, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'heart_disease': True, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'gender': 'Female', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'goals': ['Lose Weight']}
Extra: {}

2025-06-08T17:36:53.273438 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:36:53.273438 - health_service - DEBUG - Calling calculate_bmi
Extra: {}

2025-06-08T17:36:53.273438 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'hba1c_level': 50, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'heart_disease': True, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'gender': 'Female', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'goals': ['Lose Weight']}
Extra: {}

2025-06-08T17:36:53.289134 - HealthService - DEBUG - BMI calculated: 33.057851239669425, Classification: obese
Extra: {}

2025-06-08T17:36:53.289134 - health_service - DEBUG - Function calculate_bmi completed successfully
Extra: {}

2025-06-08T17:36:53.289134 - health_service - DEBUG - Calling calculate_energy
Extra: {}

2025-06-08T17:36:53.289134 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'hba1c_level': 50, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'heart_disease': True, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'gender': 'Female', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'goals': ['Lose Weight']}
Extra: {}

2025-06-08T17:36:53.289134 - HealthService - ERROR - Error calculating energy metrics: 'sex'
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 57, in calculate_energy
    if person_info["sex"] == "Male":
KeyError: 'sex'

2025-06-08T17:36:53.291169 - health_service - ERROR - Error in calculate_energy
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 57, in calculate_energy
    if person_info["sex"] == "Male":
KeyError: 'sex'

2025-06-08T17:36:53.292132 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:36:56.279552 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:36:56.279552 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:36:56.475724 - UserRoutes - INFO - User profile retrieved successfully
Extra: {}

2025-06-08T17:36:56.475724 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:37:02.945067 - UserRoutes - INFO - API Request: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:37:02.945067 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:37:02.945067 - UserRoutes - DEBUG - Updating user profile
Extra: {}

2025-06-08T17:37:03.176452 - UserRoutes - INFO - User profile updated successfully
Extra: {}

2025-06-08T17:37:03.176452 - UserRoutes - INFO - API Response: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:37:06.145831 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:37:06.145831 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:37:06.145831 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:37:06.340800 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Male'}
Extra: {}

2025-06-08T17:37:06.340800 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Male'}
Extra: {}

2025-06-08T17:37:06.340800 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:37:07.561330 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:37:07.561330 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:37:07.561330 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:37:07.561330 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:37:07.767583 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Male'}
Extra: {}

2025-06-08T17:37:07.767583 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Male'}
Extra: {}

2025-06-08T17:37:07.767583 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:37:07.767583 - health_service - DEBUG - Calling calculate_bmi
Extra: {}

2025-06-08T17:37:07.767583 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Male'}
Extra: {}

2025-06-08T17:37:07.767583 - HealthService - DEBUG - BMI calculated: 33.057851239669425, Classification: obese
Extra: {}

2025-06-08T17:37:07.767583 - health_service - DEBUG - Function calculate_bmi completed successfully
Extra: {}

2025-06-08T17:37:07.767583 - health_service - DEBUG - Calling calculate_energy
Extra: {}

2025-06-08T17:37:07.767583 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Male'}
Extra: {}

2025-06-08T17:37:07.767583 - HealthService - ERROR - Error calculating energy metrics: 'sex'
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 57, in calculate_energy
    if person_info["sex"] == "Male":
KeyError: 'sex'

2025-06-08T17:37:07.771053 - health_service - ERROR - Error in calculate_energy
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 57, in calculate_energy
    if person_info["sex"] == "Male":
KeyError: 'sex'

2025-06-08T17:37:07.771053 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:37:11.759372 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:37:11.759372 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:37:11.962537 - UserRoutes - INFO - User profile retrieved successfully
Extra: {}

2025-06-08T17:37:11.962537 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:37:17.282216 - UserRoutes - INFO - API Request: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:37:17.283944 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:37:17.283944 - UserRoutes - DEBUG - Updating user profile
Extra: {}

2025-06-08T17:37:17.491569 - UserRoutes - INFO - User profile updated successfully
Extra: {}

2025-06-08T17:37:17.491569 - UserRoutes - INFO - API Response: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:37:19.241615 - UserRoutes - INFO - API Request: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:37:19.247728 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:37:19.247728 - UserRoutes - DEBUG - Updating user profile
Extra: {}

2025-06-08T17:37:19.471234 - UserRoutes - INFO - User profile updated successfully
Extra: {}

2025-06-08T17:37:19.471234 - UserRoutes - INFO - API Response: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:37:21.661629 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:37:21.661629 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:37:21.661629 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:37:21.857827 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Other'}
Extra: {}

2025-06-08T17:37:21.857827 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Other'}
Extra: {}

2025-06-08T17:37:21.857827 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:37:22.877428 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:37:22.877428 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:37:22.877428 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:37:22.877428 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:37:23.224528 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Other'}
Extra: {}

2025-06-08T17:37:23.224528 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Other'}
Extra: {}

2025-06-08T17:37:23.224528 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:37:23.224528 - health_service - DEBUG - Calling calculate_bmi
Extra: {}

2025-06-08T17:37:23.224528 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Other'}
Extra: {}

2025-06-08T17:37:23.224528 - HealthService - DEBUG - BMI calculated: 33.057851239669425, Classification: obese
Extra: {}

2025-06-08T17:37:23.224528 - health_service - DEBUG - Function calculate_bmi completed successfully
Extra: {}

2025-06-08T17:37:23.224528 - health_service - DEBUG - Calling calculate_energy
Extra: {}

2025-06-08T17:37:23.224528 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Other'}
Extra: {}

2025-06-08T17:37:23.224528 - HealthService - ERROR - Error calculating energy metrics: 'sex'
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 57, in calculate_energy
    if person_info["sex"] == "Male":
KeyError: 'sex'

2025-06-08T17:37:23.224528 - health_service - ERROR - Error in calculate_energy
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 57, in calculate_energy
    if person_info["sex"] == "Male":
KeyError: 'sex'

2025-06-08T17:37:23.240543 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:37:34.404642 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:37:34.418814 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:37:34.626572 - UserRoutes - INFO - User profile retrieved successfully
Extra: {}

2025-06-08T17:37:34.626572 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:37:49.513769 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:37:49.513769 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:37:49.513769 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:37:49.725493 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Other'}
Extra: {}

2025-06-08T17:37:49.725493 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Other'}
Extra: {}

2025-06-08T17:37:49.725493 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:37:50.358490 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:37:50.358490 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:37:50.358490 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:37:50.358490 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:37:50.556697 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Other'}
Extra: {}

2025-06-08T17:37:50.556697 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Other'}
Extra: {}

2025-06-08T17:37:50.556697 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:37:50.556697 - health_service - DEBUG - Calling calculate_bmi
Extra: {}

2025-06-08T17:37:50.556697 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Other'}
Extra: {}

2025-06-08T17:37:50.556697 - HealthService - DEBUG - BMI calculated: 33.057851239669425, Classification: obese
Extra: {}

2025-06-08T17:37:50.556697 - health_service - DEBUG - Function calculate_bmi completed successfully
Extra: {}

2025-06-08T17:37:50.556697 - health_service - DEBUG - Calling calculate_energy
Extra: {}

2025-06-08T17:37:50.556697 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Other'}
Extra: {}

2025-06-08T17:37:50.556697 - HealthService - ERROR - Error calculating energy metrics: 'sex'
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 57, in calculate_energy
    if person_info["sex"] == "Male":
KeyError: 'sex'

2025-06-08T17:37:50.556697 - health_service - ERROR - Error in calculate_energy
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 57, in calculate_energy
    if person_info["sex"] == "Male":
KeyError: 'sex'

2025-06-08T17:37:50.556697 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:37:54.725989 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:37:54.725989 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:37:54.924585 - UserRoutes - INFO - User profile retrieved successfully
Extra: {}

2025-06-08T17:37:54.929480 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:37:59.004891 - UserRoutes - INFO - API Request: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:37:59.020598 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:37:59.020598 - UserRoutes - DEBUG - Updating user profile
Extra: {}

2025-06-08T17:37:59.239738 - UserRoutes - INFO - User profile updated successfully
Extra: {}

2025-06-08T17:37:59.239738 - UserRoutes - INFO - API Response: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:38:01.744156 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:38:01.744156 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:38:01.744156 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:38:01.964477 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Male'}
Extra: {}

2025-06-08T17:38:01.964477 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Male'}
Extra: {}

2025-06-08T17:38:01.964477 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:38:02.491694 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:38:02.491694 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:38:02.491694 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:38:02.491694 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:38:02.707022 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Male'}
Extra: {}

2025-06-08T17:38:02.707022 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Male'}
Extra: {}

2025-06-08T17:38:02.707022 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:38:02.707022 - health_service - DEBUG - Calling calculate_bmi
Extra: {}

2025-06-08T17:38:02.707022 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Male'}
Extra: {}

2025-06-08T17:38:02.707022 - HealthService - DEBUG - BMI calculated: 33.057851239669425, Classification: obese
Extra: {}

2025-06-08T17:38:02.707022 - health_service - DEBUG - Function calculate_bmi completed successfully
Extra: {}

2025-06-08T17:38:02.707022 - health_service - DEBUG - Calling calculate_energy
Extra: {}

2025-06-08T17:38:02.707022 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Male'}
Extra: {}

2025-06-08T17:38:02.707022 - HealthService - ERROR - Error calculating energy metrics: 'sex'
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 57, in calculate_energy
    if person_info["sex"] == "Male":
KeyError: 'sex'

2025-06-08T17:38:02.707022 - health_service - ERROR - Error in calculate_energy
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 57, in calculate_energy
    if person_info["sex"] == "Male":
KeyError: 'sex'

2025-06-08T17:38:02.707022 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:38:09.016119 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:38:09.016119 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:38:09.016119 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:38:09.239686 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Male'}
Extra: {}

2025-06-08T17:38:09.239686 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Male'}
Extra: {}

2025-06-08T17:38:09.239686 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:38:09.810293 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:38:09.810293 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:38:09.810293 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:38:09.810293 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:38:10.009040 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Male'}
Extra: {}

2025-06-08T17:38:10.009040 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Male'}
Extra: {}

2025-06-08T17:38:10.009040 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:38:10.009040 - health_service - DEBUG - Calling calculate_bmi
Extra: {}

2025-06-08T17:38:10.009040 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Male'}
Extra: {}

2025-06-08T17:38:10.009040 - HealthService - DEBUG - BMI calculated: 33.057851239669425, Classification: obese
Extra: {}

2025-06-08T17:38:10.009040 - health_service - DEBUG - Function calculate_bmi completed successfully
Extra: {}

2025-06-08T17:38:10.009040 - health_service - DEBUG - Calling calculate_energy
Extra: {}

2025-06-08T17:38:10.009040 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Male'}
Extra: {}

2025-06-08T17:38:10.009040 - HealthService - ERROR - Error calculating energy metrics: 'sex'
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 57, in calculate_energy
    if person_info["sex"] == "Male":
KeyError: 'sex'

2025-06-08T17:38:10.009040 - health_service - ERROR - Error in calculate_energy
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 57, in calculate_energy
    if person_info["sex"] == "Male":
KeyError: 'sex'

2025-06-08T17:38:10.009040 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:38:20.131586 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:38:20.131586 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:38:20.131586 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:38:20.323104 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Male'}
Extra: {}

2025-06-08T17:38:20.323104 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Male'}
Extra: {}

2025-06-08T17:38:20.323104 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:38:20.834714 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:38:20.834714 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:38:20.834714 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:38:20.834714 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:38:21.055548 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Male'}
Extra: {}

2025-06-08T17:38:21.055548 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Male'}
Extra: {}

2025-06-08T17:38:21.055548 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:38:21.055548 - health_service - DEBUG - Calling calculate_bmi
Extra: {}

2025-06-08T17:38:21.055548 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Male'}
Extra: {}

2025-06-08T17:38:21.055548 - HealthService - DEBUG - BMI calculated: 33.057851239669425, Classification: obese
Extra: {}

2025-06-08T17:38:21.055548 - health_service - DEBUG - Function calculate_bmi completed successfully
Extra: {}

2025-06-08T17:38:21.055548 - health_service - DEBUG - Calling calculate_energy
Extra: {}

2025-06-08T17:38:21.055548 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Male'}
Extra: {}

2025-06-08T17:38:21.055548 - HealthService - ERROR - Error calculating energy metrics: 'sex'
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 57, in calculate_energy
    if person_info["sex"] == "Male":
KeyError: 'sex'

2025-06-08T17:38:21.055548 - health_service - ERROR - Error in calculate_energy
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 57, in calculate_energy
    if person_info["sex"] == "Male":
KeyError: 'sex'

2025-06-08T17:38:21.055548 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:38:23.804488 - health_routes - INFO - API Request: GET http://192.168.1.25:5000/api/health/advice
Extra: {}

2025-06-08T17:38:24.038983 - health_routes - INFO - API Response: GET http://192.168.1.25:5000/api/health/advice
Extra: {}

2025-06-08T17:38:25.122298 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/advice
Extra: {}

2025-06-08T17:38:25.124306 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:38:25.124306 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:38:25.124306 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:38:25.323383 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Male'}
Extra: {}

2025-06-08T17:38:25.323383 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Male'}
Extra: {}

2025-06-08T17:38:25.323383 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:38:25.323383 - health_service - DEBUG - Calling calculate_bmi
Extra: {}

2025-06-08T17:38:25.323383 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Male'}
Extra: {}

2025-06-08T17:38:25.323383 - HealthService - DEBUG - BMI calculated: 33.057851239669425, Classification: obese
Extra: {}

2025-06-08T17:38:25.323383 - health_service - DEBUG - Function calculate_bmi completed successfully
Extra: {}

2025-06-08T17:38:25.323383 - health_service - DEBUG - Calling calculate_energy
Extra: {}

2025-06-08T17:38:25.323383 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Male'}
Extra: {}

2025-06-08T17:38:25.323383 - HealthService - ERROR - Error calculating energy metrics: 'sex'
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 57, in calculate_energy
    if person_info["sex"] == "Male":
KeyError: 'sex'

2025-06-08T17:38:25.323383 - health_service - ERROR - Error in calculate_energy
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 57, in calculate_energy
    if person_info["sex"] == "Male":
KeyError: 'sex'

2025-06-08T17:38:25.323383 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/advice
Extra: {}

2025-06-08T17:38:32.778609 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:38:32.779827 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:38:32.981965 - UserRoutes - INFO - User profile retrieved successfully
Extra: {}

2025-06-08T17:38:32.981965 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:38:40.502989 - UserRoutes - INFO - API Request: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:38:40.502989 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:38:40.502989 - UserRoutes - DEBUG - Updating user profile
Extra: {}

2025-06-08T17:38:40.738947 - UserRoutes - INFO - User profile updated successfully
Extra: {}

2025-06-08T17:38:40.738947 - UserRoutes - INFO - API Response: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:38:43.544692 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:38:43.544692 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:38:43.544692 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:38:43.739713 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Female'}
Extra: {}

2025-06-08T17:38:43.739713 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Female'}
Extra: {}

2025-06-08T17:38:43.739713 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:38:44.178807 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:38:44.178807 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:38:44.178807 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:38:44.178807 - UserService - DEBUG - Getting user data for user_id: eMHTHuLM0WMIwK7igmJzhTnsd8M2
Extra: {}

2025-06-08T17:38:44.393174 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Female'}
Extra: {}

2025-06-08T17:38:44.393174 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Female'}
Extra: {}

2025-06-08T17:38:44.393174 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:38:44.393174 - health_service - DEBUG - Calling calculate_bmi
Extra: {}

2025-06-08T17:38:44.393174 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Female'}
Extra: {}

2025-06-08T17:38:44.393174 - HealthService - DEBUG - BMI calculated: 33.057851239669425, Classification: obese
Extra: {}

2025-06-08T17:38:44.393174 - health_service - DEBUG - Function calculate_bmi completed successfully
Extra: {}

2025-06-08T17:38:44.393174 - health_service - DEBUG - Calling calculate_energy
Extra: {}

2025-06-08T17:38:44.393174 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': 165, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': True, 'blood_glucose_level': 200, 'weight': 90, 'age': 20, 'hba1c_level': 50, 'vegan': True, 'activity_level': 'Sedentary', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 35, 31, 347000, tzinfo=datetime.timezone.utc), 'email': 'nadamamdouh@gmail.com', 'gender': 'Female'}
Extra: {}

2025-06-08T17:38:44.393174 - HealthService - ERROR - Error calculating energy metrics: 'sex'
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 57, in calculate_energy
    if person_info["sex"] == "Male":
KeyError: 'sex'

2025-06-08T17:38:44.393174 - health_service - ERROR - Error in calculate_energy
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 57, in calculate_energy
    if person_info["sex"] == "Male":
KeyError: 'sex'

2025-06-08T17:38:44.393174 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:39:47.182449 - UserService - DEBUG - Creating new user with email: testnew@test.com
Extra: {}

2025-06-08T17:39:47.183790 - UserService - DEBUG - Creating new user with email: testnew@test.com
Extra: {}

2025-06-08T17:39:47.183790 - UserService - DEBUG - Additional data: {}
Extra: {}

2025-06-08T17:39:47.183790 - UserService - DEBUG - Additional data: {}
Extra: {}

2025-06-08T17:39:48.192964 - UserService - DEBUG - User data saved to Firestore: {'email': 'testnew@test.com', 'display_name': '', 'created_at': Sentinel: Value used to set a document field to the server timestamp., 'last_login': Sentinel: Value used to set a document field to the server timestamp.}
Extra: {}

2025-06-08T17:39:48.192964 - UserService - DEBUG - User data saved to Firestore: {'email': 'testnew@test.com', 'display_name': '', 'created_at': Sentinel: Value used to set a document field to the server timestamp., 'last_login': Sentinel: Value used to set a document field to the server timestamp.}
Extra: {}

2025-06-08T17:40:04.481508 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:40:04.481508 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:40:04.785930 - UserRoutes - INFO - User profile retrieved successfully
Extra: {}

2025-06-08T17:40:04.785930 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:40:40.049627 - UserRoutes - INFO - API Request: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:40:40.057228 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:40:40.057228 - UserRoutes - DEBUG - Updating user profile
Extra: {}

2025-06-08T17:40:40.288894 - UserRoutes - INFO - User profile updated successfully
Extra: {}

2025-06-08T17:40:40.288894 - UserRoutes - INFO - API Response: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:40:43.718356 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:40:43.718356 - UserService - DEBUG - Getting user data for user_id: b3K3K4isZXaiPJDM4xeB6tK0nVl2
Extra: {}

2025-06-08T17:40:43.718356 - UserService - DEBUG - Getting user data for user_id: b3K3K4isZXaiPJDM4xeB6tK0nVl2
Extra: {}

2025-06-08T17:40:44.068812 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 39, 44, 137000, tzinfo=datetime.timezone.utc), 'location': 'California', 'hba1c_level': 5, 'blood_glucose_level': 95, 'weight': 120, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'gender': 'Male', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 39, 44, 137000, tzinfo=datetime.timezone.utc), 'email': 'testnew@test.com', 'goals': ['Lose Weight']}
Extra: {}

2025-06-08T17:40:44.070553 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 39, 44, 137000, tzinfo=datetime.timezone.utc), 'location': 'California', 'hba1c_level': 5, 'blood_glucose_level': 95, 'weight': 120, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'gender': 'Male', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 39, 44, 137000, tzinfo=datetime.timezone.utc), 'email': 'testnew@test.com', 'goals': ['Lose Weight']}
Extra: {}

2025-06-08T17:40:44.070553 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:40:44.419688 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:40:44.419688 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:40:44.419688 - UserService - DEBUG - Getting user data for user_id: b3K3K4isZXaiPJDM4xeB6tK0nVl2
Extra: {}

2025-06-08T17:40:44.419688 - UserService - DEBUG - Getting user data for user_id: b3K3K4isZXaiPJDM4xeB6tK0nVl2
Extra: {}

2025-06-08T17:40:44.633954 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 39, 44, 137000, tzinfo=datetime.timezone.utc), 'location': 'California', 'hba1c_level': 5, 'blood_glucose_level': 95, 'weight': 120, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'gender': 'Male', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 39, 44, 137000, tzinfo=datetime.timezone.utc), 'email': 'testnew@test.com', 'goals': ['Lose Weight']}
Extra: {}

2025-06-08T17:40:44.633954 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 39, 44, 137000, tzinfo=datetime.timezone.utc), 'location': 'California', 'hba1c_level': 5, 'blood_glucose_level': 95, 'weight': 120, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'gender': 'Male', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 39, 44, 137000, tzinfo=datetime.timezone.utc), 'email': 'testnew@test.com', 'goals': ['Lose Weight']}
Extra: {}

2025-06-08T17:40:44.633954 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:40:44.633954 - health_service - DEBUG - Calling calculate_bmi
Extra: {}

2025-06-08T17:40:44.633954 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 39, 44, 137000, tzinfo=datetime.timezone.utc), 'location': 'California', 'hba1c_level': 5, 'blood_glucose_level': 95, 'weight': 120, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'gender': 'Male', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 39, 44, 137000, tzinfo=datetime.timezone.utc), 'email': 'testnew@test.com', 'goals': ['Lose Weight']}
Extra: {}

2025-06-08T17:40:44.633954 - HealthService - DEBUG - BMI calculated: 35.06208911614317, Classification: obese
Extra: {}

2025-06-08T17:40:44.633954 - health_service - DEBUG - Function calculate_bmi completed successfully
Extra: {}

2025-06-08T17:40:44.633954 - health_service - DEBUG - Calling calculate_energy
Extra: {}

2025-06-08T17:40:44.633954 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 39, 44, 137000, tzinfo=datetime.timezone.utc), 'location': 'California', 'hba1c_level': 5, 'blood_glucose_level': 95, 'weight': 120, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'gender': 'Male', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 39, 44, 137000, tzinfo=datetime.timezone.utc), 'email': 'testnew@test.com', 'goals': ['Lose Weight']}
Extra: {}

2025-06-08T17:40:44.633954 - HealthService - ERROR - Error calculating energy metrics: 'sex'
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 57, in calculate_energy
    if person_info["sex"] == "Male":
KeyError: 'sex'

2025-06-08T17:40:44.636141 - health_service - ERROR - Error in calculate_energy
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 57, in calculate_energy
    if person_info["sex"] == "Male":
KeyError: 'sex'

2025-06-08T17:40:44.636141 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:44:42.077045 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:44:42.085133 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:44:43.017002 - UserRoutes - INFO - User profile retrieved successfully
Extra: {}

2025-06-08T17:44:43.017002 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:44:46.386993 - UserRoutes - INFO - API Request: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:44:46.402889 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:44:46.405519 - UserRoutes - DEBUG - Updating user profile
Extra: {}

2025-06-08T17:44:46.676938 - UserRoutes - INFO - User profile updated successfully
Extra: {}

2025-06-08T17:44:46.676938 - UserRoutes - INFO - API Response: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:44:51.538832 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:44:51.538832 - UserService - DEBUG - Getting user data for user_id: b3K3K4isZXaiPJDM4xeB6tK0nVl2
Extra: {}

2025-06-08T17:44:51.538832 - UserService - DEBUG - Getting user data for user_id: b3K3K4isZXaiPJDM4xeB6tK0nVl2
Extra: {}

2025-06-08T17:44:51.806145 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 39, 44, 137000, tzinfo=datetime.timezone.utc), 'location': 'California', 'hba1c_level': 5, 'blood_glucose_level': 95, 'weight': 120, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'gender': 'Male', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 39, 44, 137000, tzinfo=datetime.timezone.utc), 'email': 'testnew@test.com', 'goals': ['Lose Weight']}
Extra: {}

2025-06-08T17:44:51.810564 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 39, 44, 137000, tzinfo=datetime.timezone.utc), 'location': 'California', 'hba1c_level': 5, 'blood_glucose_level': 95, 'weight': 120, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'gender': 'Male', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 39, 44, 137000, tzinfo=datetime.timezone.utc), 'email': 'testnew@test.com', 'goals': ['Lose Weight']}
Extra: {}

2025-06-08T17:44:51.810564 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:44:53.761925 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:44:53.761925 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:44:53.761925 - UserService - DEBUG - Getting user data for user_id: b3K3K4isZXaiPJDM4xeB6tK0nVl2
Extra: {}

2025-06-08T17:44:53.761925 - UserService - DEBUG - Getting user data for user_id: b3K3K4isZXaiPJDM4xeB6tK0nVl2
Extra: {}

2025-06-08T17:44:53.969671 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 39, 44, 137000, tzinfo=datetime.timezone.utc), 'location': 'California', 'hba1c_level': 5, 'blood_glucose_level': 95, 'weight': 120, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'gender': 'Male', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 39, 44, 137000, tzinfo=datetime.timezone.utc), 'email': 'testnew@test.com', 'goals': ['Lose Weight']}
Extra: {}

2025-06-08T17:44:53.969671 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 39, 44, 137000, tzinfo=datetime.timezone.utc), 'location': 'California', 'hba1c_level': 5, 'blood_glucose_level': 95, 'weight': 120, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'gender': 'Male', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 39, 44, 137000, tzinfo=datetime.timezone.utc), 'email': 'testnew@test.com', 'goals': ['Lose Weight']}
Extra: {}

2025-06-08T17:44:53.969671 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:44:53.969671 - health_service - DEBUG - Calling calculate_bmi
Extra: {}

2025-06-08T17:44:53.969671 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 39, 44, 137000, tzinfo=datetime.timezone.utc), 'location': 'California', 'hba1c_level': 5, 'blood_glucose_level': 95, 'weight': 120, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'gender': 'Male', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 39, 44, 137000, tzinfo=datetime.timezone.utc), 'email': 'testnew@test.com', 'goals': ['Lose Weight']}
Extra: {}

2025-06-08T17:44:53.969671 - HealthService - DEBUG - BMI calculated: 35.06208911614317, Classification: obese
Extra: {}

2025-06-08T17:44:53.969671 - health_service - DEBUG - Function calculate_bmi completed successfully
Extra: {}

2025-06-08T17:44:53.969671 - health_service - DEBUG - Calling calculate_energy
Extra: {}

2025-06-08T17:44:53.969671 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 39, 44, 137000, tzinfo=datetime.timezone.utc), 'location': 'California', 'hba1c_level': 5, 'blood_glucose_level': 95, 'weight': 120, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'gender': 'Male', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 39, 44, 137000, tzinfo=datetime.timezone.utc), 'email': 'testnew@test.com', 'goals': ['Lose Weight']}
Extra: {}

2025-06-08T17:44:53.969671 - HealthService - ERROR - Error calculating energy metrics: 'sex'
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 57, in calculate_energy
    if person_info["sex"] == "Male":
KeyError: 'sex'

2025-06-08T17:44:53.969671 - health_service - ERROR - Error in calculate_energy
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 57, in calculate_energy
    if person_info["sex"] == "Male":
KeyError: 'sex'

2025-06-08T17:44:53.969671 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:45:34.893378 - UserService - DEBUG - Creating new user with email: test1@test.com
Extra: {}

2025-06-08T17:45:34.893378 - UserService - DEBUG - Creating new user with email: test1@test.com
Extra: {}

2025-06-08T17:45:34.893378 - UserService - DEBUG - Additional data: {}
Extra: {}

2025-06-08T17:45:34.893378 - UserService - DEBUG - Additional data: {}
Extra: {}

2025-06-08T17:45:35.141386 - UserService - DEBUG - User data saved to Firestore: {'email': 'test1@test.com', 'display_name': '', 'created_at': Sentinel: Value used to set a document field to the server timestamp., 'last_login': Sentinel: Value used to set a document field to the server timestamp.}
Extra: {}

2025-06-08T17:45:35.141386 - UserService - DEBUG - User data saved to Firestore: {'email': 'test1@test.com', 'display_name': '', 'created_at': Sentinel: Value used to set a document field to the server timestamp., 'last_login': Sentinel: Value used to set a document field to the server timestamp.}
Extra: {}

2025-06-08T17:45:48.048527 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:45:48.054680 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:45:48.338130 - UserRoutes - INFO - User profile retrieved successfully
Extra: {}

2025-06-08T17:45:48.338738 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:46:20.948139 - UserRoutes - INFO - API Request: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:46:20.952530 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:46:20.954550 - UserRoutes - DEBUG - Updating user profile
Extra: {}

2025-06-08T17:46:21.198290 - UserRoutes - INFO - User profile updated successfully
Extra: {}

2025-06-08T17:46:21.200236 - UserRoutes - INFO - API Response: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:46:29.720404 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:46:29.720404 - UserService - DEBUG - Getting user data for user_id: z49WPvZ0wiXMo8TK72pDZOPdwW13
Extra: {}

2025-06-08T17:46:29.720404 - UserService - DEBUG - Getting user data for user_id: z49WPvZ0wiXMo8TK72pDZOPdwW13
Extra: {}

2025-06-08T17:46:30.003743 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 45, 31, 134000, tzinfo=datetime.timezone.utc), 'location': 'California', 'hba1c_level': 5, 'blood_glucose_level': 95, 'weight': 114, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'gender': 'Male', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 45, 31, 134000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com', 'goals': ['Lose Weight']}
Extra: {}

2025-06-08T17:46:30.003743 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 45, 31, 134000, tzinfo=datetime.timezone.utc), 'location': 'California', 'hba1c_level': 5, 'blood_glucose_level': 95, 'weight': 114, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'gender': 'Male', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 45, 31, 134000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com', 'goals': ['Lose Weight']}
Extra: {}

2025-06-08T17:46:30.015697 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:46:30.444400 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:46:30.444400 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:46:30.444400 - UserService - DEBUG - Getting user data for user_id: z49WPvZ0wiXMo8TK72pDZOPdwW13
Extra: {}

2025-06-08T17:46:30.444400 - UserService - DEBUG - Getting user data for user_id: z49WPvZ0wiXMo8TK72pDZOPdwW13
Extra: {}

2025-06-08T17:46:30.716198 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 45, 31, 134000, tzinfo=datetime.timezone.utc), 'location': 'California', 'hba1c_level': 5, 'blood_glucose_level': 95, 'weight': 114, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'gender': 'Male', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 45, 31, 134000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com', 'goals': ['Lose Weight']}
Extra: {}

2025-06-08T17:46:30.716198 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 45, 31, 134000, tzinfo=datetime.timezone.utc), 'location': 'California', 'hba1c_level': 5, 'blood_glucose_level': 95, 'weight': 114, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'gender': 'Male', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 45, 31, 134000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com', 'goals': ['Lose Weight']}
Extra: {}

2025-06-08T17:46:30.732017 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:46:30.732017 - health_service - DEBUG - Calling calculate_bmi
Extra: {}

2025-06-08T17:46:30.732017 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 45, 31, 134000, tzinfo=datetime.timezone.utc), 'location': 'California', 'hba1c_level': 5, 'blood_glucose_level': 95, 'weight': 114, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'gender': 'Male', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 45, 31, 134000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com', 'goals': ['Lose Weight']}
Extra: {}

2025-06-08T17:46:30.732017 - HealthService - DEBUG - BMI calculated: 33.30898466033601, Classification: obese
Extra: {}

2025-06-08T17:46:30.732017 - health_service - DEBUG - Function calculate_bmi completed successfully
Extra: {}

2025-06-08T17:46:30.737111 - health_service - DEBUG - Calling calculate_energy
Extra: {}

2025-06-08T17:46:30.737111 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 45, 31, 134000, tzinfo=datetime.timezone.utc), 'location': 'California', 'hba1c_level': 5, 'blood_glucose_level': 95, 'weight': 114, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'gender': 'Male', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 45, 31, 134000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com', 'goals': ['Lose Weight']}
Extra: {}

2025-06-08T17:46:30.748162 - HealthService - ERROR - Error calculating energy metrics: 'sex'
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 57, in calculate_energy
    if person_info["sex"] == "Male":
KeyError: 'sex'

2025-06-08T17:46:30.748162 - health_service - ERROR - Error in calculate_energy
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 57, in calculate_energy
    if person_info["sex"] == "Male":
KeyError: 'sex'

2025-06-08T17:46:30.755756 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:47:36.663392 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:47:36.666698 - UserService - DEBUG - Getting user data for user_id: z49WPvZ0wiXMo8TK72pDZOPdwW13
Extra: {}

2025-06-08T17:47:36.666698 - UserService - DEBUG - Getting user data for user_id: z49WPvZ0wiXMo8TK72pDZOPdwW13
Extra: {}

2025-06-08T17:47:37.380484 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:47:37.380484 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:47:37.380484 - UserService - DEBUG - Getting user data for user_id: z49WPvZ0wiXMo8TK72pDZOPdwW13
Extra: {}

2025-06-08T17:47:37.382292 - UserService - DEBUG - Getting user data for user_id: z49WPvZ0wiXMo8TK72pDZOPdwW13
Extra: {}

2025-06-08T17:47:37.643054 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 45, 31, 134000, tzinfo=datetime.timezone.utc), 'location': 'California', 'hba1c_level': 5, 'blood_glucose_level': 95, 'weight': 114, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'gender': 'Male', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 45, 31, 134000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com', 'goals': ['Lose Weight']}
Extra: {}

2025-06-08T17:47:37.643054 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 45, 31, 134000, tzinfo=datetime.timezone.utc), 'location': 'California', 'hba1c_level': 5, 'blood_glucose_level': 95, 'weight': 114, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'gender': 'Male', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 45, 31, 134000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com', 'goals': ['Lose Weight']}
Extra: {}

2025-06-08T17:47:37.643054 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 45, 31, 134000, tzinfo=datetime.timezone.utc), 'location': 'California', 'hba1c_level': 5, 'blood_glucose_level': 95, 'weight': 114, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'gender': 'Male', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 45, 31, 134000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com', 'goals': ['Lose Weight']}
Extra: {}

2025-06-08T17:47:37.651974 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:47:37.651974 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 45, 31, 134000, tzinfo=datetime.timezone.utc), 'location': 'California', 'hba1c_level': 5, 'blood_glucose_level': 95, 'weight': 114, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'gender': 'Male', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 45, 31, 134000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com', 'goals': ['Lose Weight']}
Extra: {}

2025-06-08T17:47:37.651974 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:47:37.667950 - health_service - DEBUG - Calling calculate_bmi
Extra: {}

2025-06-08T17:47:37.667950 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 45, 31, 134000, tzinfo=datetime.timezone.utc), 'location': 'California', 'hba1c_level': 5, 'blood_glucose_level': 95, 'weight': 114, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'gender': 'Male', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 45, 31, 134000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com', 'goals': ['Lose Weight']}
Extra: {}

2025-06-08T17:47:37.667950 - HealthService - DEBUG - BMI calculated: 33.30898466033601, Classification: obese
Extra: {}

2025-06-08T17:47:37.667950 - health_service - DEBUG - Function calculate_bmi completed successfully
Extra: {}

2025-06-08T17:47:37.667950 - health_service - DEBUG - Calling calculate_energy
Extra: {}

2025-06-08T17:47:37.667950 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'never', 'display_name': '', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 45, 31, 134000, tzinfo=datetime.timezone.utc), 'location': 'California', 'hba1c_level': 5, 'blood_glucose_level': 95, 'weight': 114, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'gender': 'Male', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 45, 31, 134000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com', 'goals': ['Lose Weight']}
Extra: {}

2025-06-08T17:47:37.699729 - HealthService - ERROR - Error calculating energy metrics: 'sex'
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 57, in calculate_energy
    if person_info["sex"] == "Male":
KeyError: 'sex'

2025-06-08T17:47:37.715630 - health_service - ERROR - Error in calculate_energy
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 57, in calculate_energy
    if person_info["sex"] == "Male":
KeyError: 'sex'

2025-06-08T17:47:37.715630 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:48:21.784278 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:48:21.788316 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:48:21.990795 - UserRoutes - INFO - User profile retrieved successfully
Extra: {}

2025-06-08T17:48:22.015588 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:57:18.597379 - UserService - DEBUG - Creating new user with email: test@test.com
Extra: {}

2025-06-08T17:57:18.600267 - UserService - DEBUG - Creating new user with email: test@test.com
Extra: {}

2025-06-08T17:57:18.600267 - UserService - DEBUG - Additional data: {}
Extra: {}

2025-06-08T17:57:18.600267 - UserService - DEBUG - Additional data: {}
Extra: {}

2025-06-08T17:57:19.584534 - UserService - DEBUG - User data saved to Firestore: {'email': 'test@test.com', 'display_name': '', 'created_at': Sentinel: Value used to set a document field to the server timestamp., 'last_login': Sentinel: Value used to set a document field to the server timestamp.}
Extra: {}

2025-06-08T17:57:19.584534 - UserService - DEBUG - User data saved to Firestore: {'email': 'test@test.com', 'display_name': '', 'created_at': Sentinel: Value used to set a document field to the server timestamp., 'last_login': Sentinel: Value used to set a document field to the server timestamp.}
Extra: {}

2025-06-08T17:57:45.443050 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:57:45.462794 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:57:45.659732 - UserRoutes - INFO - User profile retrieved successfully
Extra: {}

2025-06-08T17:57:45.659732 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:58:18.469493 - UserRoutes - INFO - API Request: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:58:18.489546 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T17:58:18.500596 - UserRoutes - DEBUG - Updating user profile
Extra: {}

2025-06-08T17:58:18.977923 - UserRoutes - INFO - User profile updated successfully
Extra: {}

2025-06-08T17:58:18.979945 - UserRoutes - INFO - API Response: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T17:58:36.736474 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:58:36.736474 - UserService - DEBUG - Getting user data for user_id: GWiv5DMfrRNEFe7FwBEFJAvTNaV2
Extra: {}

2025-06-08T17:58:36.741425 - UserService - DEBUG - Getting user data for user_id: GWiv5DMfrRNEFe7FwBEFJAvTNaV2
Extra: {}

2025-06-08T17:58:36.952731 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'current', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 57, 15, 550000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 57, 15, 550000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:58:36.952731 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'current', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 57, 15, 550000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 57, 15, 550000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:58:36.952731 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:58:37.433678 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:58:37.433678 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:58:37.433678 - UserService - DEBUG - Getting user data for user_id: GWiv5DMfrRNEFe7FwBEFJAvTNaV2
Extra: {}

2025-06-08T17:58:37.433678 - UserService - DEBUG - Getting user data for user_id: GWiv5DMfrRNEFe7FwBEFJAvTNaV2
Extra: {}

2025-06-08T17:58:37.693481 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'current', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 57, 15, 550000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 57, 15, 550000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:58:37.693481 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'current', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 57, 15, 550000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 57, 15, 550000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:58:37.693481 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T17:58:37.693481 - health_service - DEBUG - Calling calculate_bmi
Extra: {}

2025-06-08T17:58:37.693481 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'current', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 57, 15, 550000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 57, 15, 550000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:58:37.693481 - HealthService - DEBUG - BMI calculated: 24.835646457268076, Classification: normal weight
Extra: {}

2025-06-08T17:58:37.693481 - health_service - DEBUG - Function calculate_bmi completed successfully
Extra: {}

2025-06-08T17:58:37.693481 - health_service - DEBUG - Calling calculate_energy
Extra: {}

2025-06-08T17:58:37.693481 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'current', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 57, 15, 550000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 57, 15, 550000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T17:58:37.715998 - HealthService - DEBUG - Energy metrics calculated - BMR: 1978.67, TDEE: 3066.94
Extra: {}

2025-06-08T17:58:37.715998 - health_service - DEBUG - Function calculate_energy completed successfully
Extra: {}

2025-06-08T17:58:37.715998 - health_service - DEBUG - Calling calculate_macros
Extra: {}

2025-06-08T17:58:37.721900 - HealthService - DEBUG - Calculating macros for person info: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'current', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 57, 15, 550000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 57, 15, 550000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}, calories: 3066.944700000001
Extra: {}

2025-06-08T17:58:37.729251 - HealthService - ERROR - Error calculating macros: 'goal'
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 79, in calculate_macros
    goal = person_info["goal"].lower()
KeyError: 'goal'

2025-06-08T17:58:37.747198 - health_service - ERROR - Error in calculate_macros
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 79, in calculate_macros
    goal = person_info["goal"].lower()
KeyError: 'goal'

2025-06-08T17:58:37.749216 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:59:59.972389 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T17:59:59.974929 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T17:59:59.974929 - UserService - DEBUG - Getting user data for user_id: GWiv5DMfrRNEFe7FwBEFJAvTNaV2
Extra: {}

2025-06-08T17:59:59.974929 - UserService - DEBUG - Getting user data for user_id: GWiv5DMfrRNEFe7FwBEFJAvTNaV2
Extra: {}

2025-06-08T18:00:00.951291 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'current', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 57, 15, 550000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 57, 15, 550000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T18:00:00.951291 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'current', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 57, 15, 550000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 57, 15, 550000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T18:00:00.951291 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T18:00:00.953308 - health_service - DEBUG - Calling calculate_bmi
Extra: {}

2025-06-08T18:00:00.953822 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'current', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 57, 15, 550000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 57, 15, 550000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T18:00:00.953822 - HealthService - DEBUG - BMI calculated: 24.835646457268076, Classification: normal weight
Extra: {}

2025-06-08T18:00:00.953822 - health_service - DEBUG - Function calculate_bmi completed successfully
Extra: {}

2025-06-08T18:00:00.953822 - health_service - DEBUG - Calling calculate_energy
Extra: {}

2025-06-08T18:00:00.955840 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'current', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 57, 15, 550000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 57, 15, 550000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T18:00:00.956625 - HealthService - DEBUG - Energy metrics calculated - BMR: 1978.67, TDEE: 3066.94
Extra: {}

2025-06-08T18:00:00.956625 - health_service - DEBUG - Function calculate_energy completed successfully
Extra: {}

2025-06-08T18:00:00.956625 - health_service - DEBUG - Calling calculate_macros
Extra: {}

2025-06-08T18:00:00.958643 - HealthService - DEBUG - Calculating macros for person info: {'ethnicity': 'Other', 'height': 185, 'smoking_history': 'current', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 14, 57, 15, 550000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hypertension': False, 'goals': ['Lose Weight'], 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 14, 57, 15, 550000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}, calories: 3066.944700000001
Extra: {}

2025-06-08T18:00:00.962903 - HealthService - ERROR - Error calculating macros: 'goal'
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 79, in calculate_macros
    goal = person_info["goal"].lower()
KeyError: 'goal'

2025-06-08T18:00:00.966941 - health_service - ERROR - Error in calculate_macros
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 79, in calculate_macros
    goal = person_info["goal"].lower()
KeyError: 'goal'

2025-06-08T18:00:00.966941 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T18:00:40.253545 - UserService - DEBUG - Creating new user with email: test@test.com
Extra: {}

2025-06-08T18:00:40.253545 - UserService - DEBUG - Creating new user with email: test@test.com
Extra: {}

2025-06-08T18:00:40.253545 - UserService - DEBUG - Additional data: {}
Extra: {}

2025-06-08T18:00:40.253545 - UserService - DEBUG - Additional data: {}
Extra: {}

2025-06-08T18:00:40.540134 - UserService - DEBUG - User data saved to Firestore: {'email': 'test@test.com', 'display_name': '', 'created_at': Sentinel: Value used to set a document field to the server timestamp., 'last_login': Sentinel: Value used to set a document field to the server timestamp.}
Extra: {}

2025-06-08T18:00:40.540134 - UserService - DEBUG - User data saved to Firestore: {'email': 'test@test.com', 'display_name': '', 'created_at': Sentinel: Value used to set a document field to the server timestamp., 'last_login': Sentinel: Value used to set a document field to the server timestamp.}
Extra: {}

2025-06-08T18:00:54.250701 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T18:00:54.257553 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T18:00:54.472313 - UserRoutes - INFO - User profile retrieved successfully
Extra: {}

2025-06-08T18:00:54.472313 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T18:01:24.078828 - UserRoutes - INFO - API Request: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T18:01:24.090106 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T18:01:24.090106 - UserRoutes - DEBUG - Updating user profile
Extra: {}

2025-06-08T18:01:24.628377 - UserRoutes - INFO - User profile updated successfully
Extra: {}

2025-06-08T18:01:24.628377 - UserRoutes - INFO - API Response: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T18:01:29.580435 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T18:01:29.589163 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T18:01:29.906892 - UserRoutes - INFO - User profile retrieved successfully
Extra: {}

2025-06-08T18:01:29.906892 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T18:01:31.285234 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T18:01:31.301335 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T18:01:31.539899 - UserRoutes - INFO - User profile retrieved successfully
Extra: {}

2025-06-08T18:01:31.539899 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T18:01:51.055044 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T18:01:51.055044 - UserService - DEBUG - Getting user data for user_id: D721X62K8idr5roSRfN0TRgAJKZ2
Extra: {}

2025-06-08T18:01:51.055044 - UserService - DEBUG - Getting user data for user_id: D721X62K8idr5roSRfN0TRgAJKZ2
Extra: {}

2025-06-08T18:01:51.309250 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'current', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 0, 36, 516000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 0, 36, 516000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T18:01:51.311262 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'current', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 0, 36, 516000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 0, 36, 516000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T18:01:51.311262 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T18:01:52.251907 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T18:01:52.254747 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T18:01:52.254747 - UserService - DEBUG - Getting user data for user_id: D721X62K8idr5roSRfN0TRgAJKZ2
Extra: {}

2025-06-08T18:01:52.256591 - UserService - DEBUG - Getting user data for user_id: D721X62K8idr5roSRfN0TRgAJKZ2
Extra: {}

2025-06-08T18:01:52.513257 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'current', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 0, 36, 516000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 0, 36, 516000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T18:01:52.513257 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'current', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 0, 36, 516000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 0, 36, 516000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T18:01:52.513257 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T18:01:52.513257 - health_service - DEBUG - Calling calculate_bmi
Extra: {}

2025-06-08T18:01:52.513257 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'current', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 0, 36, 516000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 0, 36, 516000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T18:01:52.513257 - HealthService - DEBUG - BMI calculated: 24.835646457268076, Classification: normal weight
Extra: {}

2025-06-08T18:01:52.513257 - health_service - DEBUG - Function calculate_bmi completed successfully
Extra: {}

2025-06-08T18:01:52.513257 - health_service - DEBUG - Calling calculate_energy
Extra: {}

2025-06-08T18:01:52.513257 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'current', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 0, 36, 516000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 0, 36, 516000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T18:01:52.513257 - HealthService - DEBUG - Energy metrics calculated - BMR: 1978.67, TDEE: 3066.94
Extra: {}

2025-06-08T18:01:52.513257 - health_service - DEBUG - Function calculate_energy completed successfully
Extra: {}

2025-06-08T18:01:52.513257 - health_service - DEBUG - Calling calculate_macros
Extra: {}

2025-06-08T18:01:52.513257 - HealthService - DEBUG - Calculating macros for person info: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'current', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 0, 36, 516000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 0, 36, 516000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}, calories: 3066.944700000001
Extra: {}

2025-06-08T18:01:52.522304 - HealthService - DEBUG - Macros calculated: {'protein': 230.02085250000007, 'fat': 85.19290833333336, 'carbs': 345.0312787500001}
Extra: {}

2025-06-08T18:01:52.522304 - health_service - DEBUG - Function calculate_macros completed successfully
Extra: {}

2025-06-08T18:01:53.026486 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T18:01:53.107502 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T18:01:53.107502 - UserService - DEBUG - Getting user data for user_id: D721X62K8idr5roSRfN0TRgAJKZ2
Extra: {}

2025-06-08T18:01:53.107502 - UserService - DEBUG - Getting user data for user_id: D721X62K8idr5roSRfN0TRgAJKZ2
Extra: {}

2025-06-08T18:01:53.306489 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'current', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 0, 36, 516000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'last_metrics': {'bmi': 24.835646457268076, 'macros': {'protein': 230.02085250000007, 'fat': 85.19290833333336, 'carbs': 345.0312787500001}, 'bmr': 1978.6740000000004, 'tdee': 3066.944700000001, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 1, 49, 36000, tzinfo=datetime.timezone.utc)}, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 0, 36, 516000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T18:01:53.306993 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'current', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 0, 36, 516000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'last_metrics': {'bmi': 24.835646457268076, 'macros': {'protein': 230.02085250000007, 'fat': 85.19290833333336, 'carbs': 345.0312787500001}, 'bmr': 1978.6740000000004, 'tdee': 3066.944700000001, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 1, 49, 36000, tzinfo=datetime.timezone.utc)}, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 0, 36, 516000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T18:01:53.306993 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T18:01:58.192040 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T18:01:58.192040 - UserService - DEBUG - Getting user data for user_id: D721X62K8idr5roSRfN0TRgAJKZ2
Extra: {}

2025-06-08T18:01:58.192040 - UserService - DEBUG - Getting user data for user_id: D721X62K8idr5roSRfN0TRgAJKZ2
Extra: {}

2025-06-08T18:01:58.477275 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'current', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 0, 36, 516000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'last_metrics': {'bmi': 24.835646457268076, 'macros': {'protein': 230.02085250000007, 'fat': 85.19290833333336, 'carbs': 345.0312787500001}, 'bmr': 1978.6740000000004, 'tdee': 3066.944700000001, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 1, 49, 36000, tzinfo=datetime.timezone.utc)}, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 0, 36, 516000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T18:01:58.477275 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'current', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 0, 36, 516000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'last_metrics': {'bmi': 24.835646457268076, 'macros': {'protein': 230.02085250000007, 'fat': 85.19290833333336, 'carbs': 345.0312787500001}, 'bmr': 1978.6740000000004, 'tdee': 3066.944700000001, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 1, 49, 36000, tzinfo=datetime.timezone.utc)}, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 0, 36, 516000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T18:01:58.477275 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T18:02:42.955290 - UserService - DEBUG - Creating new user with email: test@example.com
Extra: {}

2025-06-08T18:02:42.955290 - UserService - DEBUG - Creating new user with email: test@example.com
Extra: {}

2025-06-08T18:02:42.955290 - UserService - DEBUG - Additional data: {}
Extra: {}

2025-06-08T18:02:42.955290 - UserService - DEBUG - Additional data: {}
Extra: {}

2025-06-08T18:02:43.191518 - UserService - DEBUG - User data saved to Firestore: {'email': 'test@example.com', 'display_name': '', 'created_at': Sentinel: Value used to set a document field to the server timestamp., 'last_login': Sentinel: Value used to set a document field to the server timestamp.}
Extra: {}

2025-06-08T18:02:43.191518 - UserService - DEBUG - User data saved to Firestore: {'email': 'test@example.com', 'display_name': '', 'created_at': Sentinel: Value used to set a document field to the server timestamp., 'last_login': Sentinel: Value used to set a document field to the server timestamp.}
Extra: {}

2025-06-08T18:02:55.403047 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T18:02:55.404747 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T18:02:55.712190 - UserRoutes - INFO - User profile retrieved successfully
Extra: {}

2025-06-08T18:02:55.712190 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T18:03:33.547083 - UserRoutes - INFO - API Request: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T18:03:33.558761 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T18:03:33.559893 - UserRoutes - DEBUG - Updating user profile
Extra: {}

2025-06-08T18:03:33.809035 - UserRoutes - INFO - User profile updated successfully
Extra: {}

2025-06-08T18:03:33.809035 - UserRoutes - INFO - API Response: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T18:03:39.181618 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T18:03:39.181618 - UserService - DEBUG - Getting user data for user_id: hqYtRZZVXbfIRsIFyQjiME4AHwG2
Extra: {}

2025-06-08T18:03:39.181618 - UserService - DEBUG - Getting user data for user_id: hqYtRZZVXbfIRsIFyQjiME4AHwG2
Extra: {}

2025-06-08T18:03:39.401107 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'email': 'test@example.com'}
Extra: {}

2025-06-08T18:03:39.401659 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'email': 'test@example.com'}
Extra: {}

2025-06-08T18:03:39.401659 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T18:03:40.013640 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T18:03:40.049747 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T18:03:40.051766 - UserService - DEBUG - Getting user data for user_id: hqYtRZZVXbfIRsIFyQjiME4AHwG2
Extra: {}

2025-06-08T18:03:40.053356 - UserService - DEBUG - Getting user data for user_id: hqYtRZZVXbfIRsIFyQjiME4AHwG2
Extra: {}

2025-06-08T18:03:40.270046 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'email': 'test@example.com'}
Extra: {}

2025-06-08T18:03:40.270773 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'email': 'test@example.com'}
Extra: {}

2025-06-08T18:03:40.270773 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T18:03:40.270773 - health_service - DEBUG - Calling calculate_bmi
Extra: {}

2025-06-08T18:03:40.270773 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'email': 'test@example.com'}
Extra: {}

2025-06-08T18:03:40.270773 - HealthService - DEBUG - BMI calculated: 24.835646457268076, Classification: normal weight
Extra: {}

2025-06-08T18:03:40.270773 - health_service - DEBUG - Function calculate_bmi completed successfully
Extra: {}

2025-06-08T18:03:40.270773 - health_service - DEBUG - Calling calculate_energy
Extra: {}

2025-06-08T18:03:40.270773 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'email': 'test@example.com'}
Extra: {}

2025-06-08T18:03:40.276813 - HealthService - DEBUG - Energy metrics calculated - BMR: 1978.67, TDEE: 2720.68
Extra: {}

2025-06-08T18:03:40.278832 - health_service - DEBUG - Function calculate_energy completed successfully
Extra: {}

2025-06-08T18:03:40.289666 - health_service - DEBUG - Calling calculate_macros
Extra: {}

2025-06-08T18:03:40.291697 - HealthService - DEBUG - Calculating macros for person info: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'email': 'test@example.com'}, calories: 2720.6767500000005
Extra: {}

2025-06-08T18:03:40.291697 - HealthService - DEBUG - Macros calculated: {'protein': 204.05075625000003, 'fat': 75.57435416666668, 'carbs': 306.0761343750001}
Extra: {}

2025-06-08T18:03:40.291697 - health_service - DEBUG - Function calculate_macros completed successfully
Extra: {}

2025-06-08T18:03:40.877357 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T18:03:41.051623 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T18:03:41.053966 - UserService - DEBUG - Getting user data for user_id: hqYtRZZVXbfIRsIFyQjiME4AHwG2
Extra: {}

2025-06-08T18:03:41.055890 - UserService - DEBUG - Getting user data for user_id: hqYtRZZVXbfIRsIFyQjiME4AHwG2
Extra: {}

2025-06-08T18:03:41.261973 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'last_metrics': {'bmi': 24.835646457268076, 'macros': {'protein': 204.05075625000003, 'fat': 75.57435416666668, 'carbs': 306.0761343750001}, 'bmr': 1978.6740000000004, 'tdee': 2720.6767500000005, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 3, 36, 848000, tzinfo=datetime.timezone.utc)}, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'email': 'test@example.com'}
Extra: {}

2025-06-08T18:03:41.261973 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'last_metrics': {'bmi': 24.835646457268076, 'macros': {'protein': 204.05075625000003, 'fat': 75.57435416666668, 'carbs': 306.0761343750001}, 'bmr': 1978.6740000000004, 'tdee': 2720.6767500000005, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 3, 36, 848000, tzinfo=datetime.timezone.utc)}, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'email': 'test@example.com'}
Extra: {}

2025-06-08T18:03:41.261973 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T18:03:44.023358 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T18:03:44.028101 - UserService - DEBUG - Getting user data for user_id: hqYtRZZVXbfIRsIFyQjiME4AHwG2
Extra: {}

2025-06-08T18:03:44.028101 - UserService - DEBUG - Getting user data for user_id: hqYtRZZVXbfIRsIFyQjiME4AHwG2
Extra: {}

2025-06-08T18:03:44.259969 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'last_metrics': {'bmi': 24.835646457268076, 'macros': {'protein': 204.05075625000003, 'fat': 75.57435416666668, 'carbs': 306.0761343750001}, 'bmr': 1978.6740000000004, 'tdee': 2720.6767500000005, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 3, 36, 848000, tzinfo=datetime.timezone.utc)}, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'email': 'test@example.com'}
Extra: {}

2025-06-08T18:03:44.259969 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'last_metrics': {'bmi': 24.835646457268076, 'macros': {'protein': 204.05075625000003, 'fat': 75.57435416666668, 'carbs': 306.0761343750001}, 'bmr': 1978.6740000000004, 'tdee': 2720.6767500000005, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 3, 36, 848000, tzinfo=datetime.timezone.utc)}, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'email': 'test@example.com'}
Extra: {}

2025-06-08T18:03:44.261985 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T18:03:48.687959 - health_routes - INFO - API Request: GET http://192.168.1.25:5000/api/health/advice
Extra: {}

2025-06-08T18:03:48.954285 - health_routes - INFO - API Response: GET http://192.168.1.25:5000/api/health/advice
Extra: {}

2025-06-08T18:03:50.210166 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/advice
Extra: {}

2025-06-08T18:03:50.210166 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T18:03:50.210166 - UserService - DEBUG - Getting user data for user_id: hqYtRZZVXbfIRsIFyQjiME4AHwG2
Extra: {}

2025-06-08T18:03:50.210166 - UserService - DEBUG - Getting user data for user_id: hqYtRZZVXbfIRsIFyQjiME4AHwG2
Extra: {}

2025-06-08T18:03:50.503958 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'last_metrics': {'bmi': 24.835646457268076, 'macros': {'protein': 204.05075625000003, 'fat': 75.57435416666668, 'carbs': 306.0761343750001}, 'bmr': 1978.6740000000004, 'tdee': 2720.6767500000005, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 3, 36, 848000, tzinfo=datetime.timezone.utc)}, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'email': 'test@example.com'}
Extra: {}

2025-06-08T18:03:50.503958 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'last_metrics': {'bmi': 24.835646457268076, 'macros': {'protein': 204.05075625000003, 'fat': 75.57435416666668, 'carbs': 306.0761343750001}, 'bmr': 1978.6740000000004, 'tdee': 2720.6767500000005, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 3, 36, 848000, tzinfo=datetime.timezone.utc)}, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'email': 'test@example.com'}
Extra: {}

2025-06-08T18:03:50.503958 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T18:03:50.503958 - health_service - DEBUG - Calling calculate_bmi
Extra: {}

2025-06-08T18:03:50.503958 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'last_metrics': {'bmi': 24.835646457268076, 'macros': {'protein': 204.05075625000003, 'fat': 75.57435416666668, 'carbs': 306.0761343750001}, 'bmr': 1978.6740000000004, 'tdee': 2720.6767500000005, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 3, 36, 848000, tzinfo=datetime.timezone.utc)}, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'email': 'test@example.com'}
Extra: {}

2025-06-08T18:03:50.503958 - HealthService - DEBUG - BMI calculated: 24.835646457268076, Classification: normal weight
Extra: {}

2025-06-08T18:03:50.503958 - health_service - DEBUG - Function calculate_bmi completed successfully
Extra: {}

2025-06-08T18:03:50.503958 - health_service - DEBUG - Calling calculate_energy
Extra: {}

2025-06-08T18:03:50.512018 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'last_metrics': {'bmi': 24.835646457268076, 'macros': {'protein': 204.05075625000003, 'fat': 75.57435416666668, 'carbs': 306.0761343750001}, 'bmr': 1978.6740000000004, 'tdee': 2720.6767500000005, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 3, 36, 848000, tzinfo=datetime.timezone.utc)}, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'email': 'test@example.com'}
Extra: {}

2025-06-08T18:03:50.512018 - HealthService - DEBUG - Energy metrics calculated - BMR: 1978.67, TDEE: 2720.68
Extra: {}

2025-06-08T18:03:50.512018 - health_service - DEBUG - Function calculate_energy completed successfully
Extra: {}

2025-06-08T18:03:50.522408 - AIService - DEBUG - Calling generate_health_advice
Extra: {}

2025-06-08T18:03:50.536658 - AIService - DEBUG - Generating health advice for user data: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'last_metrics': {'bmi': 24.835646457268076, 'macros': {'protein': 204.05075625000003, 'fat': 75.57435416666668, 'carbs': 306.0761343750001}, 'bmr': 1978.6740000000004, 'tdee': 2720.6767500000005, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 3, 36, 848000, tzinfo=datetime.timezone.utc)}, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'email': 'test@example.com'}
Extra: {}

2025-06-08T18:03:50.536658 - AIService - DEBUG - Metrics: {'bmi': 24.835646457268076, 'bmi_class': 'normal weight', 'bmr': 1978.6740000000004, 'tdee': 2720.6767500000005}
Extra: {}

2025-06-08T18:03:50.536658 - AIService - DEBUG - Getting response for prompt: 
        Provide comprehensive health advice for:
        - 24 year old Male
        - Height: 185m,...
Extra: {}

2025-06-08T18:03:50.536658 - AIService - DEBUG - Output class: HealthAdvice
Extra: {}

2025-06-08T18:03:54.550114 - AIService - DEBUG - Response received: [
  {
    "general_recommendations": "Maintain a balanced lifestyle by prioritizing sleep (7-9 hours...
Extra: {}

2025-06-08T18:03:54.550114 - AIService - DEBUG - Health advice generated successfully
Extra: {}

2025-06-08T18:03:54.550114 - AIService - DEBUG - Function generate_health_advice completed successfully
Extra: {}

2025-06-08T18:03:54.788901 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/advice
Extra: {}

2025-06-08T18:04:04.574619 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/diabetes_check
Extra: {}

2025-06-08T18:04:04.574619 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T18:04:04.574619 - UserService - DEBUG - Getting user data for user_id: hqYtRZZVXbfIRsIFyQjiME4AHwG2
Extra: {}

2025-06-08T18:04:04.574619 - UserService - DEBUG - Getting user data for user_id: hqYtRZZVXbfIRsIFyQjiME4AHwG2
Extra: {}

2025-06-08T18:04:05.048164 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'last_metrics': {'bmi': 24.835646457268076, 'macros': {'protein': 204.05075625000003, 'fat': 75.57435416666668, 'carbs': 306.0761343750001}, 'bmr': 1978.6740000000004, 'tdee': 2720.6767500000005, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 3, 36, 848000, tzinfo=datetime.timezone.utc)}, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'email': 'test@example.com'}
Extra: {}

2025-06-08T18:04:05.048164 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'last_metrics': {'bmi': 24.835646457268076, 'macros': {'protein': 204.05075625000003, 'fat': 75.57435416666668, 'carbs': 306.0761343750001}, 'bmr': 1978.6740000000004, 'tdee': 2720.6767500000005, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 3, 36, 848000, tzinfo=datetime.timezone.utc)}, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'email': 'test@example.com'}
Extra: {}

2025-06-08T18:04:05.048164 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T18:04:05.048164 - health_service - DEBUG - Calling check_diabetes_risk
Extra: {}

2025-06-08T18:04:05.053113 - HealthService - DEBUG - Checking diabetes risk for user data: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'hba1c_level': 5, 'age': 24, 'heart_disease': False, 'last_metrics': {'bmi': 24.835646457268076, 'macros': {'protein': 204.05075625000003, 'fat': 75.57435416666668, 'carbs': 306.0761343750001}, 'bmr': 1978.6740000000004, 'tdee': 2720.6767500000005, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 3, 36, 848000, tzinfo=datetime.timezone.utc)}, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 2, 39, 195000, tzinfo=datetime.timezone.utc), 'email': 'test@example.com'}
Extra: {}

2025-06-08T18:04:05.055646 - HealthService - ERROR - Error checking diabetes risk: 'hba1c'
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 135, in check_diabetes_risk
    "hbA1c_level": [user_data['hba1c']],
KeyError: 'hba1c'

2025-06-08T18:04:05.065739 - health_service - ERROR - Error in check_diabetes_risk
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 135, in check_diabetes_risk
    "hbA1c_level": [user_data['hba1c']],
KeyError: 'hba1c'

2025-06-08T18:04:05.067757 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/diabetes_check
Extra: {}

2025-06-08T18:05:12.232202 - UserService - DEBUG - Creating new user with email: test2@test.com
Extra: {}

2025-06-08T18:05:12.232202 - UserService - DEBUG - Creating new user with email: test2@test.com
Extra: {}

2025-06-08T18:05:12.232202 - UserService - DEBUG - Additional data: {}
Extra: {}

2025-06-08T18:05:12.233065 - UserService - DEBUG - Additional data: {}
Extra: {}

2025-06-08T18:05:13.258714 - UserService - DEBUG - User data saved to Firestore: {'email': 'test2@test.com', 'display_name': '', 'created_at': Sentinel: Value used to set a document field to the server timestamp., 'last_login': Sentinel: Value used to set a document field to the server timestamp.}
Extra: {}

2025-06-08T18:05:13.259728 - UserService - DEBUG - User data saved to Firestore: {'email': 'test2@test.com', 'display_name': '', 'created_at': Sentinel: Value used to set a document field to the server timestamp., 'last_login': Sentinel: Value used to set a document field to the server timestamp.}
Extra: {}

2025-06-08T18:05:24.312344 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T18:05:24.317505 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T18:05:24.802888 - UserRoutes - INFO - User profile retrieved successfully
Extra: {}

2025-06-08T18:05:24.802888 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T18:05:49.452206 - UserRoutes - INFO - API Request: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T18:05:49.462671 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T18:05:49.462671 - UserRoutes - DEBUG - Updating user profile
Extra: {}

2025-06-08T18:05:49.786915 - UserRoutes - INFO - User profile updated successfully
Extra: {}

2025-06-08T18:05:49.800955 - UserRoutes - INFO - API Response: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T18:05:55.053061 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T18:05:55.053061 - UserService - DEBUG - Getting user data for user_id: jflXX14xjVOtOepCPc8VOwzrcjM2
Extra: {}

2025-06-08T18:05:55.053061 - UserService - DEBUG - Getting user data for user_id: jflXX14xjVOtOepCPc8VOwzrcjM2
Extra: {}

2025-06-08T18:05:55.257759 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 5, 9, 268000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': False, 'blood_glucose_level': 95, 'weight': 88, 'age': 24, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 5, 9, 268000, tzinfo=datetime.timezone.utc), 'email': 'test2@test.com'}
Extra: {}

2025-06-08T18:05:55.266404 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 5, 9, 268000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': False, 'blood_glucose_level': 95, 'weight': 88, 'age': 24, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 5, 9, 268000, tzinfo=datetime.timezone.utc), 'email': 'test2@test.com'}
Extra: {}

2025-06-08T18:05:55.266404 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T18:05:55.636018 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T18:05:55.636018 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T18:05:55.636018 - UserService - DEBUG - Getting user data for user_id: jflXX14xjVOtOepCPc8VOwzrcjM2
Extra: {}

2025-06-08T18:05:55.636018 - UserService - DEBUG - Getting user data for user_id: jflXX14xjVOtOepCPc8VOwzrcjM2
Extra: {}

2025-06-08T18:05:55.843264 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 5, 9, 268000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': False, 'blood_glucose_level': 95, 'weight': 88, 'age': 24, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 5, 9, 268000, tzinfo=datetime.timezone.utc), 'email': 'test2@test.com'}
Extra: {}

2025-06-08T18:05:55.845311 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 5, 9, 268000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': False, 'blood_glucose_level': 95, 'weight': 88, 'age': 24, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 5, 9, 268000, tzinfo=datetime.timezone.utc), 'email': 'test2@test.com'}
Extra: {}

2025-06-08T18:05:55.845311 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T18:05:55.845311 - health_service - DEBUG - Calling calculate_bmi
Extra: {}

2025-06-08T18:05:55.845311 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 5, 9, 268000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': False, 'blood_glucose_level': 95, 'weight': 88, 'age': 24, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 5, 9, 268000, tzinfo=datetime.timezone.utc), 'email': 'test2@test.com'}
Extra: {}

2025-06-08T18:05:55.847783 - HealthService - DEBUG - BMI calculated: 25.712198685171657, Classification: overweight
Extra: {}

2025-06-08T18:05:55.847783 - health_service - DEBUG - Function calculate_bmi completed successfully
Extra: {}

2025-06-08T18:05:55.847783 - health_service - DEBUG - Calling calculate_energy
Extra: {}

2025-06-08T18:05:55.847783 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 5, 9, 268000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': False, 'blood_glucose_level': 95, 'weight': 88, 'age': 24, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 5, 9, 268000, tzinfo=datetime.timezone.utc), 'email': 'test2@test.com'}
Extra: {}

2025-06-08T18:05:55.849797 - HealthService - DEBUG - Energy metrics calculated - BMR: 2018.87, TDEE: 2775.94
Extra: {}

2025-06-08T18:05:55.849797 - health_service - DEBUG - Function calculate_energy completed successfully
Extra: {}

2025-06-08T18:05:55.849797 - health_service - DEBUG - Calling calculate_macros
Extra: {}

2025-06-08T18:05:55.851574 - HealthService - DEBUG - Calculating macros for person info: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 5, 9, 268000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': False, 'blood_glucose_level': 95, 'weight': 88, 'age': 24, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 5, 9, 268000, tzinfo=datetime.timezone.utc), 'email': 'test2@test.com'}, calories: 2775.9393750000004
Extra: {}

2025-06-08T18:05:55.851574 - HealthService - DEBUG - Macros calculated: {'protein': 208.19545312500003, 'fat': 77.10942708333334, 'carbs': 312.29317968750007}
Extra: {}

2025-06-08T18:05:55.851574 - health_service - DEBUG - Function calculate_macros completed successfully
Extra: {}

2025-06-08T18:05:56.453651 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T18:05:56.642177 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T18:05:56.644930 - UserService - DEBUG - Getting user data for user_id: jflXX14xjVOtOepCPc8VOwzrcjM2
Extra: {}

2025-06-08T18:05:56.644930 - UserService - DEBUG - Getting user data for user_id: jflXX14xjVOtOepCPc8VOwzrcjM2
Extra: {}

2025-06-08T18:05:56.969183 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 5, 9, 268000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': False, 'blood_glucose_level': 95, 'weight': 88, 'age': 24, 'last_metrics': {'bmi': 25.712198685171657, 'macros': {'protein': 208.19545312500003, 'fat': 77.10942708333334, 'carbs': 312.29317968750007}, 'bmr': 2018.8650000000002, 'tdee': 2775.9393750000004, 'bmi_class': 'overweight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 5, 52, 420000, tzinfo=datetime.timezone.utc)}, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 5, 9, 268000, tzinfo=datetime.timezone.utc), 'email': 'test2@test.com'}
Extra: {}

2025-06-08T18:05:56.969183 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 5, 9, 268000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': False, 'blood_glucose_level': 95, 'weight': 88, 'age': 24, 'last_metrics': {'bmi': 25.712198685171657, 'macros': {'protein': 208.19545312500003, 'fat': 77.10942708333334, 'carbs': 312.29317968750007}, 'bmr': 2018.8650000000002, 'tdee': 2775.9393750000004, 'bmi_class': 'overweight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 5, 52, 420000, tzinfo=datetime.timezone.utc)}, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 5, 9, 268000, tzinfo=datetime.timezone.utc), 'email': 'test2@test.com'}
Extra: {}

2025-06-08T18:05:56.970075 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T18:06:00.492254 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/diabetes_check
Extra: {}

2025-06-08T18:06:00.508169 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T18:06:00.508169 - UserService - DEBUG - Getting user data for user_id: jflXX14xjVOtOepCPc8VOwzrcjM2
Extra: {}

2025-06-08T18:06:00.508169 - UserService - DEBUG - Getting user data for user_id: jflXX14xjVOtOepCPc8VOwzrcjM2
Extra: {}

2025-06-08T18:06:00.713408 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 5, 9, 268000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': False, 'blood_glucose_level': 95, 'weight': 88, 'age': 24, 'last_metrics': {'bmi': 25.712198685171657, 'macros': {'protein': 208.19545312500003, 'fat': 77.10942708333334, 'carbs': 312.29317968750007}, 'bmr': 2018.8650000000002, 'tdee': 2775.9393750000004, 'bmi_class': 'overweight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 5, 52, 420000, tzinfo=datetime.timezone.utc)}, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 5, 9, 268000, tzinfo=datetime.timezone.utc), 'email': 'test2@test.com'}
Extra: {}

2025-06-08T18:06:00.714766 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 5, 9, 268000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': False, 'blood_glucose_level': 95, 'weight': 88, 'age': 24, 'last_metrics': {'bmi': 25.712198685171657, 'macros': {'protein': 208.19545312500003, 'fat': 77.10942708333334, 'carbs': 312.29317968750007}, 'bmr': 2018.8650000000002, 'tdee': 2775.9393750000004, 'bmi_class': 'overweight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 5, 52, 420000, tzinfo=datetime.timezone.utc)}, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 5, 9, 268000, tzinfo=datetime.timezone.utc), 'email': 'test2@test.com'}
Extra: {}

2025-06-08T18:06:00.714766 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T18:06:00.714766 - health_service - DEBUG - Calling check_diabetes_risk
Extra: {}

2025-06-08T18:06:00.714766 - HealthService - DEBUG - Checking diabetes risk for user data: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 5, 9, 268000, tzinfo=datetime.timezone.utc), 'location': 'California', 'heart_disease': False, 'blood_glucose_level': 95, 'weight': 88, 'age': 24, 'last_metrics': {'bmi': 25.712198685171657, 'macros': {'protein': 208.19545312500003, 'fat': 77.10942708333334, 'carbs': 312.29317968750007}, 'bmr': 2018.8650000000002, 'tdee': 2775.9393750000004, 'bmi_class': 'overweight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 15, 5, 52, 420000, tzinfo=datetime.timezone.utc)}, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 15, 5, 9, 268000, tzinfo=datetime.timezone.utc), 'email': 'test2@test.com'}
Extra: {}

2025-06-08T18:06:00.714766 - HealthService - ERROR - Error checking diabetes risk: 'smoking_history'
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 133, in check_diabetes_risk
    "smoking_history": [smoking_encoding[user_data['smoking_history']]],
KeyError: 'smoking_history'

2025-06-08T18:06:00.718302 - health_service - ERROR - Error in check_diabetes_risk
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 133, in check_diabetes_risk
    "smoking_history": [smoking_encoding[user_data['smoking_history']]],
KeyError: 'smoking_history'

2025-06-08T18:06:00.720937 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/diabetes_check
Extra: {}

2025-06-08T19:02:20.445850 - UserService - DEBUG - Creating new user with email: test3@test.com
Extra: {}

2025-06-08T19:02:20.445850 - UserService - DEBUG - Creating new user with email: test3@test.com
Extra: {}

2025-06-08T19:02:20.445850 - UserService - DEBUG - Additional data: {}
Extra: {}

2025-06-08T19:02:20.445850 - UserService - DEBUG - Additional data: {}
Extra: {}

2025-06-08T19:02:21.281153 - UserService - DEBUG - User data saved to Firestore: {'email': 'test3@test.com', 'display_name': '', 'created_at': Sentinel: Value used to set a document field to the server timestamp., 'last_login': Sentinel: Value used to set a document field to the server timestamp.}
Extra: {}

2025-06-08T19:02:21.281153 - UserService - DEBUG - User data saved to Firestore: {'email': 'test3@test.com', 'display_name': '', 'created_at': Sentinel: Value used to set a document field to the server timestamp., 'last_login': Sentinel: Value used to set a document field to the server timestamp.}
Extra: {}

2025-06-08T19:02:36.003690 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T19:02:36.014752 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T19:02:36.236003 - UserRoutes - INFO - User profile retrieved successfully
Extra: {}

2025-06-08T19:02:36.236003 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T19:03:36.162675 - UserRoutes - INFO - API Request: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T19:03:36.163948 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T19:03:36.171103 - UserRoutes - DEBUG - Updating user profile
Extra: {}

2025-06-08T19:03:36.459003 - UserRoutes - INFO - User profile updated successfully
Extra: {}

2025-06-08T19:03:36.459003 - UserRoutes - INFO - API Response: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T19:03:40.811787 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T19:03:40.813092 - UserService - DEBUG - Getting user data for user_id: am165mg7xWhiz8a1LaiWZsZ89nn2
Extra: {}

2025-06-08T19:03:40.813092 - UserService - DEBUG - Getting user data for user_id: am165mg7xWhiz8a1LaiWZsZ89nn2
Extra: {}

2025-06-08T19:03:41.059121 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 2, 17, 273000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'heart_disease': False, 'age': 24, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 2, 17, 273000, tzinfo=datetime.timezone.utc), 'email': 'test3@test.com'}
Extra: {}

2025-06-08T19:03:41.059121 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 2, 17, 273000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'heart_disease': False, 'age': 24, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 2, 17, 273000, tzinfo=datetime.timezone.utc), 'email': 'test3@test.com'}
Extra: {}

2025-06-08T19:03:41.059121 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T19:03:42.093929 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T19:03:42.093929 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T19:03:42.110663 - UserService - DEBUG - Getting user data for user_id: am165mg7xWhiz8a1LaiWZsZ89nn2
Extra: {}

2025-06-08T19:03:42.110663 - UserService - DEBUG - Getting user data for user_id: am165mg7xWhiz8a1LaiWZsZ89nn2
Extra: {}

2025-06-08T19:03:42.399139 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 2, 17, 273000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'heart_disease': False, 'age': 24, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 2, 17, 273000, tzinfo=datetime.timezone.utc), 'email': 'test3@test.com'}
Extra: {}

2025-06-08T19:03:42.399139 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 2, 17, 273000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'heart_disease': False, 'age': 24, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 2, 17, 273000, tzinfo=datetime.timezone.utc), 'email': 'test3@test.com'}
Extra: {}

2025-06-08T19:03:42.399139 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T19:03:42.399139 - health_service - DEBUG - Calling calculate_bmi
Extra: {}

2025-06-08T19:03:42.399139 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 2, 17, 273000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'heart_disease': False, 'age': 24, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 2, 17, 273000, tzinfo=datetime.timezone.utc), 'email': 'test3@test.com'}
Extra: {}

2025-06-08T19:03:42.417081 - HealthService - DEBUG - BMI calculated: 24.835646457268076, Classification: normal weight
Extra: {}

2025-06-08T19:03:42.417081 - health_service - DEBUG - Function calculate_bmi completed successfully
Extra: {}

2025-06-08T19:03:42.417081 - health_service - DEBUG - Calling calculate_energy
Extra: {}

2025-06-08T19:03:42.417081 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 2, 17, 273000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'heart_disease': False, 'age': 24, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 2, 17, 273000, tzinfo=datetime.timezone.utc), 'email': 'test3@test.com'}
Extra: {}

2025-06-08T19:03:42.417081 - HealthService - DEBUG - Energy metrics calculated - BMR: 1978.67, TDEE: 3066.94
Extra: {}

2025-06-08T19:03:42.423186 - health_service - DEBUG - Function calculate_energy completed successfully
Extra: {}

2025-06-08T19:03:42.423186 - health_service - DEBUG - Calling calculate_macros
Extra: {}

2025-06-08T19:03:42.425164 - HealthService - DEBUG - Calculating macros for person info: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 2, 17, 273000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'heart_disease': False, 'age': 24, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 2, 17, 273000, tzinfo=datetime.timezone.utc), 'email': 'test3@test.com'}, calories: 3066.944700000001
Extra: {}

2025-06-08T19:03:42.425164 - HealthService - DEBUG - Macros calculated: {'protein': 230.02085250000007, 'fat': 85.19290833333336, 'carbs': 345.0312787500001}
Extra: {}

2025-06-08T19:03:42.425164 - health_service - DEBUG - Function calculate_macros completed successfully
Extra: {}

2025-06-08T19:03:42.885589 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T19:03:43.020191 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T19:03:43.020191 - UserService - DEBUG - Getting user data for user_id: am165mg7xWhiz8a1LaiWZsZ89nn2
Extra: {}

2025-06-08T19:03:43.020191 - UserService - DEBUG - Getting user data for user_id: am165mg7xWhiz8a1LaiWZsZ89nn2
Extra: {}

2025-06-08T19:03:43.523828 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 2, 17, 273000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'heart_disease': False, 'age': 24, 'last_metrics': {'bmi': 24.835646457268076, 'macros': {'protein': 230.02085250000007, 'fat': 85.19290833333336, 'carbs': 345.0312787500001}, 'bmr': 1978.6740000000004, 'tdee': 3066.944700000001, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 3, 38, 897000, tzinfo=datetime.timezone.utc)}, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 2, 17, 273000, tzinfo=datetime.timezone.utc), 'email': 'test3@test.com'}
Extra: {}

2025-06-08T19:03:43.523828 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 2, 17, 273000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'heart_disease': False, 'age': 24, 'last_metrics': {'bmi': 24.835646457268076, 'macros': {'protein': 230.02085250000007, 'fat': 85.19290833333336, 'carbs': 345.0312787500001}, 'bmr': 1978.6740000000004, 'tdee': 3066.944700000001, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 3, 38, 897000, tzinfo=datetime.timezone.utc)}, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 2, 17, 273000, tzinfo=datetime.timezone.utc), 'email': 'test3@test.com'}
Extra: {}

2025-06-08T19:03:43.523828 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T19:03:46.378835 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/diabetes_check
Extra: {}

2025-06-08T19:03:46.380590 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T19:03:46.380590 - UserService - DEBUG - Getting user data for user_id: am165mg7xWhiz8a1LaiWZsZ89nn2
Extra: {}

2025-06-08T19:03:46.382604 - UserService - DEBUG - Getting user data for user_id: am165mg7xWhiz8a1LaiWZsZ89nn2
Extra: {}

2025-06-08T19:03:46.596285 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 2, 17, 273000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'heart_disease': False, 'age': 24, 'last_metrics': {'bmi': 24.835646457268076, 'macros': {'protein': 230.02085250000007, 'fat': 85.19290833333336, 'carbs': 345.0312787500001}, 'bmr': 1978.6740000000004, 'tdee': 3066.944700000001, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 3, 38, 897000, tzinfo=datetime.timezone.utc)}, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 2, 17, 273000, tzinfo=datetime.timezone.utc), 'email': 'test3@test.com'}
Extra: {}

2025-06-08T19:03:46.602817 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 2, 17, 273000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'heart_disease': False, 'age': 24, 'last_metrics': {'bmi': 24.835646457268076, 'macros': {'protein': 230.02085250000007, 'fat': 85.19290833333336, 'carbs': 345.0312787500001}, 'bmr': 1978.6740000000004, 'tdee': 3066.944700000001, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 3, 38, 897000, tzinfo=datetime.timezone.utc)}, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 2, 17, 273000, tzinfo=datetime.timezone.utc), 'email': 'test3@test.com'}
Extra: {}

2025-06-08T19:03:46.602817 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T19:03:46.602817 - health_service - DEBUG - Calling check_diabetes_risk
Extra: {}

2025-06-08T19:03:46.602817 - HealthService - DEBUG - Checking diabetes risk for user data: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 2, 17, 273000, tzinfo=datetime.timezone.utc), 'location': 'California', 'weight': 85, 'blood_glucose_level': 95, 'heart_disease': False, 'age': 24, 'last_metrics': {'bmi': 24.835646457268076, 'macros': {'protein': 230.02085250000007, 'fat': 85.19290833333336, 'carbs': 345.0312787500001}, 'bmr': 1978.6740000000004, 'tdee': 3066.944700000001, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 3, 38, 897000, tzinfo=datetime.timezone.utc)}, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 2, 17, 273000, tzinfo=datetime.timezone.utc), 'email': 'test3@test.com'}
Extra: {}

2025-06-08T19:03:46.602817 - HealthService - ERROR - Error checking diabetes risk: 'blood_glucose'
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 136, in check_diabetes_risk
    "blood_glucose_level": [user_data['blood_glucose']],
KeyError: 'blood_glucose'

2025-06-08T19:03:46.611914 - health_service - ERROR - Error in check_diabetes_risk
Extra: {}
Traceback (most recent call last):
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\utils\logger.py", line 91, in wrapper
    result = func(*func_args, **func_kwargs)
  File "C:\Users\kingc\dev\Nada\blehblohblih\backend\services\health_service.py", line 136, in check_diabetes_risk
    "blood_glucose_level": [user_data['blood_glucose']],
KeyError: 'blood_glucose'

2025-06-08T19:03:46.611914 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/diabetes_check
Extra: {}

2025-06-08T19:15:41.481150 - UserService - DEBUG - Creating new user with email: test@test.com
Extra: {}

2025-06-08T19:15:41.481150 - UserService - DEBUG - Creating new user with email: test@test.com
Extra: {}

2025-06-08T19:15:41.481150 - UserService - DEBUG - Additional data: {}
Extra: {}

2025-06-08T19:15:41.481150 - UserService - DEBUG - Additional data: {}
Extra: {}

2025-06-08T19:15:41.894059 - UserService - DEBUG - User data saved to Firestore: {'email': 'test@test.com', 'display_name': '', 'created_at': Sentinel: Value used to set a document field to the server timestamp., 'last_login': Sentinel: Value used to set a document field to the server timestamp.}
Extra: {}

2025-06-08T19:15:41.894059 - UserService - DEBUG - User data saved to Firestore: {'email': 'test@test.com', 'display_name': '', 'created_at': Sentinel: Value used to set a document field to the server timestamp., 'last_login': Sentinel: Value used to set a document field to the server timestamp.}
Extra: {}

2025-06-08T19:15:55.920360 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T19:15:55.937922 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T19:15:56.143610 - UserRoutes - INFO - User profile retrieved successfully
Extra: {}

2025-06-08T19:15:56.143610 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T19:16:43.331002 - UserRoutes - INFO - API Request: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T19:16:43.338121 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T19:16:43.339526 - UserRoutes - DEBUG - Updating user profile
Extra: {}

2025-06-08T19:16:43.579693 - UserRoutes - INFO - User profile updated successfully
Extra: {}

2025-06-08T19:16:43.579693 - UserRoutes - INFO - API Response: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T19:16:47.502907 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T19:16:47.505944 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T19:16:47.714348 - UserRoutes - INFO - User profile retrieved successfully
Extra: {}

2025-06-08T19:16:47.726481 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T19:16:52.708662 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T19:16:52.708662 - UserService - DEBUG - Getting user data for user_id: 0WUFpVTpjkhbt6hM0J3ySHjoYpb2
Extra: {}

2025-06-08T19:16:52.708662 - UserService - DEBUG - Getting user data for user_id: 0WUFpVTpjkhbt6hM0J3ySHjoYpb2
Extra: {}

2025-06-08T19:16:52.936848 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 15, 37, 897000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 95, 'weight': 120, 'heart_disease': False, 'age': 24, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 15, 37, 897000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T19:16:52.936848 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 15, 37, 897000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 95, 'weight': 120, 'heart_disease': False, 'age': 24, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 15, 37, 897000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T19:16:52.936848 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T19:16:53.728577 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T19:16:53.729443 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T19:16:53.730121 - UserService - DEBUG - Getting user data for user_id: 0WUFpVTpjkhbt6hM0J3ySHjoYpb2
Extra: {}

2025-06-08T19:16:53.730121 - UserService - DEBUG - Getting user data for user_id: 0WUFpVTpjkhbt6hM0J3ySHjoYpb2
Extra: {}

2025-06-08T19:16:53.987860 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 15, 37, 897000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 95, 'weight': 120, 'heart_disease': False, 'age': 24, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 15, 37, 897000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T19:16:53.987860 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 15, 37, 897000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 95, 'weight': 120, 'heart_disease': False, 'age': 24, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 15, 37, 897000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T19:16:53.987860 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T19:16:53.987860 - health_service - DEBUG - Calling calculate_bmi
Extra: {}

2025-06-08T19:16:53.987860 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 15, 37, 897000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 95, 'weight': 120, 'heart_disease': False, 'age': 24, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 15, 37, 897000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T19:16:53.987860 - HealthService - DEBUG - BMI calculated: 35.06208911614317, Classification: obese
Extra: {}

2025-06-08T19:16:53.987860 - health_service - DEBUG - Function calculate_bmi completed successfully
Extra: {}

2025-06-08T19:16:53.987860 - health_service - DEBUG - Calling calculate_energy
Extra: {}

2025-06-08T19:16:53.987860 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 15, 37, 897000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 95, 'weight': 120, 'heart_disease': False, 'age': 24, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 15, 37, 897000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T19:16:53.987860 - HealthService - DEBUG - Energy metrics calculated - BMR: 2447.57, TDEE: 3793.73
Extra: {}

2025-06-08T19:16:53.987860 - health_service - DEBUG - Function calculate_energy completed successfully
Extra: {}

2025-06-08T19:16:53.987860 - health_service - DEBUG - Calling calculate_macros
Extra: {}

2025-06-08T19:16:53.987860 - HealthService - DEBUG - Calculating macros for person info: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 15, 37, 897000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 95, 'weight': 120, 'heart_disease': False, 'age': 24, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 15, 37, 897000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}, calories: 3793.73195
Extra: {}

2025-06-08T19:16:53.987860 - HealthService - DEBUG - Macros calculated: {'protein': 284.52989625, 'fat': 105.38144305555555, 'carbs': 426.79484437499997}
Extra: {}

2025-06-08T19:16:53.987860 - health_service - DEBUG - Function calculate_macros completed successfully
Extra: {}

2025-06-08T19:16:54.509424 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T19:16:54.627900 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T19:16:54.627900 - UserService - DEBUG - Getting user data for user_id: 0WUFpVTpjkhbt6hM0J3ySHjoYpb2
Extra: {}

2025-06-08T19:16:54.627900 - UserService - DEBUG - Getting user data for user_id: 0WUFpVTpjkhbt6hM0J3ySHjoYpb2
Extra: {}

2025-06-08T19:16:54.847206 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 15, 37, 897000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 95, 'weight': 120, 'last_metrics': {'bmi': 35.06208911614317, 'macros': {'protein': 284.52989625, 'fat': 105.38144305555555, 'carbs': 426.79484437499997}, 'bmr': 2447.569, 'tdee': 3793.73195, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 16, 50, 532000, tzinfo=datetime.timezone.utc)}, 'heart_disease': False, 'age': 24, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 15, 37, 897000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T19:16:54.847206 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 15, 37, 897000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 95, 'weight': 120, 'last_metrics': {'bmi': 35.06208911614317, 'macros': {'protein': 284.52989625, 'fat': 105.38144305555555, 'carbs': 426.79484437499997}, 'bmr': 2447.569, 'tdee': 3793.73195, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 16, 50, 532000, tzinfo=datetime.timezone.utc)}, 'heart_disease': False, 'age': 24, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 15, 37, 897000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T19:16:54.848213 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T19:16:58.883200 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/diabetes_check
Extra: {}

2025-06-08T19:16:58.883200 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T19:16:58.883200 - UserService - DEBUG - Getting user data for user_id: 0WUFpVTpjkhbt6hM0J3ySHjoYpb2
Extra: {}

2025-06-08T19:16:58.883200 - UserService - DEBUG - Getting user data for user_id: 0WUFpVTpjkhbt6hM0J3ySHjoYpb2
Extra: {}

2025-06-08T19:16:59.093146 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 15, 37, 897000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 95, 'weight': 120, 'last_metrics': {'bmi': 35.06208911614317, 'macros': {'protein': 284.52989625, 'fat': 105.38144305555555, 'carbs': 426.79484437499997}, 'bmr': 2447.569, 'tdee': 3793.73195, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 16, 50, 532000, tzinfo=datetime.timezone.utc)}, 'heart_disease': False, 'age': 24, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 15, 37, 897000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T19:16:59.093146 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 15, 37, 897000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 95, 'weight': 120, 'last_metrics': {'bmi': 35.06208911614317, 'macros': {'protein': 284.52989625, 'fat': 105.38144305555555, 'carbs': 426.79484437499997}, 'bmr': 2447.569, 'tdee': 3793.73195, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 16, 50, 532000, tzinfo=datetime.timezone.utc)}, 'heart_disease': False, 'age': 24, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 15, 37, 897000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T19:16:59.093146 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T19:16:59.093146 - health_service - DEBUG - Calling check_diabetes_risk
Extra: {}

2025-06-08T19:16:59.093146 - HealthService - DEBUG - Checking diabetes risk for user data: {'ethnicity': 'Other', 'height': 185, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Male', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 15, 37, 897000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 95, 'weight': 120, 'last_metrics': {'bmi': 35.06208911614317, 'macros': {'protein': 284.52989625, 'fat': 105.38144305555555, 'carbs': 426.79484437499997}, 'bmr': 2447.569, 'tdee': 3793.73195, 'bmi_class': 'obese', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 16, 50, 532000, tzinfo=datetime.timezone.utc)}, 'heart_disease': False, 'age': 24, 'vegan': True, 'activity_level': 'Moderately Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 15, 37, 897000, tzinfo=datetime.timezone.utc), 'email': 'test@test.com'}
Extra: {}

2025-06-08T19:16:59.093146 - HealthService - DEBUG - Prepared input data for diabetes prediction: {'year': [2022], 'gender': [1], 'age': [24], 'location': [4], 'africanamerican': [0], 'asian': [0], 'caucasian': [0], 'hispanic': [0], 'other': [1], 'hypertension': [0], 'heart_disease': [0], 'smoking_history': [4], 'bmi': [35.06208911614317], 'hbA1c_level': [5], 'blood_glucose_level': [95]}
Extra: {}

2025-06-08T19:16:59.273316 - HealthService - DEBUG - Diabetes risk prediction: {'prediction': 'no', 'prediction_code': 0}
Extra: {}

2025-06-08T19:16:59.274321 - health_service - DEBUG - Function check_diabetes_risk completed successfully
Extra: {}

2025-06-08T19:16:59.659243 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/diabetes_check
Extra: {}

2025-06-08T19:18:13.614837 - UserService - DEBUG - Creating new user with email: test1@test.com
Extra: {}

2025-06-08T19:18:13.614837 - UserService - DEBUG - Creating new user with email: test1@test.com
Extra: {}

2025-06-08T19:18:13.614837 - UserService - DEBUG - Additional data: {}
Extra: {}

2025-06-08T19:18:13.614837 - UserService - DEBUG - Additional data: {}
Extra: {}

2025-06-08T19:18:14.548079 - UserService - DEBUG - User data saved to Firestore: {'email': 'test1@test.com', 'display_name': '', 'created_at': Sentinel: Value used to set a document field to the server timestamp., 'last_login': Sentinel: Value used to set a document field to the server timestamp.}
Extra: {}

2025-06-08T19:18:14.548079 - UserService - DEBUG - User data saved to Firestore: {'email': 'test1@test.com', 'display_name': '', 'created_at': Sentinel: Value used to set a document field to the server timestamp., 'last_login': Sentinel: Value used to set a document field to the server timestamp.}
Extra: {}

2025-06-08T19:18:27.803476 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T19:18:27.805834 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T19:18:28.021145 - UserRoutes - INFO - User profile retrieved successfully
Extra: {}

2025-06-08T19:18:28.021145 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T19:19:08.520385 - UserRoutes - INFO - API Request: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T19:19:08.522385 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T19:19:08.522385 - UserRoutes - DEBUG - Updating user profile
Extra: {}

2025-06-08T19:19:08.798679 - UserRoutes - INFO - User profile updated successfully
Extra: {}

2025-06-08T19:19:08.798679 - UserRoutes - INFO - API Response: PUT http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T19:19:11.317395 - UserRoutes - INFO - API Request: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T19:19:11.319296 - UserRoutes - DEBUG - User authenticated
Extra: {}

2025-06-08T19:19:11.520397 - UserRoutes - INFO - User profile retrieved successfully
Extra: {}

2025-06-08T19:19:11.520397 - UserRoutes - INFO - API Response: GET http://192.168.1.25:5000/api/user/profile
Extra: {}

2025-06-08T19:19:16.236882 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T19:19:16.237773 - UserService - DEBUG - Getting user data for user_id: Oji1TrRvf9ezJ1IEBXB88yqBH9C3
Extra: {}

2025-06-08T19:19:16.238099 - UserService - DEBUG - Getting user data for user_id: Oji1TrRvf9ezJ1IEBXB88yqBH9C3
Extra: {}

2025-06-08T19:19:16.437901 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 176, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 130, 'weight': 76, 'heart_disease': False, 'age': 22, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com'}
Extra: {}

2025-06-08T19:19:16.437901 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 176, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 130, 'weight': 76, 'heart_disease': False, 'age': 22, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com'}
Extra: {}

2025-06-08T19:19:16.437901 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T19:19:16.898690 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T19:19:16.899687 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T19:19:16.899687 - UserService - DEBUG - Getting user data for user_id: Oji1TrRvf9ezJ1IEBXB88yqBH9C3
Extra: {}

2025-06-08T19:19:16.900508 - UserService - DEBUG - Getting user data for user_id: Oji1TrRvf9ezJ1IEBXB88yqBH9C3
Extra: {}

2025-06-08T19:19:17.139549 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 176, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 130, 'weight': 76, 'heart_disease': False, 'age': 22, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com'}
Extra: {}

2025-06-08T19:19:17.139549 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 176, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 130, 'weight': 76, 'heart_disease': False, 'age': 22, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com'}
Extra: {}

2025-06-08T19:19:17.139549 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T19:19:17.139549 - health_service - DEBUG - Calling calculate_bmi
Extra: {}

2025-06-08T19:19:17.139549 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': 176, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 130, 'weight': 76, 'heart_disease': False, 'age': 22, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com'}
Extra: {}

2025-06-08T19:19:17.139549 - HealthService - DEBUG - BMI calculated: 24.535123966942148, Classification: normal weight
Extra: {}

2025-06-08T19:19:17.152730 - health_service - DEBUG - Function calculate_bmi completed successfully
Extra: {}

2025-06-08T19:19:17.152730 - health_service - DEBUG - Calling calculate_energy
Extra: {}

2025-06-08T19:19:17.152730 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': 176, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 130, 'weight': 76, 'heart_disease': False, 'age': 22, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com'}
Extra: {}

2025-06-08T19:19:17.152730 - HealthService - DEBUG - Energy metrics calculated - BMR: 1600.71, TDEE: 2200.97
Extra: {}

2025-06-08T19:19:17.152730 - health_service - DEBUG - Function calculate_energy completed successfully
Extra: {}

2025-06-08T19:19:17.152730 - health_service - DEBUG - Calling calculate_macros
Extra: {}

2025-06-08T19:19:17.152730 - HealthService - DEBUG - Calculating macros for person info: {'ethnicity': 'Other', 'height': 176, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 130, 'weight': 76, 'heart_disease': False, 'age': 22, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com'}, calories: 2200.969375
Extra: {}

2025-06-08T19:19:17.152730 - HealthService - DEBUG - Macros calculated: {'protein': 165.072703125, 'fat': 61.13803819444445, 'carbs': 247.60905468750002}
Extra: {}

2025-06-08T19:19:17.152730 - health_service - DEBUG - Function calculate_macros completed successfully
Extra: {}

2025-06-08T19:19:17.691051 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/calculate_metrics
Extra: {}

2025-06-08T19:19:17.789937 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T19:19:17.789937 - UserService - DEBUG - Getting user data for user_id: Oji1TrRvf9ezJ1IEBXB88yqBH9C3
Extra: {}

2025-06-08T19:19:17.789937 - UserService - DEBUG - Getting user data for user_id: Oji1TrRvf9ezJ1IEBXB88yqBH9C3
Extra: {}

2025-06-08T19:19:17.992692 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 176, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 130, 'weight': 76, 'last_metrics': {'bmi': 24.535123966942148, 'macros': {'protein': 165.072703125, 'fat': 61.13803819444445, 'carbs': 247.60905468750002}, 'bmr': 1600.7050000000002, 'tdee': 2200.969375, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 19, 13, 699000, tzinfo=datetime.timezone.utc)}, 'heart_disease': False, 'age': 22, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com'}
Extra: {}

2025-06-08T19:19:17.992692 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 176, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 130, 'weight': 76, 'last_metrics': {'bmi': 24.535123966942148, 'macros': {'protein': 165.072703125, 'fat': 61.13803819444445, 'carbs': 247.60905468750002}, 'bmr': 1600.7050000000002, 'tdee': 2200.969375, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 19, 13, 699000, tzinfo=datetime.timezone.utc)}, 'heart_disease': False, 'age': 22, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com'}
Extra: {}

2025-06-08T19:19:17.992692 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T19:19:20.055223 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T19:19:20.055223 - UserService - DEBUG - Getting user data for user_id: Oji1TrRvf9ezJ1IEBXB88yqBH9C3
Extra: {}

2025-06-08T19:19:20.055223 - UserService - DEBUG - Getting user data for user_id: Oji1TrRvf9ezJ1IEBXB88yqBH9C3
Extra: {}

2025-06-08T19:19:20.252502 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 176, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 130, 'weight': 76, 'last_metrics': {'bmi': 24.535123966942148, 'macros': {'protein': 165.072703125, 'fat': 61.13803819444445, 'carbs': 247.60905468750002}, 'bmr': 1600.7050000000002, 'tdee': 2200.969375, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 19, 13, 699000, tzinfo=datetime.timezone.utc)}, 'heart_disease': False, 'age': 22, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com'}
Extra: {}

2025-06-08T19:19:20.252502 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 176, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 130, 'weight': 76, 'last_metrics': {'bmi': 24.535123966942148, 'macros': {'protein': 165.072703125, 'fat': 61.13803819444445, 'carbs': 247.60905468750002}, 'bmr': 1600.7050000000002, 'tdee': 2200.969375, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 19, 13, 699000, tzinfo=datetime.timezone.utc)}, 'heart_disease': False, 'age': 22, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com'}
Extra: {}

2025-06-08T19:19:20.252502 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T19:19:23.721890 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/diabetes_check
Extra: {}

2025-06-08T19:19:23.721890 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T19:19:23.721890 - UserService - DEBUG - Getting user data for user_id: Oji1TrRvf9ezJ1IEBXB88yqBH9C3
Extra: {}

2025-06-08T19:19:23.722898 - UserService - DEBUG - Getting user data for user_id: Oji1TrRvf9ezJ1IEBXB88yqBH9C3
Extra: {}

2025-06-08T19:19:23.919496 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 176, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 130, 'weight': 76, 'last_metrics': {'bmi': 24.535123966942148, 'macros': {'protein': 165.072703125, 'fat': 61.13803819444445, 'carbs': 247.60905468750002}, 'bmr': 1600.7050000000002, 'tdee': 2200.969375, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 19, 13, 699000, tzinfo=datetime.timezone.utc)}, 'heart_disease': False, 'age': 22, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com'}
Extra: {}

2025-06-08T19:19:23.919496 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 176, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 130, 'weight': 76, 'last_metrics': {'bmi': 24.535123966942148, 'macros': {'protein': 165.072703125, 'fat': 61.13803819444445, 'carbs': 247.60905468750002}, 'bmr': 1600.7050000000002, 'tdee': 2200.969375, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 19, 13, 699000, tzinfo=datetime.timezone.utc)}, 'heart_disease': False, 'age': 22, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com'}
Extra: {}

2025-06-08T19:19:23.919496 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T19:19:23.919496 - health_service - DEBUG - Calling check_diabetes_risk
Extra: {}

2025-06-08T19:19:23.919496 - HealthService - DEBUG - Checking diabetes risk for user data: {'ethnicity': 'Other', 'height': 176, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 130, 'weight': 76, 'last_metrics': {'bmi': 24.535123966942148, 'macros': {'protein': 165.072703125, 'fat': 61.13803819444445, 'carbs': 247.60905468750002}, 'bmr': 1600.7050000000002, 'tdee': 2200.969375, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 19, 13, 699000, tzinfo=datetime.timezone.utc)}, 'heart_disease': False, 'age': 22, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com'}
Extra: {}

2025-06-08T19:19:23.919496 - HealthService - DEBUG - Prepared input data for diabetes prediction: {'year': [2022], 'gender': [0], 'age': [22], 'location': [4], 'africanamerican': [0], 'asian': [0], 'caucasian': [0], 'hispanic': [0], 'other': [1], 'hypertension': [0], 'heart_disease': [0], 'smoking_history': [4], 'bmi': [24.535123966942148], 'hbA1c_level': [5], 'blood_glucose_level': [130]}
Extra: {}

2025-06-08T19:19:23.951996 - HealthService - DEBUG - Diabetes risk prediction: {'prediction': 'no', 'prediction_code': 0}
Extra: {}

2025-06-08T19:19:23.951996 - health_service - DEBUG - Function check_diabetes_risk completed successfully
Extra: {}

2025-06-08T19:19:24.565510 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/diabetes_check
Extra: {}

2025-06-08T19:19:33.973094 - food_routes - INFO - API Request: POST http://192.168.1.25:5000/api/food/diet
Extra: {}

2025-06-08T19:19:33.973094 - food_routes - DEBUG - Getting macro breakdown
Extra: {}

2025-06-08T19:19:33.989025 - AIService - DEBUG - Getting macro breakdown for food: Peanuts
Extra: {}

2025-06-08T19:19:33.989025 - AIService - DEBUG - Getting response for prompt: Return the macro breakdown of Peanuts.
        Return a list of MacroBreakdown objects with nutrient...
Extra: {}

2025-06-08T19:19:33.989025 - AIService - DEBUG - Output class: MacroBreakdown
Extra: {}

2025-06-08T19:19:35.423056 - AIService - DEBUG - Response received: [
  {
    "nutrient": "Calories",
    "amount": "567 kcal"
  },
  {
    "nutrient": "Protein",
    "...
Extra: {}

2025-06-08T19:19:35.423056 - AIService - DEBUG - Macro breakdown generated successfully
Extra: {}

2025-06-08T19:19:35.423056 - food_routes - DEBUG - Saving diet query to Firestore
Extra: {}

2025-06-08T19:19:35.642966 - food_routes - INFO - Diet query processed successfully
Extra: {}

2025-06-08T19:19:35.642966 - food_routes - INFO - API Response: POST http://192.168.1.25:5000/api/food/diet
Extra: {}

2025-06-08T19:19:47.229593 - food_routes - INFO - API Request: POST http://192.168.1.25:5000/api/food/recipes
Extra: {}

2025-06-08T19:19:47.231592 - food_routes - DEBUG - File received
Extra: {}

2025-06-08T19:19:47.232592 - food_routes - DEBUG - Saved uploaded file
Extra: {}

2025-06-08T19:19:47.232592 - food_routes - DEBUG - Initializing Clarifai model
Extra: {}

2025-06-08T19:19:47.260471 - food_routes - DEBUG - Running food recognition
Extra: {}

2025-06-08T19:19:48.277218 - food_routes - DEBUG - Food recognized
Extra: {}

2025-06-08T19:19:48.277218 - food_routes - DEBUG - Generating recipe
Extra: {}

2025-06-08T19:19:48.277218 - AIService - DEBUG - Calling generate_recipe
Extra: {}

2025-06-08T19:19:48.277218 - AIService - DEBUG - Generating recipe for food: almond
Extra: {}

2025-06-08T19:19:48.277218 - AIService - DEBUG - Getting response for prompt: Generate a recipe with almond.
        Return a Recipe object with recipeName, calories, protein, fa...
Extra: {}

2025-06-08T19:19:48.277218 - AIService - DEBUG - Output class: Recipe
Extra: {}

2025-06-08T19:19:49.392737 - AIService - DEBUG - Response received: [
  {
    "recipeName": "Almond Joy Energy Bites",
    "calories": 150,
    "protein": 5,
    "fats"...
Extra: {}

2025-06-08T19:19:49.392737 - AIService - DEBUG - Recipe generated successfully
Extra: {}

2025-06-08T19:19:49.392737 - AIService - DEBUG - Function generate_recipe completed successfully
Extra: {}

2025-06-08T19:19:49.392737 - food_routes - DEBUG - Saving recipe query to Firestore
Extra: {}

2025-06-08T19:19:49.604857 - food_routes - INFO - Recipe generated successfully
Extra: {}

2025-06-08T19:19:49.617273 - food_routes - DEBUG - Removed temporary file
Extra: {}

2025-06-08T19:19:49.631381 - food_routes - INFO - API Response: POST http://192.168.1.25:5000/api/food/recipes
Extra: {}

2025-06-08T19:20:04.365608 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T19:20:04.365608 - UserService - DEBUG - Getting user data for user_id: Oji1TrRvf9ezJ1IEBXB88yqBH9C3
Extra: {}

2025-06-08T19:20:04.365608 - UserService - DEBUG - Getting user data for user_id: Oji1TrRvf9ezJ1IEBXB88yqBH9C3
Extra: {}

2025-06-08T19:20:05.207737 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 176, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 130, 'weight': 76, 'last_metrics': {'bmi': 24.535123966942148, 'macros': {'protein': 165.072703125, 'fat': 61.13803819444445, 'carbs': 247.60905468750002}, 'bmr': 1600.7050000000002, 'tdee': 2200.969375, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 19, 13, 699000, tzinfo=datetime.timezone.utc)}, 'heart_disease': False, 'age': 22, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com'}
Extra: {}

2025-06-08T19:20:05.207737 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 176, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 130, 'weight': 76, 'last_metrics': {'bmi': 24.535123966942148, 'macros': {'protein': 165.072703125, 'fat': 61.13803819444445, 'carbs': 247.60905468750002}, 'bmr': 1600.7050000000002, 'tdee': 2200.969375, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 19, 13, 699000, tzinfo=datetime.timezone.utc)}, 'heart_disease': False, 'age': 22, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com'}
Extra: {}

2025-06-08T19:20:05.211382 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T19:20:05.211382 - health_service - DEBUG - Calling calculate_bmi
Extra: {}

2025-06-08T19:20:05.211382 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': 176, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 130, 'weight': 76, 'last_metrics': {'bmi': 24.535123966942148, 'macros': {'protein': 165.072703125, 'fat': 61.13803819444445, 'carbs': 247.60905468750002}, 'bmr': 1600.7050000000002, 'tdee': 2200.969375, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 19, 13, 699000, tzinfo=datetime.timezone.utc)}, 'heart_disease': False, 'age': 22, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com'}
Extra: {}

2025-06-08T19:20:05.211382 - HealthService - DEBUG - BMI calculated: 24.535123966942148, Classification: normal weight
Extra: {}

2025-06-08T19:20:05.211382 - health_service - DEBUG - Function calculate_bmi completed successfully
Extra: {}

2025-06-08T19:20:05.211382 - health_service - DEBUG - Calling calculate_energy
Extra: {}

2025-06-08T19:20:05.211382 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': 176, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 130, 'weight': 76, 'last_metrics': {'bmi': 24.535123966942148, 'macros': {'protein': 165.072703125, 'fat': 61.13803819444445, 'carbs': 247.60905468750002}, 'bmr': 1600.7050000000002, 'tdee': 2200.969375, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 19, 13, 699000, tzinfo=datetime.timezone.utc)}, 'heart_disease': False, 'age': 22, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com'}
Extra: {}

2025-06-08T19:20:05.213387 - HealthService - DEBUG - Energy metrics calculated - BMR: 1600.71, TDEE: 2200.97
Extra: {}

2025-06-08T19:20:05.213387 - health_service - DEBUG - Function calculate_energy completed successfully
Extra: {}

2025-06-08T19:20:05.213387 - AIService - DEBUG - Calling generate_diet_plan
Extra: {}

2025-06-08T19:20:05.213387 - AIService - DEBUG - Generating diet plan for user data: {'ethnicity': 'Other', 'height': 176, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 130, 'weight': 76, 'last_metrics': {'bmi': 24.535123966942148, 'macros': {'protein': 165.072703125, 'fat': 61.13803819444445, 'carbs': 247.60905468750002}, 'bmr': 1600.7050000000002, 'tdee': 2200.969375, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 19, 13, 699000, tzinfo=datetime.timezone.utc)}, 'heart_disease': False, 'age': 22, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com', 'bmi': 24.535123966942148, 'bmr': 1600.7050000000002, 'tdee': 2200.969375}
Extra: {}

2025-06-08T19:20:05.213387 - AIService - DEBUG - Preferences: Low Carb, High protein
Extra: {}

2025-06-08T19:20:05.223798 - AIService - DEBUG - Getting response for prompt: Create a diet plan with the preferences: Low Carb, High protein and vegan: True 
        for a 22yo ...
Extra: {}

2025-06-08T19:20:05.225838 - AIService - DEBUG - Output class: DietPlan
Extra: {}

2025-06-08T19:20:07.582406 - AIService - DEBUG - Response received: [
  {
    "mealtime": "Breakfast",
    "foodItem": "Tofu Scramble with Spinach and Avocado",
    "ca...
Extra: {}

2025-06-08T19:20:07.582406 - AIService - DEBUG - Diet plan generated successfully
Extra: {}

2025-06-08T19:20:07.582406 - AIService - DEBUG - Function generate_diet_plan completed successfully
Extra: {}

2025-06-08T19:20:24.322571 - health_routes - INFO - API Request: GET http://192.168.1.25:5000/api/health/advice
Extra: {}

2025-06-08T19:20:24.534030 - health_routes - INFO - API Response: GET http://192.168.1.25:5000/api/health/advice
Extra: {}

2025-06-08T19:20:25.472689 - health_routes - INFO - API Request: POST http://192.168.1.25:5000/api/health/advice
Extra: {}

2025-06-08T19:20:25.472689 - user_service - DEBUG - Calling get_user
Extra: {}

2025-06-08T19:20:25.472689 - UserService - DEBUG - Getting user data for user_id: Oji1TrRvf9ezJ1IEBXB88yqBH9C3
Extra: {}

2025-06-08T19:20:25.472689 - UserService - DEBUG - Getting user data for user_id: Oji1TrRvf9ezJ1IEBXB88yqBH9C3
Extra: {}

2025-06-08T19:20:25.677251 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 176, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 130, 'weight': 76, 'last_metrics': {'bmi': 24.535123966942148, 'macros': {'protein': 165.072703125, 'fat': 61.13803819444445, 'carbs': 247.60905468750002}, 'bmr': 1600.7050000000002, 'tdee': 2200.969375, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 19, 13, 699000, tzinfo=datetime.timezone.utc)}, 'heart_disease': False, 'age': 22, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com'}
Extra: {}

2025-06-08T19:20:25.677251 - UserService - DEBUG - User data retrieved successfully: {'ethnicity': 'Other', 'height': 176, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 130, 'weight': 76, 'last_metrics': {'bmi': 24.535123966942148, 'macros': {'protein': 165.072703125, 'fat': 61.13803819444445, 'carbs': 247.60905468750002}, 'bmr': 1600.7050000000002, 'tdee': 2200.969375, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 19, 13, 699000, tzinfo=datetime.timezone.utc)}, 'heart_disease': False, 'age': 22, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com'}
Extra: {}

2025-06-08T19:20:25.678250 - user_service - DEBUG - Function get_user completed successfully
Extra: {}

2025-06-08T19:20:25.678250 - health_service - DEBUG - Calling calculate_bmi
Extra: {}

2025-06-08T19:20:25.679247 - HealthService - DEBUG - Calculating BMI for person info: {'ethnicity': 'Other', 'height': 176, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 130, 'weight': 76, 'last_metrics': {'bmi': 24.535123966942148, 'macros': {'protein': 165.072703125, 'fat': 61.13803819444445, 'carbs': 247.60905468750002}, 'bmr': 1600.7050000000002, 'tdee': 2200.969375, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 19, 13, 699000, tzinfo=datetime.timezone.utc)}, 'heart_disease': False, 'age': 22, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com'}
Extra: {}

2025-06-08T19:20:25.679247 - HealthService - DEBUG - BMI calculated: 24.535123966942148, Classification: normal weight
Extra: {}

2025-06-08T19:20:25.679247 - health_service - DEBUG - Function calculate_bmi completed successfully
Extra: {}

2025-06-08T19:20:25.679247 - health_service - DEBUG - Calling calculate_energy
Extra: {}

2025-06-08T19:20:25.680144 - HealthService - DEBUG - Calculating energy metrics for person info: {'ethnicity': 'Other', 'height': 176, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 130, 'weight': 76, 'last_metrics': {'bmi': 24.535123966942148, 'macros': {'protein': 165.072703125, 'fat': 61.13803819444445, 'carbs': 247.60905468750002}, 'bmr': 1600.7050000000002, 'tdee': 2200.969375, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 19, 13, 699000, tzinfo=datetime.timezone.utc)}, 'heart_disease': False, 'age': 22, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com'}
Extra: {}

2025-06-08T19:20:25.680144 - HealthService - DEBUG - Energy metrics calculated - BMR: 1600.71, TDEE: 2200.97
Extra: {}

2025-06-08T19:20:25.680766 - health_service - DEBUG - Function calculate_energy completed successfully
Extra: {}

2025-06-08T19:20:25.680766 - AIService - DEBUG - Calling generate_health_advice
Extra: {}

2025-06-08T19:20:25.680766 - AIService - DEBUG - Generating health advice for user data: {'ethnicity': 'Other', 'height': 176, 'goal': 'Lose Weight', 'smoking_history': 'never', 'display_name': '', 'sex': 'Female', 'created_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'location': 'California', 'blood_glucose': 130, 'weight': 76, 'last_metrics': {'bmi': 24.535123966942148, 'macros': {'protein': 165.072703125, 'fat': 61.13803819444445, 'carbs': 247.60905468750002}, 'bmr': 1600.7050000000002, 'tdee': 2200.969375, 'bmi_class': 'normal weight', 'calculated_at': DatetimeWithNanoseconds(2025, 6, 8, 16, 19, 13, 699000, tzinfo=datetime.timezone.utc)}, 'heart_disease': False, 'age': 22, 'vegan': True, 'activity_level': 'Lightly Active', 'race': 'Other', 'hba1c': 5, 'hypertension': False, 'last_login': DatetimeWithNanoseconds(2025, 6, 8, 16, 18, 10, 559000, tzinfo=datetime.timezone.utc), 'email': 'test1@test.com'}
Extra: {}

2025-06-08T19:20:25.680766 - AIService - DEBUG - Metrics: {'bmi': 24.535123966942148, 'bmi_class': 'normal weight', 'bmr': 1600.7050000000002, 'tdee': 2200.969375}
Extra: {}

2025-06-08T19:20:25.680766 - AIService - DEBUG - Getting response for prompt: 
        Provide comprehensive health advice for:
        - 22 year old Female
        - Height: 176...
Extra: {}

2025-06-08T19:20:25.681502 - AIService - DEBUG - Output class: HealthAdvice
Extra: {}

2025-06-08T19:20:29.144202 - AIService - DEBUG - Response received: [
  {
    "general_recommendations": "Maintain a balanced lifestyle incorporating regular physical a...
Extra: {}

2025-06-08T19:20:29.144202 - AIService - DEBUG - Health advice generated successfully
Extra: {}

2025-06-08T19:20:29.144202 - AIService - DEBUG - Function generate_health_advice completed successfully
Extra: {}

2025-06-08T19:20:29.386282 - health_routes - INFO - API Response: POST http://192.168.1.25:5000/api/health/advice
Extra: {}

2025-06-08T19:20:46.998619 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T19:20:46.998619 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T19:20:47.188560 - user_service - INFO - Chat history retrieved successfully
Extra: {}

2025-06-08T19:20:47.188560 - user_service - DEBUG - Function get_chat_history completed successfully
Extra: {}

2025-06-08T19:20:55.837025 - UserRoutes - INFO - API Request: POST http://192.168.1.25:5000/api/user/chat
Extra: {}

2025-06-08T19:20:55.837025 - UserRoutes - DEBUG - Processing chat message
Extra: {}

2025-06-08T19:20:55.837025 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T19:20:55.837025 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T19:20:56.042301 - user_service - INFO - Chat history retrieved successfully
Extra: {}

2025-06-08T19:20:56.042301 - user_service - DEBUG - Function get_chat_history completed successfully
Extra: {}

2025-06-08T19:20:56.773681 - UserRoutes - DEBUG - Saving chat to Firestore
Extra: {}

2025-06-08T19:20:56.773681 - user_service - DEBUG - Calling save_chat_message
Extra: {}

2025-06-08T19:20:56.773681 - user_service - INFO - Saving chat message
Extra: {}

2025-06-08T19:20:57.545878 - user_service - INFO - Chat message saved successfully
Extra: {}

2025-06-08T19:20:57.545878 - user_service - DEBUG - Function save_chat_message completed successfully
Extra: {}

2025-06-08T19:20:57.545878 - UserRoutes - INFO - Chat processed successfully
Extra: {}

2025-06-08T19:20:57.545878 - UserRoutes - INFO - API Response: POST http://192.168.1.25:5000/api/user/chat
Extra: {}

2025-06-08T19:21:06.146863 - UserRoutes - INFO - API Request: POST http://192.168.1.25:5000/api/user/chat
Extra: {}

2025-06-08T19:21:06.146863 - UserRoutes - DEBUG - Processing chat message
Extra: {}

2025-06-08T19:21:06.146863 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T19:21:06.146863 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T19:21:06.344143 - user_service - INFO - Chat history retrieved successfully
Extra: {}

2025-06-08T19:21:06.344143 - user_service - DEBUG - Function get_chat_history completed successfully
Extra: {}

2025-06-08T19:21:07.682562 - UserRoutes - DEBUG - Saving chat to Firestore
Extra: {}

2025-06-08T19:21:07.682562 - user_service - DEBUG - Calling save_chat_message
Extra: {}

2025-06-08T19:21:07.682562 - user_service - INFO - Saving chat message
Extra: {}

2025-06-08T19:21:08.467724 - user_service - INFO - Chat message saved successfully
Extra: {}

2025-06-08T19:21:08.467724 - user_service - DEBUG - Function save_chat_message completed successfully
Extra: {}

2025-06-08T19:21:08.467724 - UserRoutes - INFO - Chat processed successfully
Extra: {}

2025-06-08T19:21:08.467724 - UserRoutes - INFO - API Response: POST http://192.168.1.25:5000/api/user/chat
Extra: {}

2025-06-08T19:21:14.977195 - UserRoutes - INFO - API Request: POST http://192.168.1.25:5000/api/user/chat
Extra: {}

2025-06-08T19:21:14.977195 - UserRoutes - DEBUG - Processing chat message
Extra: {}

2025-06-08T19:21:14.977195 - user_service - DEBUG - Calling get_chat_history
Extra: {}

2025-06-08T19:21:14.977195 - user_service - INFO - Getting chat history
Extra: {}

2025-06-08T19:21:15.179477 - user_service - INFO - Chat history retrieved successfully
Extra: {}

2025-06-08T19:21:15.179477 - user_service - DEBUG - Function get_chat_history completed successfully
Extra: {}

2025-06-08T19:21:15.852760 - UserRoutes - DEBUG - Saving chat to Firestore
Extra: {}

2025-06-08T19:21:15.852760 - user_service - DEBUG - Calling save_chat_message
Extra: {}

2025-06-08T19:21:15.852760 - user_service - INFO - Saving chat message
Extra: {}

2025-06-08T19:21:16.616295 - user_service - INFO - Chat message saved successfully
Extra: {}

2025-06-08T19:21:16.616295 - user_service - DEBUG - Function save_chat_message completed successfully
Extra: {}

2025-06-08T19:21:16.616295 - UserRoutes - INFO - Chat processed successfully
Extra: {}

2025-06-08T19:21:16.616295 - UserRoutes - INFO - API Response: POST http://192.168.1.25:5000/api/user/chat
Extra: {}

2025-06-08T19:21:21.081719 - user_service - DEBUG - Calling delete_chat_history
Extra: {}

2025-06-08T19:21:21.082756 - UserService - DEBUG - Deleting chat history for user_id: Oji1TrRvf9ezJ1IEBXB88yqBH9C3
Extra: {}

2025-06-08T19:21:21.082756 - UserService - DEBUG - Deleting chat history for user_id: Oji1TrRvf9ezJ1IEBXB88yqBH9C3
Extra: {}

2025-06-08T19:21:21.845031 - UserService - DEBUG - Successfully deleted chat history for user_id: Oji1TrRvf9ezJ1IEBXB88yqBH9C3
Extra: {}

2025-06-08T19:21:21.845031 - UserService - DEBUG - Successfully deleted chat history for user_id: Oji1TrRvf9ezJ1IEBXB88yqBH9C3
Extra: {}

2025-06-08T19:21:21.845031 - user_service - DEBUG - Function delete_chat_history completed successfully
Extra: {}

2025-06-08T19:59:47.792742 - app - INFO - Starting application
Extra: {}

2025-06-08T19:59:47.792742 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T19:59:47.792742 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T19:59:47.792742 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T19:59:47.792742 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T19:59:47.877134 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T19:59:47.877134 - app - INFO - Loading ML model
Extra: {}

2025-06-08T19:59:54.872427 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T19:59:54.872427 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T19:59:54.872427 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T19:59:54.872427 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T19:59:54.991588 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T19:59:54.991588 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T19:59:54.991588 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T19:59:54.991588 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T19:59:54.991588 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T19:59:54.991588 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T19:59:54.991588 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T19:59:54.991588 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T19:59:54.991588 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T19:59:55.013573 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T19:59:55.022572 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T19:59:55.022572 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T19:59:55.023576 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T19:59:55.027255 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T19:59:55.027255 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T19:59:55.027255 - app - INFO - Application created successfully
Extra: {}

2025-06-08T19:59:56.746789 - app - INFO - Starting application
Extra: {}

2025-06-08T19:59:56.746789 - app - DEBUG - Calling create_app
Extra: {}

2025-06-08T19:59:56.746789 - app - INFO - Initializing Flask application
Extra: {}

2025-06-08T19:59:56.746789 - app - DEBUG - Flask app initialized with config
Extra: {}

2025-06-08T19:59:56.746789 - app - INFO - Initializing Firebase
Extra: {}

2025-06-08T19:59:56.785679 - app - INFO - Firebase initialized successfully
Extra: {}

2025-06-08T19:59:56.785679 - app - INFO - Loading ML model
Extra: {}

2025-06-08T19:59:57.721022 - app - INFO - ML model loaded successfully
Extra: {}

2025-06-08T19:59:57.721898 - app - INFO - Initializing route blueprints
Extra: {}

2025-06-08T19:59:57.722911 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T19:59:57.722911 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T19:59:57.785081 - UserRoutes - INFO - User routes initialized successfully
Extra: {}

2025-06-08T19:59:57.785081 - health_service - INFO - Initializing health service
Extra: {}

2025-06-08T19:59:57.785081 - HealthService - DEBUG - Initializing HealthService
Extra: {}

2025-06-08T19:59:57.785081 - HealthService - DEBUG - HealthService initialized with diabetes model and activity level multipliers
Extra: {}

2025-06-08T19:59:57.786060 - health_service - DEBUG - Firestore client configured
Extra: {}

2025-06-08T19:59:57.786060 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T19:59:57.786060 - UserService - DEBUG - Initializing UserService
Extra: {}

2025-06-08T19:59:57.786060 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T19:59:57.786060 - UserService - DEBUG - UserService initialized with Firestore database
Extra: {}

2025-06-08T19:59:57.795897 - health_routes - INFO - Health routes initialized successfully
Extra: {}

2025-06-08T19:59:57.803028 - food_routes - INFO - Food routes initialized successfully
Extra: {}

2025-06-08T19:59:57.803028 - app - DEBUG - Route blueprints initialized
Extra: {}

2025-06-08T19:59:57.803028 - app - INFO - Registering blueprints
Extra: {}

2025-06-08T19:59:57.806029 - app - INFO - Blueprints registered successfully
Extra: {}

2025-06-08T19:59:57.806930 - app - DEBUG - Function create_app completed successfully
Extra: {}

2025-06-08T19:59:57.806930 - app - INFO - Application created successfully
Extra: {}

